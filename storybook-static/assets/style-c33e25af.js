import{r as N,R as D}from"./index-76fb7be0.js";import{g as Gi}from"./_commonjsHelpers-de833af9.js";import"./index-f3b9022e.js";function de(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=de(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ur={exports:{}},qr={},Gr={exports:{}},Qr={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var at=N;function Qi(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ji=typeof Object.is=="function"?Object.is:Qi,ji=at.useState,es=at.useEffect,ts=at.useLayoutEffect,ns=at.useDebugValue;function rs(e,t){var n=t(),r=ji({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return ts(function(){o.value=n,o.getSnapshot=t,hn(o)&&s({inst:o})},[e,n,t]),es(function(){return hn(o)&&s({inst:o}),e(function(){hn(o)&&s({inst:o})})},[e]),ns(n),n}function hn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ji(e,n)}catch{return!0}}function os(e,t){return t()}var is=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?os:rs;Qr.useSyncExternalStore=at.useSyncExternalStore!==void 0?at.useSyncExternalStore:is;Gr.exports=Qr;var ss=Gr.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nn=N,as=ss;function cs(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ls=typeof Object.is=="function"?Object.is:cs,us=as.useSyncExternalStore,fs=nn.useRef,ds=nn.useEffect,hs=nn.useMemo,gs=nn.useDebugValue;qr.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=fs(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=hs(function(){function l(g){if(!u){if(u=!0,c=g,g=r(g),o!==void 0&&i.hasValue){var y=i.value;if(o(y,g))return f=y}return f=g}if(y=f,ls(c,g))return y;var p=r(g);return o!==void 0&&o(y,p)?y:(c=g,f=p)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,n,r,o]);var a=us(e,s[0],s[1]);return ds(function(){i.hasValue=!0,i.value=a},[a]),gs(a),a};Ur.exports=qr;var ps=Ur.exports;const ms=Gi(ps),ir=e=>{let t;const n=new Set,r=(c,f)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const g=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(y=>y(t,g))}},o=()=>t,l={setState:r,getState:o,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{n.clear()}},u=t=e(r,o,l);return l},ys=e=>e?ir(e):ir,{useDebugValue:xs}=D,{useSyncExternalStoreWithSelector:ws}=ms,bs=e=>e;function Jr(e,t=bs,n){const r=ws(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return xs(r),r}const sr=(e,t)=>{const n=ys(e),r=(o,s=t)=>Jr(n,o,s);return Object.assign(r,n),r},vs=(e,t)=>e?sr(e,t):sr;function ae(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var Ss={value:()=>{}};function rn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ft(n)}function Ft(e){this._=e}function _s(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ft.prototype=rn.prototype={constructor:Ft,on:function(e,t){var n=this._,r=_s(e+"",n),o,s=-1,i=r.length;if(arguments.length<2){for(;++s<i;)if((o=(e=r[s]).type)&&(o=Es(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(o=(e=r[s]).type)n[o]=ar(n[o],e.name,t);else if(t==null)for(o in n)n[o]=ar(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ft(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,s;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};function Es(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function ar(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Ss,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var _n="http://www.w3.org/1999/xhtml";const cr={svg:"http://www.w3.org/2000/svg",xhtml:_n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function on(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cr.hasOwnProperty(t)?{space:cr[t],local:e}:e}function Ns(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===_n&&t.documentElement.namespaceURI===_n?t.createElement(e):t.createElementNS(n,e)}}function Ms(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function jr(e){var t=on(e);return(t.local?Ms:Ns)(t)}function Cs(){}function Bn(e){return e==null?Cs:function(){return this.querySelector(e)}}function As(e){typeof e!="function"&&(e=Bn(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=new Array(i),l,u,c=0;c<i;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new ue(r,this._parents)}function $s(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ks(){return[]}function eo(e){return e==null?ks:function(){return this.querySelectorAll(e)}}function Ts(e){return function(){return $s(e.apply(this,arguments))}}function Ps(e){typeof e=="function"?e=Ts(e):e=eo(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var i=t[s],a=i.length,l,u=0;u<a;++u)(l=i[u])&&(r.push(e.call(l,l.__data__,u,i)),o.push(l));return new ue(r,o)}function to(e){return function(){return this.matches(e)}}function no(e){return function(t){return t.matches(e)}}var Rs=Array.prototype.find;function Ds(e){return function(){return Rs.call(this.children,e)}}function Is(){return this.firstElementChild}function zs(e){return this.select(e==null?Is:Ds(typeof e=="function"?e:no(e)))}var Hs=Array.prototype.filter;function Os(){return Array.from(this.children)}function Bs(e){return function(){return Hs.call(this.children,e)}}function Ls(e){return this.selectAll(e==null?Os:Bs(typeof e=="function"?e:no(e)))}function Vs(e){typeof e!="function"&&(e=to(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new ue(r,this._parents)}function ro(e){return new Array(e.length)}function Fs(){return new ue(this._enter||this._groups.map(ro),this._parents)}function Wt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Wt.prototype={constructor:Wt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ys(e){return function(){return e}}function Xs(e,t,n,r,o,s){for(var i=0,a,l=t.length,u=s.length;i<u;++i)(a=t[i])?(a.__data__=s[i],r[i]=a):n[i]=new Wt(e,s[i]);for(;i<l;++i)(a=t[i])&&(o[i]=a)}function Ks(e,t,n,r,o,s,i){var a,l,u=new Map,c=t.length,f=s.length,d=new Array(c),g;for(a=0;a<c;++a)(l=t[a])&&(d[a]=g=i.call(l,l.__data__,a,t)+"",u.has(g)?o[a]=l:u.set(g,l));for(a=0;a<f;++a)g=i.call(e,s[a],a,s)+"",(l=u.get(g))?(r[a]=l,l.__data__=s[a],u.delete(g)):n[a]=new Wt(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(d[a])===l&&(o[a]=l)}function Ws(e){return e.__data__}function Zs(e,t){if(!arguments.length)return Array.from(this,Ws);var n=t?Ks:Xs,r=this._parents,o=this._groups;typeof e!="function"&&(e=Ys(e));for(var s=o.length,i=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],f=o[u],d=f.length,g=Us(e.call(c,c&&c.__data__,u,r)),y=g.length,p=a[u]=new Array(y),v=i[u]=new Array(y),m=l[u]=new Array(d);n(c,f,p,v,m,g,t);for(var S=0,C=0,x,A;S<y;++S)if(x=p[S]){for(S>=C&&(C=S+1);!(A=v[C])&&++C<y;);x._next=A||null}}return i=new ue(i,r),i._enter=a,i._exit=l,i}function Us(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qs(){return new ue(this._exit||this._groups.map(ro),this._parents)}function Gs(e,t,n){var r=this.enter(),o=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),r&&o?r.merge(o).order():o}function Qs(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,i=Math.min(o,s),a=new Array(o),l=0;l<i;++l)for(var u=n[l],c=r[l],f=u.length,d=a[l]=new Array(f),g,y=0;y<f;++y)(g=u[y]||c[y])&&(d[y]=g);for(;l<o;++l)a[l]=n[l];return new ue(a,this._parents)}function Js(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,s=r[o],i;--o>=0;)(i=r[o])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function js(e){e||(e=ea);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var i=n[s],a=i.length,l=o[s]=new Array(a),u,c=0;c<a;++c)(u=i[c])&&(l[c]=u);l.sort(t)}return new ue(o,this._parents).order()}function ea(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ta(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function na(){return Array.from(this)}function ra(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var i=r[o];if(i)return i}return null}function oa(){let e=0;for(const t of this)++e;return e}function ia(){return!this.node()}function sa(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],s=0,i=o.length,a;s<i;++s)(a=o[s])&&e.call(a,a.__data__,s,o);return this}function aa(e){return function(){this.removeAttribute(e)}}function ca(e){return function(){this.removeAttributeNS(e.space,e.local)}}function la(e,t){return function(){this.setAttribute(e,t)}}function ua(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function fa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function da(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ha(e,t){var n=on(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ca:aa:typeof t=="function"?n.local?da:fa:n.local?ua:la)(n,t))}function oo(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ga(e){return function(){this.style.removeProperty(e)}}function pa(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ma(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ya(e,t,n){return arguments.length>1?this.each((t==null?ga:typeof t=="function"?ma:pa)(e,t,n??"")):ct(this.node(),e)}function ct(e,t){return e.style.getPropertyValue(t)||oo(e).getComputedStyle(e,null).getPropertyValue(t)}function xa(e){return function(){delete this[e]}}function wa(e,t){return function(){this[e]=t}}function ba(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function va(e,t){return arguments.length>1?this.each((t==null?xa:typeof t=="function"?ba:wa)(e,t)):this.node()[e]}function io(e){return e.trim().split(/^|\s+/)}function Ln(e){return e.classList||new so(e)}function so(e){this._node=e,this._names=io(e.getAttribute("class")||"")}so.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ao(e,t){for(var n=Ln(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function co(e,t){for(var n=Ln(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Sa(e){return function(){ao(this,e)}}function _a(e){return function(){co(this,e)}}function Ea(e,t){return function(){(t.apply(this,arguments)?ao:co)(this,e)}}function Na(e,t){var n=io(e+"");if(arguments.length<2){for(var r=Ln(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Ea:t?Sa:_a)(n,t))}function Ma(){this.textContent=""}function Ca(e){return function(){this.textContent=e}}function Aa(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $a(e){return arguments.length?this.each(e==null?Ma:(typeof e=="function"?Aa:Ca)(e)):this.node().textContent}function ka(){this.innerHTML=""}function Ta(e){return function(){this.innerHTML=e}}function Pa(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ra(e){return arguments.length?this.each(e==null?ka:(typeof e=="function"?Pa:Ta)(e)):this.node().innerHTML}function Da(){this.nextSibling&&this.parentNode.appendChild(this)}function Ia(){return this.each(Da)}function za(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ha(){return this.each(za)}function Oa(e){var t=typeof e=="function"?e:jr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ba(){return null}function La(e,t){var n=typeof e=="function"?e:jr(e),r=t==null?Ba:typeof t=="function"?t:Bn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Va(){var e=this.parentNode;e&&e.removeChild(this)}function Fa(){return this.each(Va)}function Ya(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xa(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ka(e){return this.select(e?Xa:Ya)}function Wa(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Za(e){return function(t){e.call(this,t,this.__data__)}}function Ua(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function qa(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Ga(e,t,n){return function(){var r=this.__on,o,s=Za(t);if(r){for(var i=0,a=r.length;i<a;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(o):this.__on=[o]}}function Qa(e,t,n){var r=Ua(e+""),o,s=r.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(o=0,c=a[l];o<s;++o)if((i=r[o]).type===c.type&&i.name===c.name)return c.value}return}for(a=t?Ga:qa,o=0;o<s;++o)this.each(a(r[o],t,n));return this}function lo(e,t,n){var r=oo(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Ja(e,t){return function(){return lo(this,e,t)}}function ja(e,t){return function(){return lo(this,e,t.apply(this,arguments))}}function ec(e,t){return this.each((typeof t=="function"?ja:Ja)(e,t))}function*tc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length,i;o<s;++o)(i=r[o])&&(yield i)}var uo=[null];function ue(e,t){this._groups=e,this._parents=t}function kt(){return new ue([[document.documentElement]],uo)}function nc(){return this}ue.prototype=kt.prototype={constructor:ue,select:As,selectAll:Ps,selectChild:zs,selectChildren:Ls,filter:Vs,data:Zs,enter:Fs,exit:qs,join:Gs,merge:Qs,selection:nc,order:Js,sort:js,call:ta,nodes:na,node:ra,size:oa,empty:ia,each:sa,attr:ha,style:ya,property:va,classed:Na,text:$a,html:Ra,raise:Ia,lower:Ha,append:Oa,insert:La,remove:Fa,clone:Ka,datum:Wa,on:Qa,dispatch:ec,[Symbol.iterator]:tc};function ge(e){return typeof e=="string"?new ue([[document.querySelector(e)]],[document.documentElement]):new ue([[e]],uo)}function rc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function we(e,t){if(e=rc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const oc={passive:!1},St={capture:!0,passive:!1};function gn(e){e.stopImmediatePropagation()}function rt(e){e.preventDefault(),e.stopImmediatePropagation()}function fo(e){var t=e.document.documentElement,n=ge(e).on("dragstart.drag",rt,St);"onselectstart"in t?n.on("selectstart.drag",rt,St):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ho(e,t){var n=e.document.documentElement,r=ge(e).on("dragstart.drag",null);t&&(r.on("click.drag",rt,St),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Rt=e=>()=>e;function En(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:i,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}En.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ic(e){return!e.ctrlKey&&!e.button}function sc(){return this.parentNode}function ac(e,t){return t??{x:e.x,y:e.y}}function cc(){return navigator.maxTouchPoints||"ontouchstart"in this}function lc(){var e=ic,t=sc,n=ac,r=cc,o={},s=rn("start","drag","end"),i=0,a,l,u,c,f=0;function d(x){x.on("mousedown.drag",g).filter(r).on("touchstart.drag",v).on("touchmove.drag",m,oc).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(x,A){if(!(c||!e.call(this,x,A))){var z=C(this,t.call(this,x,A),x,A,"mouse");z&&(ge(x.view).on("mousemove.drag",y,St).on("mouseup.drag",p,St),fo(x.view),gn(x),u=!1,a=x.clientX,l=x.clientY,z("start",x))}}function y(x){if(rt(x),!u){var A=x.clientX-a,z=x.clientY-l;u=A*A+z*z>f}o.mouse("drag",x)}function p(x){ge(x.view).on("mousemove.drag mouseup.drag",null),ho(x.view,u),rt(x),o.mouse("end",x)}function v(x,A){if(e.call(this,x,A)){var z=x.changedTouches,I=t.call(this,x,A),T=z.length,R,L;for(R=0;R<T;++R)(L=C(this,I,x,A,z[R].identifier,z[R]))&&(gn(x),L("start",x,z[R]))}}function m(x){var A=x.changedTouches,z=A.length,I,T;for(I=0;I<z;++I)(T=o[A[I].identifier])&&(rt(x),T("drag",x,A[I]))}function S(x){var A=x.changedTouches,z=A.length,I,T;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),I=0;I<z;++I)(T=o[A[I].identifier])&&(gn(x),T("end",x,A[I]))}function C(x,A,z,I,T,R){var L=s.copy(),H=we(R||z,A),B,E,h;if((h=n.call(x,new En("beforestart",{sourceEvent:z,target:d,identifier:T,active:i,x:H[0],y:H[1],dx:0,dy:0,dispatch:L}),I))!=null)return B=h.x-H[0]||0,E=h.y-H[1]||0,function _(b,$,P){var w=H,M;switch(b){case"start":o[T]=_,M=i++;break;case"end":delete o[T],--i;case"drag":H=we(P||$,A),M=i;break}L.call(b,x,new En(b,{sourceEvent:$,subject:h,target:d,identifier:T,active:M,x:H[0]+B,y:H[1]+E,dx:H[0]-w[0],dy:H[1]-w[1],dispatch:L}),I)}}return d.filter=function(x){return arguments.length?(e=typeof x=="function"?x:Rt(!!x),d):e},d.container=function(x){return arguments.length?(t=typeof x=="function"?x:Rt(x),d):t},d.subject=function(x){return arguments.length?(n=typeof x=="function"?x:Rt(x),d):n},d.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:Rt(!!x),d):r},d.on=function(){var x=s.on.apply(s,arguments);return x===s?d:x},d.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,d):Math.sqrt(f)},d}function Vn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function go(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Tt(){}var _t=.7,Zt=1/_t,ot="\\s*([+-]?\\d+)\\s*",Et="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",be="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uc=/^#([0-9a-f]{3,8})$/,fc=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),dc=new RegExp(`^rgb\\(${be},${be},${be}\\)$`),hc=new RegExp(`^rgba\\(${ot},${ot},${ot},${Et}\\)$`),gc=new RegExp(`^rgba\\(${be},${be},${be},${Et}\\)$`),pc=new RegExp(`^hsl\\(${Et},${be},${be}\\)$`),mc=new RegExp(`^hsla\\(${Et},${be},${be},${Et}\\)$`),lr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vn(Tt,Nt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ur,formatHex:ur,formatHex8:yc,formatHsl:xc,formatRgb:fr,toString:fr});function ur(){return this.rgb().formatHex()}function yc(){return this.rgb().formatHex8()}function xc(){return po(this).formatHsl()}function fr(){return this.rgb().formatRgb()}function Nt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=uc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?dr(t):n===3?new se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Dt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Dt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fc.exec(e))?new se(t[1],t[2],t[3],1):(t=dc.exec(e))?new se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hc.exec(e))?Dt(t[1],t[2],t[3],t[4]):(t=gc.exec(e))?Dt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pc.exec(e))?pr(t[1],t[2]/100,t[3]/100,1):(t=mc.exec(e))?pr(t[1],t[2]/100,t[3]/100,t[4]):lr.hasOwnProperty(e)?dr(lr[e]):e==="transparent"?new se(NaN,NaN,NaN,0):null}function dr(e){return new se(e>>16&255,e>>8&255,e&255,1)}function Dt(e,t,n,r){return r<=0&&(e=t=n=NaN),new se(e,t,n,r)}function wc(e){return e instanceof Tt||(e=Nt(e)),e?(e=e.rgb(),new se(e.r,e.g,e.b,e.opacity)):new se}function Nn(e,t,n,r){return arguments.length===1?wc(e):new se(e,t,n,r??1)}function se(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Vn(se,Nn,go(Tt,{brighter(e){return e=e==null?Zt:Math.pow(Zt,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_t:Math.pow(_t,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new se(We(this.r),We(this.g),We(this.b),Ut(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hr,formatHex:hr,formatHex8:bc,formatRgb:gr,toString:gr}));function hr(){return`#${Xe(this.r)}${Xe(this.g)}${Xe(this.b)}`}function bc(){return`#${Xe(this.r)}${Xe(this.g)}${Xe(this.b)}${Xe((isNaN(this.opacity)?1:this.opacity)*255)}`}function gr(){const e=Ut(this.opacity);return`${e===1?"rgb(":"rgba("}${We(this.r)}, ${We(this.g)}, ${We(this.b)}${e===1?")":`, ${e})`}`}function Ut(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function We(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xe(e){return e=We(e),(e<16?"0":"")+e.toString(16)}function pr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pe(e,t,n,r)}function po(e){if(e instanceof pe)return new pe(e.h,e.s,e.l,e.opacity);if(e instanceof Tt||(e=Nt(e)),!e)return new pe;if(e instanceof pe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,a=s-o,l=(s+o)/2;return a?(t===s?i=(n-r)/a+(n<r)*6:n===s?i=(r-t)/a+2:i=(t-n)/a+4,a/=l<.5?s+o:2-s-o,i*=60):a=l>0&&l<1?0:i,new pe(i,a,l,e.opacity)}function vc(e,t,n,r){return arguments.length===1?po(e):new pe(e,t,n,r??1)}function pe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Vn(pe,vc,go(Tt,{brighter(e){return e=e==null?Zt:Math.pow(Zt,e),new pe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_t:Math.pow(_t,e),new pe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new se(pn(e>=240?e-240:e+120,o,r),pn(e,o,r),pn(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new pe(mr(this.h),It(this.s),It(this.l),Ut(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ut(this.opacity);return`${e===1?"hsl(":"hsla("}${mr(this.h)}, ${It(this.s)*100}%, ${It(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mr(e){return e=(e||0)%360,e<0?e+360:e}function It(e){return Math.max(0,Math.min(1,e||0))}function pn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const mo=e=>()=>e;function Sc(e,t){return function(n){return e+n*t}}function _c(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ec(e){return(e=+e)==1?yo:function(t,n){return n-t?_c(t,n,e):mo(isNaN(t)?n:t)}}function yo(e,t){var n=t-e;return n?Sc(e,n):mo(isNaN(e)?t:e)}const yr=function e(t){var n=Ec(t);function r(o,s){var i=n((o=Nn(o)).r,(s=Nn(s)).r),a=n(o.g,s.g),l=n(o.b,s.b),u=yo(o.opacity,s.opacity);return function(c){return o.r=i(c),o.g=a(c),o.b=l(c),o.opacity=u(c),o+""}}return r.gamma=e,r}(1);function ke(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Mn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mn=new RegExp(Mn.source,"g");function Nc(e){return function(){return e}}function Mc(e){return function(t){return e(t)+""}}function Cc(e,t){var n=Mn.lastIndex=mn.lastIndex=0,r,o,s,i=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Mn.exec(e))&&(o=mn.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(r=r[0])===(o=o[0])?a[i]?a[i]+=o:a[++i]=o:(a[++i]=null,l.push({i,x:ke(r,o)})),n=mn.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?l[0]?Mc(l[0].x):Nc(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}var xr=180/Math.PI,Cn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xo(e,t,n,r,o,s){var i,a,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*xr,skewX:Math.atan(l)*xr,scaleX:i,scaleY:a}}var zt;function Ac(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Cn:xo(t.a,t.b,t.c,t.d,t.e,t.f)}function $c(e){return e==null||(zt||(zt=document.createElementNS("http://www.w3.org/2000/svg","g")),zt.setAttribute("transform",e),!(e=zt.transform.baseVal.consolidate()))?Cn:(e=e.matrix,xo(e.a,e.b,e.c,e.d,e.e,e.f))}function wo(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function s(u,c,f,d,g,y){if(u!==f||c!==d){var p=g.push("translate(",null,t,null,n);y.push({i:p-4,x:ke(u,f)},{i:p-2,x:ke(c,d)})}else(f||d)&&g.push("translate("+f+t+d+n)}function i(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(o(f)+"rotate(",null,r)-2,x:ke(u,c)})):c&&f.push(o(f)+"rotate("+c+r)}function a(u,c,f,d){u!==c?d.push({i:f.push(o(f)+"skewX(",null,r)-2,x:ke(u,c)}):c&&f.push(o(f)+"skewX("+c+r)}function l(u,c,f,d,g,y){if(u!==f||c!==d){var p=g.push(o(g)+"scale(",null,",",null,")");y.push({i:p-4,x:ke(u,f)},{i:p-2,x:ke(c,d)})}else(f!==1||d!==1)&&g.push(o(g)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,d),i(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(g){for(var y=-1,p=d.length,v;++y<p;)f[(v=d[y]).i]=v.x(g);return f.join("")}}}var kc=wo(Ac,"px, ","px)","deg)"),Tc=wo($c,", ",")",")"),Pc=1e-12;function wr(e){return((e=Math.exp(e))+1/e)/2}function Rc(e){return((e=Math.exp(e))-1/e)/2}function Dc(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ic=function e(t,n,r){function o(s,i){var a=s[0],l=s[1],u=s[2],c=i[0],f=i[1],d=i[2],g=c-a,y=f-l,p=g*g+y*y,v,m;if(p<Pc)m=Math.log(d/u)/t,v=function(I){return[a+I*g,l+I*y,u*Math.exp(t*I*m)]};else{var S=Math.sqrt(p),C=(d*d-u*u+r*p)/(2*u*n*S),x=(d*d-u*u-r*p)/(2*d*n*S),A=Math.log(Math.sqrt(C*C+1)-C),z=Math.log(Math.sqrt(x*x+1)-x);m=(z-A)/t,v=function(I){var T=I*m,R=wr(A),L=u/(n*S)*(R*Dc(t*T+A)-Rc(A));return[a+L*g,l+L*y,u*R/wr(t*T+A)]}}return v.duration=m*1e3*t/Math.SQRT2,v}return o.rho=function(s){var i=Math.max(.001,+s),a=i*i,l=a*a;return e(i,a,l)},o}(Math.SQRT2,2,4);var lt=0,bt=0,pt=0,bo=1e3,qt,vt,Gt=0,Ze=0,sn=0,Mt=typeof performance=="object"&&performance.now?performance:Date,vo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Fn(){return Ze||(vo(zc),Ze=Mt.now()+sn)}function zc(){Ze=0}function Qt(){this._call=this._time=this._next=null}Qt.prototype=So.prototype={constructor:Qt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Fn():+n)+(t==null?0:+t),!this._next&&vt!==this&&(vt?vt._next=this:qt=this,vt=this),this._call=e,this._time=n,An()},stop:function(){this._call&&(this._call=null,this._time=1/0,An())}};function So(e,t,n){var r=new Qt;return r.restart(e,t,n),r}function Hc(){Fn(),++lt;for(var e=qt,t;e;)(t=Ze-e._time)>=0&&e._call.call(void 0,t),e=e._next;--lt}function br(){Ze=(Gt=Mt.now())+sn,lt=bt=0;try{Hc()}finally{lt=0,Bc(),Ze=0}}function Oc(){var e=Mt.now(),t=e-Gt;t>bo&&(sn-=t,Gt=e)}function Bc(){for(var e,t=qt,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:qt=n);vt=e,An(r)}function An(e){if(!lt){bt&&(bt=clearTimeout(bt));var t=e-Ze;t>24?(e<1/0&&(bt=setTimeout(br,e-Mt.now()-sn)),pt&&(pt=clearInterval(pt))):(pt||(Gt=Mt.now(),pt=setInterval(Oc,bo)),lt=1,vo(br))}}function vr(e,t,n){var r=new Qt;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Lc=rn("start","end","cancel","interrupt"),Vc=[],_o=0,Sr=1,$n=2,Yt=3,_r=4,kn=5,Xt=6;function an(e,t,n,r,o,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Fc(e,n,{name:t,index:r,group:o,on:Lc,tween:Vc,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:_o})}function Yn(e,t){var n=me(e,t);if(n.state>_o)throw new Error("too late; already scheduled");return n}function ve(e,t){var n=me(e,t);if(n.state>Yt)throw new Error("too late; already running");return n}function me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Fc(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=So(s,0,n.time);function s(u){n.state=Sr,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var c,f,d,g;if(n.state!==Sr)return l();for(c in r)if(g=r[c],g.name===n.name){if(g.state===Yt)return vr(i);g.state===_r?(g.state=Xt,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[c]):+c<t&&(g.state=Xt,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[c])}if(vr(function(){n.state===Yt&&(n.state=_r,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=$n,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$n){for(n.state=Yt,o=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=g);o.length=f+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=kn,1),f=-1,d=o.length;++f<d;)o[f].call(e,c);n.state===kn&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Xt,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Kt(e,t){var n=e.__transition,r,o,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){s=!1;continue}o=r.state>$n&&r.state<kn,r.state=Xt,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}s&&delete e.__transition}}function Yc(e){return this.each(function(){Kt(this,e)})}function Xc(e,t){var n,r;return function(){var o=ve(this,e),s=o.tween;if(s!==n){r=n=s;for(var i=0,a=r.length;i<a;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function Kc(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var s=ve(this,e),i=s.tween;if(i!==r){o=(r=i).slice();for(var a={name:t,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===t){o[l]=a;break}l===u&&o.push(a)}s.tween=o}}function Wc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=me(this.node(),n).tween,o=0,s=r.length,i;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?Xc:Kc)(n,e,t))}function Xn(e,t,n){var r=e._id;return e.each(function(){var o=ve(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return me(o,r).value[t]}}function Eo(e,t){var n;return(typeof t=="number"?ke:t instanceof Nt?yr:(n=Nt(t))?(t=n,yr):Cc)(e,t)}function Zc(e){return function(){this.removeAttribute(e)}}function Uc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qc(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttribute(e);return i===o?null:i===r?s:s=t(r=i,n)}}function Gc(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?s:s=t(r=i,n)}}function Qc(e,t,n){var r,o,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=a+"",i===l?null:i===r&&l===o?s:(o=l,s=t(r=i,a)))}}function Jc(e,t,n){var r,o,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=a+"",i===l?null:i===r&&l===o?s:(o=l,s=t(r=i,a)))}}function jc(e,t){var n=on(e),r=n==="transform"?Tc:Eo;return this.attrTween(e,typeof t=="function"?(n.local?Jc:Qc)(n,r,Xn(this,"attr."+e,t)):t==null?(n.local?Uc:Zc)(n):(n.local?Gc:qc)(n,r,t))}function el(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function tl(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function nl(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&tl(e,s)),n}return o._value=t,o}function rl(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&el(e,s)),n}return o._value=t,o}function ol(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=on(e);return this.tween(n,(r.local?nl:rl)(r,t))}function il(e,t){return function(){Yn(this,e).delay=+t.apply(this,arguments)}}function sl(e,t){return t=+t,function(){Yn(this,e).delay=t}}function al(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?il:sl)(t,e)):me(this.node(),t).delay}function cl(e,t){return function(){ve(this,e).duration=+t.apply(this,arguments)}}function ll(e,t){return t=+t,function(){ve(this,e).duration=t}}function ul(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cl:ll)(t,e)):me(this.node(),t).duration}function fl(e,t){if(typeof t!="function")throw new Error;return function(){ve(this,e).ease=t}}function dl(e){var t=this._id;return arguments.length?this.each(fl(t,e)):me(this.node(),t).ease}function hl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ve(this,e).ease=n}}function gl(e){if(typeof e!="function")throw new Error;return this.each(hl(this._id,e))}function pl(e){typeof e!="function"&&(e=to(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=[],l,u=0;u<i;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Ne(r,this._parents,this._name,this._id)}function ml(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),i=new Array(r),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,f=i[a]=new Array(c),d,g=0;g<c;++g)(d=l[g]||u[g])&&(f[g]=d);for(;a<r;++a)i[a]=t[a];return new Ne(i,this._parents,this._name,this._id)}function yl(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function xl(e,t,n){var r,o,s=yl(t)?Yn:ve;return function(){var i=s(this,e),a=i.on;a!==r&&(o=(r=a).copy()).on(t,n),i.on=o}}function wl(e,t){var n=this._id;return arguments.length<2?me(this.node(),n).on.on(e):this.each(xl(n,e,t))}function bl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function vl(){return this.on("end.remove",bl(this._id))}function Sl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Bn(e));for(var r=this._groups,o=r.length,s=new Array(o),i=0;i<o;++i)for(var a=r[i],l=a.length,u=s[i]=new Array(l),c,f,d=0;d<l;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),u[d]=f,an(u[d],t,n,d,u,me(c,n)));return new Ne(s,this._parents,t,n)}function _l(e){var t=this._name,n=this._id;typeof e!="function"&&(e=eo(e));for(var r=this._groups,o=r.length,s=[],i=[],a=0;a<o;++a)for(var l=r[a],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var d=e.call(c,c.__data__,f,l),g,y=me(c,n),p=0,v=d.length;p<v;++p)(g=d[p])&&an(g,t,n,p,d,y);s.push(d),i.push(c)}return new Ne(s,i,t,n)}var El=kt.prototype.constructor;function Nl(){return new El(this._groups,this._parents)}function Ml(e,t){var n,r,o;return function(){var s=ct(this,e),i=(this.style.removeProperty(e),ct(this,e));return s===i?null:s===n&&i===r?o:o=t(n=s,r=i)}}function No(e){return function(){this.style.removeProperty(e)}}function Cl(e,t,n){var r,o=n+"",s;return function(){var i=ct(this,e);return i===o?null:i===r?s:s=t(r=i,n)}}function Al(e,t,n){var r,o,s;return function(){var i=ct(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),ct(this,e))),i===l?null:i===r&&l===o?s:(o=l,s=t(r=i,a))}}function $l(e,t){var n,r,o,s="style."+t,i="end."+s,a;return function(){var l=ve(this,e),u=l.on,c=l.value[s]==null?a||(a=No(t)):void 0;(u!==n||o!==c)&&(r=(n=u).copy()).on(i,o=c),l.on=r}}function kl(e,t,n){var r=(e+="")=="transform"?kc:Eo;return t==null?this.styleTween(e,Ml(e,r)).on("end.style."+e,No(e)):typeof t=="function"?this.styleTween(e,Al(e,r,Xn(this,"style."+e,t))).each($l(this._id,e)):this.styleTween(e,Cl(e,r,t),n).on("end.style."+e,null)}function Tl(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Pl(e,t,n){var r,o;function s(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&Tl(e,i,n)),r}return s._value=t,s}function Rl(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Pl(e,t,n??""))}function Dl(e){return function(){this.textContent=e}}function Il(e){return function(){var t=e(this);this.textContent=t??""}}function zl(e){return this.tween("text",typeof e=="function"?Il(Xn(this,"text",e)):Dl(e==null?"":e+""))}function Hl(e){return function(t){this.textContent=e.call(this,t)}}function Ol(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Hl(o)),t}return r._value=e,r}function Bl(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ol(e))}function Ll(){for(var e=this._name,t=this._id,n=Mo(),r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],a=i.length,l,u=0;u<a;++u)if(l=i[u]){var c=me(l,t);an(l,e,n,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ne(r,this._parents,e,n)}function Vl(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,i){var a={value:i},l={value:function(){--o===0&&s()}};n.each(function(){var u=ve(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),o===0&&s()})}var Fl=0;function Ne(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Mo(){return++Fl}var _e=kt.prototype;Ne.prototype={constructor:Ne,select:Sl,selectAll:_l,selectChild:_e.selectChild,selectChildren:_e.selectChildren,filter:pl,merge:ml,selection:Nl,transition:Ll,call:_e.call,nodes:_e.nodes,node:_e.node,size:_e.size,empty:_e.empty,each:_e.each,on:wl,attr:jc,attrTween:ol,style:kl,styleTween:Rl,text:zl,textTween:Bl,remove:vl,tween:Wc,delay:al,duration:ul,ease:dl,easeVarying:gl,end:Vl,[Symbol.iterator]:_e[Symbol.iterator]};function Yl(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Xl={time:null,delay:0,duration:250,ease:Yl};function Kl(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Wl(e){var t,n;e instanceof Ne?(t=e._id,e=e._name):(t=Mo(),(n=Xl).time=Fn(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],a=i.length,l,u=0;u<a;++u)(l=i[u])&&an(l,e,t,u,i,n||Kl(l,t));return new Ne(r,this._parents,e,t)}kt.prototype.interrupt=Yc;kt.prototype.transition=Wl;const Ht=e=>()=>e;function Zl(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ee(e,t,n){this.k=e,this.x=t,this.y=n}Ee.prototype={constructor:Ee,scale:function(e){return e===1?this:new Ee(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ee(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Re=new Ee(1,0,0);Ee.prototype;function yn(e){e.stopImmediatePropagation()}function mt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ul(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ql(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Er(){return this.__zoom||Re}function Gl(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ql(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jl(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function jl(){var e=Ul,t=ql,n=Jl,r=Gl,o=Ql,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ic,u=rn("start","zoom","end"),c,f,d,g=500,y=150,p=0,v=10;function m(h){h.property("__zoom",Er).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",L).filter(o).on("touchstart.zoom",H).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(h,_,b,$){var P=h.selection?h.selection():h;P.property("__zoom",Er),h!==P?A(h,_,b,$):P.interrupt().each(function(){z(this,arguments).event($).start().zoom(null,typeof _=="function"?_.apply(this,arguments):_).end()})},m.scaleBy=function(h,_,b,$){m.scaleTo(h,function(){var P=this.__zoom.k,w=typeof _=="function"?_.apply(this,arguments):_;return P*w},b,$)},m.scaleTo=function(h,_,b,$){m.transform(h,function(){var P=t.apply(this,arguments),w=this.__zoom,M=b==null?x(P):typeof b=="function"?b.apply(this,arguments):b,k=w.invert(M),O=typeof _=="function"?_.apply(this,arguments):_;return n(C(S(w,O),M,k),P,i)},b,$)},m.translateBy=function(h,_,b,$){m.transform(h,function(){return n(this.__zoom.translate(typeof _=="function"?_.apply(this,arguments):_,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),i)},null,$)},m.translateTo=function(h,_,b,$,P){m.transform(h,function(){var w=t.apply(this,arguments),M=this.__zoom,k=$==null?x(w):typeof $=="function"?$.apply(this,arguments):$;return n(Re.translate(k[0],k[1]).scale(M.k).translate(typeof _=="function"?-_.apply(this,arguments):-_,typeof b=="function"?-b.apply(this,arguments):-b),w,i)},$,P)};function S(h,_){return _=Math.max(s[0],Math.min(s[1],_)),_===h.k?h:new Ee(_,h.x,h.y)}function C(h,_,b){var $=_[0]-b[0]*h.k,P=_[1]-b[1]*h.k;return $===h.x&&P===h.y?h:new Ee(h.k,$,P)}function x(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function A(h,_,b,$){h.on("start.zoom",function(){z(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event($).end()}).tween("zoom",function(){var P=this,w=arguments,M=z(P,w).event($),k=t.apply(P,w),O=b==null?x(k):typeof b=="function"?b.apply(P,w):b,V=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),F=P.__zoom,K=typeof _=="function"?_.apply(P,w):_,Z=l(F.invert(O).concat(V/F.k),K.invert(O).concat(V/K.k));return function(U){if(U===1)U=K;else{var q=Z(U),Q=V/q[2];U=new Ee(Q,O[0]-q[0]*Q,O[1]-q[1]*Q)}M.zoom(null,U)}})}function z(h,_,b){return!b&&h.__zooming||new I(h,_)}function I(h,_){this.that=h,this.args=_,this.active=0,this.sourceEvent=null,this.extent=t.apply(h,_),this.taps=0}I.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,_){return this.mouse&&h!=="mouse"&&(this.mouse[1]=_.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=_.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=_.invert(this.touch1[0])),this.that.__zoom=_,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var _=ge(this.that).datum();u.call(h,this.that,new Zl(h,{sourceEvent:this.sourceEvent,target:m,type:h,transform:this.that.__zoom,dispatch:u}),_)}};function T(h,..._){if(!e.apply(this,arguments))return;var b=z(this,_).event(h),$=this.__zoom,P=Math.max(s[0],Math.min(s[1],$.k*Math.pow(2,r.apply(this,arguments)))),w=we(h);if(b.wheel)(b.mouse[0][0]!==w[0]||b.mouse[0][1]!==w[1])&&(b.mouse[1]=$.invert(b.mouse[0]=w)),clearTimeout(b.wheel);else{if($.k===P)return;b.mouse=[w,$.invert(w)],Kt(this),b.start()}mt(h),b.wheel=setTimeout(M,y),b.zoom("mouse",n(C(S($,P),b.mouse[0],b.mouse[1]),b.extent,i));function M(){b.wheel=null,b.end()}}function R(h,..._){if(d||!e.apply(this,arguments))return;var b=h.currentTarget,$=z(this,_,!0).event(h),P=ge(h.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",V,!0),w=we(h,b),M=h.clientX,k=h.clientY;fo(h.view),yn(h),$.mouse=[w,this.__zoom.invert(w)],Kt(this),$.start();function O(F){if(mt(F),!$.moved){var K=F.clientX-M,Z=F.clientY-k;$.moved=K*K+Z*Z>p}$.event(F).zoom("mouse",n(C($.that.__zoom,$.mouse[0]=we(F,b),$.mouse[1]),$.extent,i))}function V(F){P.on("mousemove.zoom mouseup.zoom",null),ho(F.view,$.moved),mt(F),$.event(F).end()}}function L(h,..._){if(e.apply(this,arguments)){var b=this.__zoom,$=we(h.changedTouches?h.changedTouches[0]:h,this),P=b.invert($),w=b.k*(h.shiftKey?.5:2),M=n(C(S(b,w),$,P),t.apply(this,_),i);mt(h),a>0?ge(this).transition().duration(a).call(A,M,$,h):ge(this).call(m.transform,M,$,h)}}function H(h,..._){if(e.apply(this,arguments)){var b=h.touches,$=b.length,P=z(this,_,h.changedTouches.length===$).event(h),w,M,k,O;for(yn(h),M=0;M<$;++M)k=b[M],O=we(k,this),O=[O,this.__zoom.invert(O),k.identifier],P.touch0?!P.touch1&&P.touch0[2]!==O[2]&&(P.touch1=O,P.taps=0):(P.touch0=O,w=!0,P.taps=1+!!c);c&&(c=clearTimeout(c)),w&&(P.taps<2&&(f=O[0],c=setTimeout(function(){c=null},g)),Kt(this),P.start())}}function B(h,..._){if(this.__zooming){var b=z(this,_).event(h),$=h.changedTouches,P=$.length,w,M,k,O;for(mt(h),w=0;w<P;++w)M=$[w],k=we(M,this),b.touch0&&b.touch0[2]===M.identifier?b.touch0[0]=k:b.touch1&&b.touch1[2]===M.identifier&&(b.touch1[0]=k);if(M=b.that.__zoom,b.touch1){var V=b.touch0[0],F=b.touch0[1],K=b.touch1[0],Z=b.touch1[1],U=(U=K[0]-V[0])*U+(U=K[1]-V[1])*U,q=(q=Z[0]-F[0])*q+(q=Z[1]-F[1])*q;M=S(M,Math.sqrt(U/q)),k=[(V[0]+K[0])/2,(V[1]+K[1])/2],O=[(F[0]+Z[0])/2,(F[1]+Z[1])/2]}else if(b.touch0)k=b.touch0[0],O=b.touch0[1];else return;b.zoom("touch",n(C(M,k,O),b.extent,i))}}function E(h,..._){if(this.__zooming){var b=z(this,_).event(h),$=h.changedTouches,P=$.length,w,M;for(yn(h),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),w=0;w<P;++w)M=$[w],b.touch0&&b.touch0[2]===M.identifier?delete b.touch0:b.touch1&&b.touch1[2]===M.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(M=we(M,this),Math.hypot(f[0]-M[0],f[1]-M[1])<v)){var k=ge(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return m.wheelDelta=function(h){return arguments.length?(r=typeof h=="function"?h:Ht(+h),m):r},m.filter=function(h){return arguments.length?(e=typeof h=="function"?h:Ht(!!h),m):e},m.touchable=function(h){return arguments.length?(o=typeof h=="function"?h:Ht(!!h),m):o},m.extent=function(h){return arguments.length?(t=typeof h=="function"?h:Ht([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),m):t},m.scaleExtent=function(h){return arguments.length?(s[0]=+h[0],s[1]=+h[1],m):[s[0],s[1]]},m.translateExtent=function(h){return arguments.length?(i[0][0]=+h[0][0],i[1][0]=+h[1][0],i[0][1]=+h[0][1],i[1][1]=+h[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(h){return arguments.length?(n=h,m):n},m.duration=function(h){return arguments.length?(a=+h,m):a},m.interpolate=function(h){return arguments.length?(l=h,m):l},m.on=function(){var h=u.on.apply(u,arguments);return h===u?m:h},m.clickDistance=function(h){return arguments.length?(p=(h=+h)*h,m):Math.sqrt(p)},m.tapDistance=function(h){return arguments.length?(v=+h,m):v},m}const cn=N.createContext(null),eu=cn.Provider,Me={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Co=Me.error001();function j(e,t){const n=N.useContext(cn);if(n===null)throw new Error(Co);return Jr(n,e,t)}const ne=()=>{const e=N.useContext(cn);if(e===null)throw new Error(Co);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},tu=e=>e.userSelectionActive?"none":"all";function nu({position:e,children:t,className:n,style:r,...o}){const s=j(tu),i=`${e}`.split("-");return D.createElement("div",{className:de(["react-flow__panel",n,...i]),style:{...r,pointerEvents:s},...o},t)}function ru({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:D.createElement(nu,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},D.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const ou=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c})=>{const f=N.useRef(null),[d,g]=N.useState({x:0,y:0,width:0,height:0}),y=de(["react-flow__edge-textwrapper",u]);return N.useEffect(()=>{if(f.current){const p=f.current.getBBox();g({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),typeof n>"u"||!n?null:D.createElement("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:y,visibility:d.width?"visible":"hidden",...c},o&&D.createElement("rect",{width:d.width+2*i[0],x:-i[0],y:-i[1],height:d.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),D.createElement("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:f,style:r},n),l)};var iu=N.memo(ou);const Kn=e=>({width:e.offsetWidth,height:e.offsetHeight}),ut=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Wn=(e={x:0,y:0},t)=>({x:ut(e.x,t[0][0],t[1][0]),y:ut(e.y,t[0][1],t[1][1])}),Nr=(e,t,n)=>e<t?ut(Math.abs(e-t),1,50)/50:e>n?-ut(Math.abs(e-n),1,50)/50:0,Ao=(e,t)=>{const n=Nr(e.x,35,t.width-35)*20,r=Nr(e.y,35,t.height-35)*20;return[n,r]},$o=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},ko=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ct=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),To=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Mr=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Wf=(e,t)=>To(ko(Ct(e),Ct(t))),Tn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},su=e=>fe(e.width)&&fe(e.height)&&fe(e.x)&&fe(e.y),fe=e=>!isNaN(e)&&isFinite(e),te=Symbol.for("internals"),Po=["Enter"," ","Escape"],au=(e,t)=>{},cu=e=>"nativeEvent"in e;function Pn(e){var o,s;const t=cu(e)?e.nativeEvent:e,n=((s=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Ro=e=>"clientX"in e,De=(e,t)=>{var s,i;const n=Ro(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Jt=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Pt=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:d,interactionWidth:g=20})=>D.createElement(D.Fragment,null,D.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:d}),g&&D.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),o&&fe(n)&&fe(r)?D.createElement(iu,{x:n,y:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u}):null);Pt.displayName="BaseEdge";function yt(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(s=>s.id===e);o&&n(r,{...o})}}function Do({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,i=Math.abs(r-t)/2,a=r<t?r+i:r-i;return[s,a,o,i]}function Io({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:a}){const l=e*.125+o*.375+i*.375+n*.125,u=t*.125+s*.375+a*.375+r*.125,c=Math.abs(l-e),f=Math.abs(u-t);return[l,u,c,f]}var Ue;(function(e){e.Strict="strict",e.Loose="loose"})(Ue||(Ue={}));var Ke;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ke||(Ke={}));var At;(function(e){e.Partial="partial",e.Full="full"})(At||(At={}));var Pe;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Pe||(Pe={}));var jt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(jt||(jt={}));var Y;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Y||(Y={}));function Cr({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===Y.Left||e===Y.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function zo({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:s=Y.Top}){const[i,a]=Cr({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,u]=Cr({pos:s,x1:r,y1:o,x2:e,y2:t}),[c,f,d,g]=Io({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${e},${t} C${i},${a} ${l},${u} ${r},${o}`,c,f,d,g]}const Zn=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=Y.Bottom,targetPosition:s=Y.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:g,markerStart:y,interactionWidth:p})=>{const[v,m,S]=zo({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s});return D.createElement(Pt,{path:v,labelX:m,labelY:S,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:g,markerStart:y,interactionWidth:p})});Zn.displayName="SimpleBezierEdge";const Ar={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},lu=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},$r=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function uu({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:r=Y.Top,center:o,offset:s}){const i=Ar[t],a=Ar[r],l={x:e.x+i.x*s,y:e.y+i.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},c=lu({source:l,sourcePosition:t,target:u}),f=c.x!==0?"x":"y",d=c[f];let g=[],y,p;const v={x:0,y:0},m={x:0,y:0},[S,C,x,A]=Do({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*a[f]===-1){y=o.x||S,p=o.y||C;const I=[{x:y,y:l.y},{x:y,y:u.y}],T=[{x:l.x,y:p},{x:u.x,y:p}];i[f]===d?g=f==="x"?I:T:g=f==="x"?T:I}else{const I=[{x:l.x,y:u.y}],T=[{x:u.x,y:l.y}];if(f==="x"?g=i.x===d?T:I:g=i.y===d?I:T,t===r){const E=Math.abs(e[f]-n[f]);if(E<=s){const h=Math.min(s-1,s-E);i[f]===d?v[f]=(l[f]>e[f]?-1:1)*h:m[f]=(u[f]>n[f]?-1:1)*h}}if(t!==r){const E=f==="x"?"y":"x",h=i[f]===a[E],_=l[E]>u[E],b=l[E]<u[E];(i[f]===1&&(!h&&_||h&&b)||i[f]!==1&&(!h&&b||h&&_))&&(g=f==="x"?I:T)}const R={x:l.x+v.x,y:l.y+v.y},L={x:u.x+m.x,y:u.y+m.y},H=Math.max(Math.abs(R.x-g[0].x),Math.abs(L.x-g[0].x)),B=Math.max(Math.abs(R.y-g[0].y),Math.abs(L.y-g[0].y));H>=B?(y=(R.x+L.x)/2,p=g[0].y):(y=g[0].x,p=(R.y+L.y)/2)}return[[e,{x:l.x+v.x,y:l.y+v.y},...g,{x:u.x+m.x,y:u.y+m.y},n],y,p,x,A]}function fu(e,t,n,r){const o=Math.min($r(e,t)/2,$r(t,n)/2,r),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+o*u},${i}Q ${s},${i} ${s},${i+o*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${i+o*l}Q ${s},${i} ${s+o*a},${i}`}function Rn({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:s=Y.Top,borderRadius:i=5,centerX:a,centerY:l,offset:u=20}){const[c,f,d,g,y]=uu({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:a,y:l},offset:u});return[c.reduce((v,m,S)=>{let C="";return S>0&&S<c.length-1?C=fu(c[S-1],m,c[S+1],i):C=`${S===0?"M":"L"}${m.x} ${m.y}`,v+=C,v},""),f,d,g,y]}const ln=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:f=Y.Bottom,targetPosition:d=Y.Top,markerEnd:g,markerStart:y,pathOptions:p,interactionWidth:v})=>{const[m,S,C]=Rn({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:d,borderRadius:p==null?void 0:p.borderRadius,offset:p==null?void 0:p.offset});return D.createElement(Pt,{path:m,labelX:S,labelY:C,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:g,markerStart:y,interactionWidth:v})});ln.displayName="SmoothStepEdge";const Un=N.memo(e=>{var t;return D.createElement(ln,{...e,pathOptions:N.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Un.displayName="StepEdge";function du({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,i,a]=Do({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,i,a]}const qn=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:d,interactionWidth:g})=>{const[y,p,v]=du({sourceX:e,sourceY:t,targetX:n,targetY:r});return D.createElement(Pt,{path:y,labelX:p,labelY:v,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:d,interactionWidth:g})});qn.displayName="StraightEdge";function Ot(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function kr({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case Y.Left:return[t-Ot(t-r,s),n];case Y.Right:return[t+Ot(r-t,s),n];case Y.Top:return[t,n-Ot(n-o,s)];case Y.Bottom:return[t,n+Ot(o-n,s)]}}function Ho({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:o,targetPosition:s=Y.Top,curvature:i=.25}){const[a,l]=kr({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[u,c]=kr({pos:s,x1:r,y1:o,x2:e,y2:t,c:i}),[f,d,g,y]=Io({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${l} ${u},${c} ${r},${o}`,f,d,g,y]}const en=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=Y.Bottom,targetPosition:s=Y.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:g,markerStart:y,pathOptions:p,interactionWidth:v})=>{const[m,S,C]=Ho({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s,curvature:p==null?void 0:p.curvature});return D.createElement(Pt,{path:m,labelX:S,labelY:C,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:g,markerStart:y,interactionWidth:v})});en.displayName="BezierEdge";const Gn=N.createContext(null),hu=Gn.Provider;Gn.Consumer;const gu=()=>N.useContext(Gn),pu=e=>"id"in e&&"source"in e&&"target"in e,mu=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Dn=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,yu=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),xu=(e,t)=>{if(!e.source||!e.target)return t;let n;return pu(e)?n={...e}:n={...e,id:mu(e)},yu(n,t)?t:t.concat(n)},In=({x:e,y:t},[n,r,o],s,[i,a])=>{const l={x:(e-n)/o,y:(t-r)/o};return s?{x:i*Math.round(l.x/i),y:a*Math.round(l.y/a)}:l},Oo=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),it=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},Qn=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const{x:s,y:i}=it(o,t).positionAbsolute;return ko(r,Ct({x:s,y:i,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return To(n)},Bo=(e,t,[n,r,o]=[0,0,1],s=!1,i=!1,a=[0,0])=>{const l={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},u=[];return e.forEach(c=>{const{width:f,height:d,selectable:g=!0,hidden:y=!1}=c;if(i&&!g||y)return!1;const{positionAbsolute:p}=it(c,a),v={x:p.x,y:p.y,width:f||0,height:d||0},m=Tn(l,v),S=typeof f>"u"||typeof d>"u"||f===null||d===null,C=s&&m>0,x=(f||0)*(d||0);(S||C||m>=x||c.dragging)&&u.push(c)}),u},Lo=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Vo=(e,t,n,r,o,s=.1)=>{const i=t/(e.width*(1+s)),a=n/(e.height*(1+s)),l=Math.min(i,a),u=ut(l,r,o),c=e.x+e.width/2,f=e.y+e.height/2,d=t/2-c*u,g=n/2-f*u;return{x:d,y:g,zoom:u}},Ye=(e,t=0)=>e.transition().duration(t);function Tr(e,t,n,r){return(t[n]||[]).reduce((o,s)=>{var i,a;return`${e.id}-${s.id}-${n}`!==r&&o.push({id:s.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),o},[])}function wu(e,t,n,r,o,s){const{x:i,y:a}=De(e),u=t.elementsFromPoint(i,a).find(y=>y.classList.contains("react-flow__handle"));if(u){const y=u.getAttribute("data-nodeid");if(y){const p=Jn(void 0,u),v=u.getAttribute("data-handleid"),m=s({nodeId:y,id:v,type:p});if(m){const S=o.find(C=>C.nodeId===y&&C.type===p&&C.id===v);return{handle:{id:v,type:p,nodeId:y,x:(S==null?void 0:S.x)||n.x,y:(S==null?void 0:S.y)||n.y},validHandleResult:m}}}}let c=[],f=1/0;if(o.forEach(y=>{const p=Math.sqrt((y.x-n.x)**2+(y.y-n.y)**2);if(p<=r){const v=s(y);p<=f&&(p<f?c=[{handle:y,validHandleResult:v}]:p===f&&c.push({handle:y,validHandleResult:v}),f=p)}}),!c.length)return{handle:null,validHandleResult:Fo()};if(c.length===1)return c[0];const d=c.some(({validHandleResult:y})=>y.isValid),g=c.some(({handle:y})=>y.type==="target");return c.find(({handle:y,validHandleResult:p})=>g?y.type==="target":d?p.isValid:!0)||c[0]}const bu={source:null,target:null,sourceHandle:null,targetHandle:null},Fo=()=>({handleDomNode:null,isValid:!1,connection:bu,endHandle:null});function Yo(e,t,n,r,o,s,i){const a=o==="target",l=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Fo(),handleDomNode:l};if(l){const c=Jn(void 0,l),f=l.getAttribute("data-nodeid"),d=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),y=l.classList.contains("connectableend"),p={source:a?f:n,sourceHandle:a?d:r,target:a?n:f,targetHandle:a?r:d};u.connection=p,g&&y&&(t===Ue.Strict?a&&c==="source"||!a&&c==="target":f!==n||d!==r)&&(u.endHandle={nodeId:f,handleId:d,type:c},u.isValid=s(p))}return u}function vu({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((o,s)=>{if(s[te]){const{handleBounds:i}=s[te];let a=[],l=[];i&&(a=Tr(s,i,"source",`${t}-${n}-${r}`),l=Tr(s,i,"target",`${t}-${n}-${r}`)),o.push(...a,...l)}return o},[])}function Jn(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function xn(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Su(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Xo({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:s,setState:i,isValidConnection:a,edgeUpdaterType:l,onEdgeUpdateEnd:u}){const c=$o(e.target),{connectionMode:f,domNode:d,autoPanOnConnect:g,connectionRadius:y,onConnectStart:p,panBy:v,getNodes:m,cancelConnection:S}=s();let C=0,x;const{x:A,y:z}=De(e),I=c==null?void 0:c.elementFromPoint(A,z),T=Jn(l,I),R=d==null?void 0:d.getBoundingClientRect();if(!R||!T)return;let L,H=De(e,R),B=!1,E=null,h=!1,_=null;const b=vu({nodes:m(),nodeId:n,handleId:t,handleType:T}),$=()=>{if(!g)return;const[M,k]=Ao(H,R);v({x:M,y:k}),C=requestAnimationFrame($)};i({connectionPosition:H,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:t,type:T},connectionEndHandle:null}),p==null||p(e,{nodeId:n,handleId:t,handleType:T});function P(M){const{transform:k}=s();H=De(M,R);const{handle:O,validHandleResult:V}=wu(M,c,In(H,k,!1,[1,1]),y,b,F=>Yo(F,f,n,t,o?"target":"source",a,c));if(x=O,B||($(),B=!0),_=V.handleDomNode,E=V.connection,h=V.isValid,i({connectionPosition:x&&h?Oo({x:x.x,y:x.y},k):H,connectionStatus:Su(!!x,h),connectionEndHandle:V.endHandle}),!x&&!h&&!_)return xn(L);E.source!==E.target&&_&&(xn(L),L=_,_.classList.add("connecting","react-flow__handle-connecting"),_.classList.toggle("valid",h),_.classList.toggle("react-flow__handle-valid",h))}function w(M){var k,O;(x||_)&&E&&h&&(r==null||r(E)),(O=(k=s()).onConnectEnd)==null||O.call(k,M),l&&(u==null||u(M)),xn(L),S(),cancelAnimationFrame(C),B=!1,h=!1,E=null,_=null,c.removeEventListener("mousemove",P),c.removeEventListener("mouseup",w),c.removeEventListener("touchmove",P),c.removeEventListener("touchend",w)}c.addEventListener("mousemove",P),c.addEventListener("mouseup",w),c.addEventListener("touchmove",P),c.addEventListener("touchend",w)}const Pr=()=>!0,_u=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Eu=(e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:s,connectionClickStartHandle:i}=r;return{connecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},Ko=N.forwardRef(({type:e="source",position:t=Y.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:s=!0,id:i,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:f,...d},g)=>{var R,L;const y=i||null,p=e==="target",v=ne(),m=gu(),{connectOnClick:S,noPanClassName:C}=j(_u,ae),{connecting:x,clickConnecting:A}=j(Eu(m,y,e),ae);m||(L=(R=v.getState()).onError)==null||L.call(R,"010",Me.error010());const z=H=>{const{defaultEdgeOptions:B,onConnect:E,hasDefaultEdges:h}=v.getState(),_={...B,...H};if(h){const{edges:b,setEdges:$}=v.getState();$(xu(_,b))}E==null||E(_),a==null||a(_)},I=H=>{if(!m)return;const B=Ro(H);o&&(B&&H.button===0||!B)&&Xo({event:H,handleId:y,nodeId:m,onConnect:z,isTarget:p,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||Pr}),B?c==null||c(H):f==null||f(H)},T=H=>{const{onClickConnectStart:B,onClickConnectEnd:E,connectionClickStartHandle:h,connectionMode:_,isValidConnection:b}=v.getState();if(!m||!h&&!o)return;if(!h){B==null||B(H,{nodeId:m,handleId:y,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:y}});return}const $=$o(H.target),P=n||b||Pr,{connection:w,isValid:M}=Yo({nodeId:m,id:y,type:e},_,h.nodeId,h.handleId||null,h.type,P,$);M&&z(w),E==null||E(H),v.setState({connectionClickStartHandle:null})};return D.createElement("div",{"data-handleid":y,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${y}-${e}`,className:de(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,u,{source:!p,target:p,connectable:r,connectablestart:o,connectableend:s,connecting:A,connectionindicator:r&&(o&&!x||s&&x)}]),onMouseDown:I,onTouchStart:I,onClick:S?T:void 0,ref:g,...d},l)});Ko.displayName="Handle";var tn=N.memo(Ko);const Wo=({data:e,isConnectable:t,targetPosition:n=Y.Top,sourcePosition:r=Y.Bottom})=>D.createElement(D.Fragment,null,D.createElement(tn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,D.createElement(tn,{type:"source",position:r,isConnectable:t}));Wo.displayName="DefaultNode";var zn=N.memo(Wo);const Zo=({data:e,isConnectable:t,sourcePosition:n=Y.Bottom})=>D.createElement(D.Fragment,null,e==null?void 0:e.label,D.createElement(tn,{type:"source",position:n,isConnectable:t}));Zo.displayName="InputNode";var Uo=N.memo(Zo);const qo=({data:e,isConnectable:t,targetPosition:n=Y.Top})=>D.createElement(D.Fragment,null,D.createElement(tn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);qo.displayName="OutputNode";var Go=N.memo(qo);const jn=()=>null;jn.displayName="GroupNode";const Nu=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Bt=e=>e.id;function Mu(e,t){return ae(e.selectedNodes.map(Bt),t.selectedNodes.map(Bt))&&ae(e.selectedEdges.map(Bt),t.selectedEdges.map(Bt))}const Qo=N.memo(({onSelectionChange:e})=>{const t=ne(),{selectedNodes:n,selectedEdges:r}=j(Nu,Mu);return N.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChange.forEach(s=>s(o))},[n,r,e]),null});Qo.displayName="SelectionListener";const Cu=e=>!!e.onSelectionChange;function Au({onSelectionChange:e}){const t=j(Cu);return e||t?D.createElement(Qo,{onSelectionChange:e}):null}const $u=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Je(e,t){N.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function W(e,t,n){N.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const ku=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:s,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:f,edgesFocusable:d,edgesUpdatable:g,elevateNodesOnSelect:y,minZoom:p,maxZoom:v,nodeExtent:m,onNodesChange:S,onEdgesChange:C,elementsSelectable:x,connectionMode:A,snapGrid:z,snapToGrid:I,translateExtent:T,connectOnClick:R,defaultEdgeOptions:L,fitView:H,fitViewOptions:B,onNodesDelete:E,onEdgesDelete:h,onNodeDrag:_,onNodeDragStart:b,onNodeDragStop:$,onSelectionDrag:P,onSelectionDragStart:w,onSelectionDragStop:M,noPanClassName:k,nodeOrigin:O,rfId:V,autoPanOnConnect:F,autoPanOnNodeDrag:K,onError:Z,connectionRadius:U,isValidConnection:q,nodeDragThreshold:Q})=>{const{setNodes:J,setEdges:oe,setDefaultNodesAndEdges:he,setMinZoom:ye,setMaxZoom:ee,setTranslateExtent:G,setNodeExtent:ie,reset:ce}=j($u,ae),X=ne();return N.useEffect(()=>{const Ie=r==null?void 0:r.map(ze=>({...ze,...L}));return he(n,Ie),()=>{ce()}},[]),W("defaultEdgeOptions",L,X.setState),W("connectionMode",A,X.setState),W("onConnect",o,X.setState),W("onConnectStart",s,X.setState),W("onConnectEnd",i,X.setState),W("onClickConnectStart",a,X.setState),W("onClickConnectEnd",l,X.setState),W("nodesDraggable",u,X.setState),W("nodesConnectable",c,X.setState),W("nodesFocusable",f,X.setState),W("edgesFocusable",d,X.setState),W("edgesUpdatable",g,X.setState),W("elementsSelectable",x,X.setState),W("elevateNodesOnSelect",y,X.setState),W("snapToGrid",I,X.setState),W("snapGrid",z,X.setState),W("onNodesChange",S,X.setState),W("onEdgesChange",C,X.setState),W("connectOnClick",R,X.setState),W("fitViewOnInit",H,X.setState),W("fitViewOnInitOptions",B,X.setState),W("onNodesDelete",E,X.setState),W("onEdgesDelete",h,X.setState),W("onNodeDrag",_,X.setState),W("onNodeDragStart",b,X.setState),W("onNodeDragStop",$,X.setState),W("onSelectionDrag",P,X.setState),W("onSelectionDragStart",w,X.setState),W("onSelectionDragStop",M,X.setState),W("noPanClassName",k,X.setState),W("nodeOrigin",O,X.setState),W("rfId",V,X.setState),W("autoPanOnConnect",F,X.setState),W("autoPanOnNodeDrag",K,X.setState),W("onError",Z,X.setState),W("connectionRadius",U,X.setState),W("isValidConnection",q,X.setState),W("nodeDragThreshold",Q,X.setState),Je(e,J),Je(t,oe),Je(p,ye),Je(v,ee),Je(T,G),Je(m,ie),null},Rr={display:"none"},Tu={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Jo="react-flow__node-desc",jo="react-flow__edge-desc",Pu="react-flow__aria-live",Ru=e=>e.ariaLiveMessage;function Du({rfId:e}){const t=j(Ru);return D.createElement("div",{id:`${Pu}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Tu},t)}function Iu({rfId:e,disableKeyboardA11y:t}){return D.createElement(D.Fragment,null,D.createElement("div",{id:`${Jo}-${e}`,style:Rr},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),D.createElement("div",{id:`${jo}-${e}`,style:Rr},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&D.createElement(Du,{rfId:e}))}var $t=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=N.useState(!1),o=N.useRef(!1),s=N.useRef(new Set([])),[i,a]=N.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),c=u.reduce((f,d)=>f.concat(...d),[]);return[u,c]}return[[],[]]},[e]);return N.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const c=g=>{if(o.current=g.ctrlKey||g.metaKey||g.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Pn(g))return!1;const p=Ir(g.code,a);s.current.add(g[p]),Dr(i,s.current,!1)&&(g.preventDefault(),r(!0))},f=g=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Pn(g))return!1;const p=Ir(g.code,a);Dr(i,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(g[p]),g.key==="Meta"&&s.current.clear(),o.current=!1},d=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",d),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",d)}}},[e,r]),n};function Dr(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Ir(e,t){return t.includes(e)?"code":"key"}function ei(e,t,n,r){var i,a;if(!e.parentNode)return n;const o=t.get(e.parentNode),s=it(o,r);return ei(o,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((i=o[te])==null?void 0:i.z)??0)>(n.z??0)?((a=o[te])==null?void 0:a.z)??0:n.z??0},r)}function ti(e,t,n){e.forEach(r=>{var o;if(r.parentNode&&!e.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n!=null&&n[r.id]){const{x:s,y:i,z:a}=ei(r,e,{...r.position,z:((o=r[te])==null?void 0:o.z)??0},t);r.positionAbsolute={x:s,y:i},r[te].z=a,n!=null&&n[r.id]&&(r[te].isParent=!0)}})}function wn(e,t,n,r){const o=new Map,s={},i=r?1e3:0;return e.forEach(a=>{var f;const l=(fe(a.zIndex)?a.zIndex:0)+(a.selected?i:0),u=t.get(a.id),c={width:u==null?void 0:u.width,height:u==null?void 0:u.height,...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(c.parentNode=a.parentNode,s[a.parentNode]=!0),Object.defineProperty(c,te,{enumerable:!1,value:{handleBounds:(f=u==null?void 0:u[te])==null?void 0:f.handleBounds,z:l}}),o.set(a.id,c)}),ti(o,n,s),o}function ni(e,t={}){const{getNodes:n,width:r,height:o,minZoom:s,maxZoom:i,d3Zoom:a,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:f}=e(),d=t.initial&&!u&&c;if(a&&l&&(d||!t.initial)){const y=n().filter(v=>{var S;const m=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(S=t.nodes)!=null&&S.length?m&&t.nodes.some(C=>C.id===v.id):m}),p=y.every(v=>v.width&&v.height);if(y.length>0&&p){const v=Qn(y,f),{x:m,y:S,zoom:C}=Vo(v,r,o,t.minZoom??s,t.maxZoom??i,t.padding??.1),x=Re.translate(m,S).scale(C);return typeof t.duration=="number"&&t.duration>0?a.transform(Ye(l,t.duration),x):a.transform(l,x),!0}}return!1}function zu(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[te]:r[te],selected:n.selected})}),new Map(t)}function Hu(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function Lt({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:s,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:u}=n();e!=null&&e.length&&(l&&r({nodeInternals:zu(e,o)}),i==null||i(e)),t!=null&&t.length&&(u&&r({edges:Hu(t,s)}),a==null||a(t))}const je=()=>{},Ou={zoomIn:je,zoomOut:je,zoomTo:je,getZoom:()=>1,setViewport:je,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:je,fitBounds:je,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Bu=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Lu=()=>{const e=ne(),{d3Zoom:t,d3Selection:n}=j(Bu,ae);return N.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(Ye(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(Ye(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,s)=>t.scaleTo(Ye(n,s==null?void 0:s.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,s)=>{const[i,a,l]=e.getState().transform,u=Re.translate(o.x??i,o.y??a).scale(o.zoom??l);t.transform(Ye(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[o,s,i]=e.getState().transform;return{x:o,y:s,zoom:i}},fitView:o=>ni(e.getState,o),setCenter:(o,s,i)=>{const{width:a,height:l,maxZoom:u}=e.getState(),c=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=a/2-o*c,d=l/2-s*c,g=Re.translate(f,d).scale(c);t.transform(Ye(n,i==null?void 0:i.duration),g)},fitBounds:(o,s)=>{const{width:i,height:a,minZoom:l,maxZoom:u}=e.getState(),{x:c,y:f,zoom:d}=Vo(o,i,a,l,u,(s==null?void 0:s.padding)??.1),g=Re.translate(c,f).scale(d);t.transform(Ye(n,s==null?void 0:s.duration),g)},project:o=>{const{transform:s,snapToGrid:i,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),In(o,s,i,a)},screenToFlowPosition:o=>{const{transform:s,snapToGrid:i,snapGrid:a,domNode:l}=e.getState();if(!l)return o;const{x:u,y:c}=l.getBoundingClientRect(),f={x:o.x-u,y:o.y-c};return In(f,s,i,a)},flowToScreenPosition:o=>{const{transform:s,domNode:i}=e.getState();if(!i)return o;const{x:a,y:l}=i.getBoundingClientRect(),u=Oo(o,s);return{x:u.x+a,y:u.y+l}},viewportInitialized:!0}:Ou,[t,n])};function ri(){const e=Lu(),t=ne(),n=N.useCallback(()=>t.getState().getNodes().map(p=>({...p})),[]),r=N.useCallback(p=>t.getState().nodeInternals.get(p),[]),o=N.useCallback(()=>{const{edges:p=[]}=t.getState();return p.map(v=>({...v}))},[]),s=N.useCallback(p=>{const{edges:v=[]}=t.getState();return v.find(m=>m.id===p)},[]),i=N.useCallback(p=>{const{getNodes:v,setNodes:m,hasDefaultNodes:S,onNodesChange:C}=t.getState(),x=v(),A=typeof p=="function"?p(x):p;if(S)m(A);else if(C){const z=A.length===0?x.map(I=>({type:"remove",id:I.id})):A.map(I=>({item:I,type:"reset"}));C(z)}},[]),a=N.useCallback(p=>{const{edges:v=[],setEdges:m,hasDefaultEdges:S,onEdgesChange:C}=t.getState(),x=typeof p=="function"?p(v):p;if(S)m(x);else if(C){const A=x.length===0?v.map(z=>({type:"remove",id:z.id})):x.map(z=>({item:z,type:"reset"}));C(A)}},[]),l=N.useCallback(p=>{const v=Array.isArray(p)?p:[p],{getNodes:m,setNodes:S,hasDefaultNodes:C,onNodesChange:x}=t.getState();if(C){const z=[...m(),...v];S(z)}else if(x){const A=v.map(z=>({item:z,type:"add"}));x(A)}},[]),u=N.useCallback(p=>{const v=Array.isArray(p)?p:[p],{edges:m=[],setEdges:S,hasDefaultEdges:C,onEdgesChange:x}=t.getState();if(C)S([...m,...v]);else if(x){const A=v.map(z=>({item:z,type:"add"}));x(A)}},[]),c=N.useCallback(()=>{const{getNodes:p,edges:v=[],transform:m}=t.getState(),[S,C,x]=m;return{nodes:p().map(A=>({...A})),edges:v.map(A=>({...A})),viewport:{x:S,y:C,zoom:x}}},[]),f=N.useCallback(({nodes:p,edges:v})=>{const{nodeInternals:m,getNodes:S,edges:C,hasDefaultNodes:x,hasDefaultEdges:A,onNodesDelete:z,onEdgesDelete:I,onNodesChange:T,onEdgesChange:R}=t.getState(),L=(p||[]).map(_=>_.id),H=(v||[]).map(_=>_.id),B=S().reduce((_,b)=>{const $=!L.includes(b.id)&&b.parentNode&&_.find(w=>w.id===b.parentNode);return(typeof b.deletable=="boolean"?b.deletable:!0)&&(L.includes(b.id)||$)&&_.push(b),_},[]),E=C.filter(_=>typeof _.deletable=="boolean"?_.deletable:!0),h=E.filter(_=>H.includes(_.id));if(B||h){const _=Lo(B,E),b=[...h,..._],$=b.reduce((P,w)=>(P.includes(w.id)||P.push(w.id),P),[]);if((A||x)&&(A&&t.setState({edges:C.filter(P=>!$.includes(P.id))}),x&&(B.forEach(P=>{m.delete(P.id)}),t.setState({nodeInternals:new Map(m)}))),$.length>0&&(I==null||I(b),R&&R($.map(P=>({id:P,type:"remove"})))),B.length>0&&(z==null||z(B),T)){const P=B.map(w=>({id:w.id,type:"remove"}));T(P)}}},[]),d=N.useCallback(p=>{const v=su(p),m=v?null:t.getState().nodeInternals.get(p.id);return!v&&!m?[null,null,v]:[v?p:Mr(m),m,v]},[]),g=N.useCallback((p,v=!0,m)=>{const[S,C,x]=d(p);return S?(m||t.getState().getNodes()).filter(A=>{if(!x&&(A.id===C.id||!A.positionAbsolute))return!1;const z=Mr(A),I=Tn(z,S);return v&&I>0||I>=S.width*S.height}):[]},[]),y=N.useCallback((p,v,m=!0)=>{const[S]=d(p);if(!S)return!1;const C=Tn(S,v);return m&&C>0||C>=S.width*S.height},[]);return N.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:s,setNodes:i,setEdges:a,addNodes:l,addEdges:u,toObject:c,deleteElements:f,getIntersectingNodes:g,isNodeIntersecting:y}),[e,n,r,o,s,i,a,l,u,c,f,g,y])}const Vu={actInsideInputWithModifier:!1};var Fu=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ne(),{deleteElements:r}=ri(),o=$t(e,Vu),s=$t(t);N.useEffect(()=>{if(o){const{edges:i,getNodes:a}=n.getState(),l=a().filter(c=>c.selected),u=i.filter(c=>c.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[o]),N.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function Yu(e){const t=ne();N.useEffect(()=>{let n;const r=()=>{var s,i;if(!e.current)return;const o=Kn(e.current);(o.height===0||o.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Me.error004())),t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const er={position:"absolute",width:"100%",height:"100%",top:0,left:0},Xu=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Vt=e=>({x:e.x,y:e.y,zoom:e.k}),et=(e,t)=>e.target.closest(`.${t}`),zr=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Hr=e=>{const t=e.ctrlKey&&Jt()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Ku=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Wu=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Ke.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:f=!0,defaultViewport:d,translateExtent:g,minZoom:y,maxZoom:p,zoomActivationKeyCode:v,preventScrolling:m=!0,children:S,noWheelClassName:C,noPanClassName:x})=>{const A=N.useRef(),z=ne(),I=N.useRef(!1),T=N.useRef(!1),R=N.useRef(null),L=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:H,d3Selection:B,d3ZoomHandler:E,userSelectionActive:h}=j(Ku,ae),_=$t(v),b=N.useRef(0),$=N.useRef(!1),P=N.useRef();return Yu(R),N.useEffect(()=>{if(R.current){const w=R.current.getBoundingClientRect(),M=jl().scaleExtent([y,p]).translateExtent(g),k=ge(R.current).call(M),O=Re.translate(d.x,d.y).scale(ut(d.zoom,y,p)),V=[[0,0],[w.width,w.height]],F=M.constrain()(O,V,g);M.transform(k,F),M.wheelDelta(Hr),z.setState({d3Zoom:M,d3Selection:k,d3ZoomHandler:k.on("wheel.zoom"),transform:[F.x,F.y,F.k],domNode:R.current.closest(".react-flow")})}},[]),N.useEffect(()=>{B&&H&&(i&&!_&&!h?B.on("wheel.zoom",w=>{if(et(w,C))return!1;w.preventDefault(),w.stopImmediatePropagation();const M=B.property("__zoom").k||1,k=Jt();if(w.ctrlKey&&s&&k){const Q=we(w),J=Hr(w),oe=M*Math.pow(2,J);H.scaleTo(B,oe,Q,w);return}const O=w.deltaMode===1?20:1;let V=l===Ke.Vertical?0:w.deltaX*O,F=l===Ke.Horizontal?0:w.deltaY*O;!k&&w.shiftKey&&l!==Ke.Vertical&&(V=w.deltaY*O,F=0),H.translateBy(B,-(V/M)*a,-(F/M)*a,{internal:!0});const K=Vt(B.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:U,onViewportChangeEnd:q}=z.getState();clearTimeout(P.current),$.current||($.current=!0,t==null||t(w,K),Z==null||Z(K)),$.current&&(e==null||e(w,K),U==null||U(K),P.current=setTimeout(()=>{n==null||n(w,K),q==null||q(K),$.current=!1},150))},{passive:!1}):typeof E<"u"&&B.on("wheel.zoom",function(w,M){if(!m||et(w,C))return null;w.preventDefault(),E.call(this,w,M)},{passive:!1}))},[h,i,l,B,H,E,_,s,m,C,t,e,n]),N.useEffect(()=>{H&&H.on("start",w=>{var O,V;if(!w.sourceEvent||w.sourceEvent.internal)return null;b.current=(O=w.sourceEvent)==null?void 0:O.button;const{onViewportChangeStart:M}=z.getState(),k=Vt(w.transform);I.current=!0,L.current=k,((V=w.sourceEvent)==null?void 0:V.type)==="mousedown"&&z.setState({paneDragging:!0}),M==null||M(k),t==null||t(w.sourceEvent,k)})},[H,t]),N.useEffect(()=>{H&&(h&&!I.current?H.on("zoom",null):h||H.on("zoom",w=>{var k;const{onViewportChange:M}=z.getState();if(z.setState({transform:[w.transform.x,w.transform.y,w.transform.k]}),T.current=!!(r&&zr(f,b.current??0)),(e||M)&&!((k=w.sourceEvent)!=null&&k.internal)){const O=Vt(w.transform);M==null||M(O),e==null||e(w.sourceEvent,O)}}))},[h,H,e,f,r]),N.useEffect(()=>{H&&H.on("end",w=>{if(!w.sourceEvent||w.sourceEvent.internal)return null;const{onViewportChangeEnd:M}=z.getState();if(I.current=!1,z.setState({paneDragging:!1}),r&&zr(f,b.current??0)&&!T.current&&r(w.sourceEvent),T.current=!1,(n||M)&&Xu(L.current,w.transform)){const k=Vt(w.transform);L.current=k,clearTimeout(A.current),A.current=setTimeout(()=>{M==null||M(k),n==null||n(w.sourceEvent,k)},i?150:0)}})},[H,i,f,n,r]),N.useEffect(()=>{H&&H.filter(w=>{const M=_||o,k=s&&w.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&w.button===1&&w.type==="mousedown"&&(et(w,"react-flow__node")||et(w,"react-flow__edge")))return!0;if(!f&&!M&&!i&&!u&&!s||h||!u&&w.type==="dblclick"||et(w,C)&&w.type==="wheel"||et(w,x)&&(w.type!=="wheel"||i&&w.type==="wheel"&&!_)||!s&&w.ctrlKey&&w.type==="wheel"||!M&&!i&&!k&&w.type==="wheel"||!f&&(w.type==="mousedown"||w.type==="touchstart")||Array.isArray(f)&&!f.includes(w.button)&&(w.type==="mousedown"||w.type==="touchstart"))return!1;const O=Array.isArray(f)&&f.includes(w.button)||!w.button||w.button<=1;return(!w.ctrlKey||w.type==="wheel")&&O})},[h,H,o,s,i,u,f,c,_]),D.createElement("div",{className:"react-flow__renderer",ref:R,style:er},S)},Zu=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Uu(){const{userSelectionActive:e,userSelectionRect:t}=j(Zu,ae);return e&&t?D.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Or(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,o=t.position.y+t.height-n.height;if(r>0||o>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),o>0&&(n.style.height+=o),t.position.x<0){const s=Math.abs(t.position.x);n.position.x=n.position.x-s,n.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);n.position.y=n.position.y-s,n.style.height+=s,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function oi(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const s=e.filter(a=>a.id===o.id);if(s.length===0)return r.push(o),r;const i={...o};for(const a of s)if(a)switch(a.type){case"select":{i.selected=a.selected;break}case"position":{typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&Or(r,i);break}case"dimensions":{typeof a.dimensions<"u"&&(i.width=a.dimensions.width,i.height=a.dimensions.height),typeof a.updateStyle<"u"&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&Or(r,i);break}case"remove":return r}return r.push(i),r},n)}function ii(e,t){return oi(e,t)}function qu(e,t){return oi(e,t)}const Te=(e,t)=>({id:e,type:"select",selected:t});function nt(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(Te(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(Te(r.id,!1))),n},[])}const bn=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Gu=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),si=N.memo(({isSelecting:e,selectionMode:t=At.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:c,children:f})=>{const d=N.useRef(null),g=ne(),y=N.useRef(0),p=N.useRef(0),v=N.useRef(),{userSelectionActive:m,elementsSelectable:S,dragging:C}=j(Gu,ae),x=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,p.current=0},A=E=>{s==null||s(E),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},z=E=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){E.preventDefault();return}i==null||i(E)},I=a?E=>a(E):void 0,T=E=>{const{resetSelectedElements:h,domNode:_}=g.getState();if(v.current=_==null?void 0:_.getBoundingClientRect(),!S||!e||E.button!==0||E.target!==d.current||!v.current)return;const{x:b,y:$}=De(E,v.current);h(),g.setState({userSelectionRect:{width:0,height:0,startX:b,startY:$,x:b,y:$}}),r==null||r(E)},R=E=>{const{userSelectionRect:h,nodeInternals:_,edges:b,transform:$,onNodesChange:P,onEdgesChange:w,nodeOrigin:M,getNodes:k}=g.getState();if(!e||!v.current||!h)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const O=De(E,v.current),V=h.startX??0,F=h.startY??0,K={...h,x:O.x<V?O.x:V,y:O.y<F?O.y:F,width:Math.abs(O.x-V),height:Math.abs(O.y-F)},Z=k(),U=Bo(_,K,$,t===At.Partial,!0,M),q=Lo(U,b).map(J=>J.id),Q=U.map(J=>J.id);if(y.current!==Q.length){y.current=Q.length;const J=nt(Z,Q);J.length&&(P==null||P(J))}if(p.current!==q.length){p.current=q.length;const J=nt(b,q);J.length&&(w==null||w(J))}g.setState({userSelectionRect:K})},L=E=>{if(E.button!==0)return;const{userSelectionRect:h}=g.getState();!m&&h&&E.target===d.current&&(A==null||A(E)),g.setState({nodesSelectionActive:y.current>0}),x(),o==null||o(E)},H=E=>{m&&(g.setState({nodesSelectionActive:y.current>0}),o==null||o(E)),x()},B=S&&(e||m);return D.createElement("div",{className:de(["react-flow__pane",{dragging:C,selection:e}]),onClick:B?void 0:bn(A,d),onContextMenu:bn(z,d),onWheel:bn(I,d),onMouseEnter:B?void 0:l,onMouseDown:B?T:void 0,onMouseMove:B?R:u,onMouseUp:B?L:void 0,onMouseLeave:B?H:c,ref:d,style:er},f,D.createElement(Uu,null))});si.displayName="Pane";function ai(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:ai(n,t):!1}function Br(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Qu(e,t,n,r){return Array.from(e.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||!ai(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>{var s,i;return{id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=o.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=o.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode,width:o.width,height:o.height,expandParent:o.expandParent}})}function Ju(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function ci(e,t,n,r,o=[0,0],s){const i=Ju(e,e.extent||r);let a=i;if(e.extent==="parent"&&!e.expandParent)if(e.parentNode&&e.width&&e.height){const c=n.get(e.parentNode),{x:f,y:d}=it(c,o).positionAbsolute;a=c&&fe(f)&&fe(d)&&fe(c.width)&&fe(c.height)?[[f+e.width*o[0],d+e.height*o[1]],[f+c.width-e.width+e.width*o[0],d+c.height-e.height+e.height*o[1]]]:a}else s==null||s("005",Me.error005()),a=i;else if(e.extent&&e.parentNode&&e.extent!=="parent"){const c=n.get(e.parentNode),{x:f,y:d}=it(c,o).positionAbsolute;a=[[e.extent[0][0]+f,e.extent[0][1]+d],[e.extent[1][0]+f,e.extent[1][1]+d]]}let l={x:0,y:0};if(e.parentNode){const c=n.get(e.parentNode);l=it(c,o).positionAbsolute}const u=a&&a!=="parent"?Wn(t,a):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function vn({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const Lr=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const s=Array.from(o),i=t.getBoundingClientRect(),a={x:i.width*r[0],y:i.height*r[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-a.x)/n,y:(u.top-i.top-a.y)/n,...Kn(l)}})};function xt(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function Hn({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:a,onError:l}=t.getState(),u=a.get(e);if(!u){l==null||l("012",Me.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):o([e])}function ju(){const e=ne();return N.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:s}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?o[0]*Math.round(l.x/o[0]):l.x,ySnapped:s?o[1]*Math.round(l.y/o[1]):l.y,...l}},[])}function Sn(e){return(t,n,r)=>e==null?void 0:e(t,r)}function li({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,selectNodesOnDrag:i}){const a=ne(),[l,u]=N.useState(!1),c=N.useRef([]),f=N.useRef({x:null,y:null}),d=N.useRef(0),g=N.useRef(null),y=N.useRef({x:0,y:0}),p=N.useRef(null),v=N.useRef(!1),m=N.useRef(!1),S=ju();return N.useEffect(()=>{if(e!=null&&e.current){const C=ge(e.current),x=({x:I,y:T})=>{const{nodeInternals:R,onNodeDrag:L,onSelectionDrag:H,updateNodePositions:B,nodeExtent:E,snapGrid:h,snapToGrid:_,nodeOrigin:b,onError:$}=a.getState();f.current={x:I,y:T};let P=!1,w={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&E){const k=Qn(c.current,b);w=Ct(k)}if(c.current=c.current.map(k=>{const O={x:I-k.distance.x,y:T-k.distance.y};_&&(O.x=h[0]*Math.round(O.x/h[0]),O.y=h[1]*Math.round(O.y/h[1]));const V=[[E[0][0],E[0][1]],[E[1][0],E[1][1]]];c.current.length>1&&E&&!k.extent&&(V[0][0]=k.positionAbsolute.x-w.x+E[0][0],V[1][0]=k.positionAbsolute.x+(k.width??0)-w.x2+E[1][0],V[0][1]=k.positionAbsolute.y-w.y+E[0][1],V[1][1]=k.positionAbsolute.y+(k.height??0)-w.y2+E[1][1]);const F=ci(k,O,R,V,b,$);return P=P||k.position.x!==F.position.x||k.position.y!==F.position.y,k.position=F.position,k.positionAbsolute=F.positionAbsolute,k}),!P)return;B(c.current,!0,!0),u(!0);const M=o?L:Sn(H);if(M&&p.current){const[k,O]=vn({nodeId:o,dragItems:c.current,nodeInternals:R});M(p.current,k,O)}},A=()=>{if(!g.current)return;const[I,T]=Ao(y.current,g.current);if(I!==0||T!==0){const{transform:R,panBy:L}=a.getState();f.current.x=(f.current.x??0)-I/R[2],f.current.y=(f.current.y??0)-T/R[2],L({x:I,y:T})&&x(f.current)}d.current=requestAnimationFrame(A)},z=I=>{var b;const{nodeInternals:T,multiSelectionActive:R,nodesDraggable:L,unselectNodesAndEdges:H,onNodeDragStart:B,onSelectionDragStart:E}=a.getState();m.current=!0;const h=o?B:Sn(E);(!i||!s)&&!R&&o&&((b=T.get(o))!=null&&b.selected||H()),o&&s&&i&&Hn({id:o,store:a,nodeRef:e});const _=S(I);if(f.current=_,c.current=Qu(T,L,_,o),h&&c.current){const[$,P]=vn({nodeId:o,dragItems:c.current,nodeInternals:T});h(I.sourceEvent,$,P)}};if(t)C.on(".drag",null);else{const I=lc().on("start",T=>{const{domNode:R,nodeDragThreshold:L}=a.getState();L===0&&z(T);const H=S(T);f.current=H,g.current=(R==null?void 0:R.getBoundingClientRect())||null,y.current=De(T.sourceEvent,g.current)}).on("drag",T=>{var B,E;const R=S(T),{autoPanOnNodeDrag:L,nodeDragThreshold:H}=a.getState();if(!v.current&&m.current&&L&&(v.current=!0,A()),!m.current){const h=R.xSnapped-(((B=f==null?void 0:f.current)==null?void 0:B.x)??0),_=R.ySnapped-(((E=f==null?void 0:f.current)==null?void 0:E.y)??0);Math.sqrt(h*h+_*_)>H&&z(T)}(f.current.x!==R.xSnapped||f.current.y!==R.ySnapped)&&c.current&&m.current&&(p.current=T.sourceEvent,y.current=De(T.sourceEvent,g.current),x(R))}).on("end",T=>{if(m.current&&(u(!1),v.current=!1,m.current=!1,cancelAnimationFrame(d.current),c.current)){const{updateNodePositions:R,nodeInternals:L,onNodeDragStop:H,onSelectionDragStop:B}=a.getState(),E=o?H:Sn(B);if(R(c.current,!1,!1),E){const[h,_]=vn({nodeId:o,dragItems:c.current,nodeInternals:L});E(T.sourceEvent,h,_)}}}).filter(T=>{const R=T.target;return!T.button&&(!n||!Br(R,`.${n}`,e))&&(!r||Br(R,r,e))});return C.call(I),()=>{C.on(".drag",null)}}}},[e,t,n,r,s,a,o,i,S]),l}function ui(){const e=ne();return N.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:s,getNodes:i,snapToGrid:a,snapGrid:l,onError:u,nodesDraggable:c}=e.getState(),f=i().filter(S=>S.selected&&(S.draggable||c&&typeof S.draggable>"u")),d=a?l[0]:5,g=a?l[1]:5,y=n.isShiftPressed?4:1,p=n.x*d*y,v=n.y*g*y,m=f.map(S=>{if(S.positionAbsolute){const C={x:S.positionAbsolute.x+p,y:S.positionAbsolute.y+v};a&&(C.x=l[0]*Math.round(C.x/l[0]),C.y=l[1]*Math.round(C.y/l[1]));const{positionAbsolute:x,position:A}=ci(S,C,r,o,void 0,u);S.position=A,S.positionAbsolute=x}return S});s(m,!0,!1)},[])}const st={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var wt=e=>{const t=({id:n,type:r,data:o,xPos:s,yPos:i,xPosOrigin:a,yPosOrigin:l,selected:u,onClick:c,onMouseEnter:f,onMouseMove:d,onMouseLeave:g,onContextMenu:y,onDoubleClick:p,style:v,className:m,isDraggable:S,isSelectable:C,isConnectable:x,isFocusable:A,selectNodesOnDrag:z,sourcePosition:I,targetPosition:T,hidden:R,resizeObserver:L,dragHandle:H,zIndex:B,isParent:E,noDragClassName:h,noPanClassName:_,initialized:b,disableKeyboardA11y:$,ariaLabel:P,rfId:w})=>{const M=ne(),k=N.useRef(null),O=N.useRef(I),V=N.useRef(T),F=N.useRef(r),K=C||S||c||f||d||g,Z=ui(),U=xt(n,M.getState,f),q=xt(n,M.getState,d),Q=xt(n,M.getState,g),J=xt(n,M.getState,y),oe=xt(n,M.getState,p),he=G=>{const{nodeDragThreshold:ie}=M.getState();if(C&&(!z||!S||ie>0)&&Hn({id:n,store:M,nodeRef:k}),c){const ce=M.getState().nodeInternals.get(n);ce&&c(G,{...ce})}},ye=G=>{if(!Pn(G))if(Po.includes(G.key)&&C){const ie=G.key==="Escape";Hn({id:n,store:M,unselect:ie,nodeRef:k})}else!$&&S&&u&&Object.prototype.hasOwnProperty.call(st,G.key)&&(M.setState({ariaLiveMessage:`Moved selected node ${G.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),Z({x:st[G.key].x,y:st[G.key].y,isShiftPressed:G.shiftKey}))};N.useEffect(()=>{if(k.current&&!R){const G=k.current;return L==null||L.observe(G),()=>L==null?void 0:L.unobserve(G)}},[R]),N.useEffect(()=>{const G=F.current!==r,ie=O.current!==I,ce=V.current!==T;k.current&&(G||ie||ce)&&(G&&(F.current=r),ie&&(O.current=I),ce&&(V.current=T),M.getState().updateNodeDimensions([{id:n,nodeElement:k.current,forceUpdate:!0}]))},[n,r,I,T]);const ee=li({nodeRef:k,disabled:R||!S,noDragClassName:h,handleSelector:H,nodeId:n,isSelectable:C,selectNodesOnDrag:z});return R?null:D.createElement("div",{className:de(["react-flow__node",`react-flow__node-${r}`,{[_]:S},m,{selected:u,selectable:C,parent:E,dragging:ee}]),ref:k,style:{zIndex:B,transform:`translate(${a}px,${l}px)`,pointerEvents:K?"all":"none",visibility:b?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:U,onMouseMove:q,onMouseLeave:Q,onContextMenu:J,onClick:he,onDoubleClick:oe,onKeyDown:A?ye:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":$?void 0:`${Jo}-${w}`,"aria-label":P},D.createElement(hu,{value:n},D.createElement(e,{id:n,data:o,type:r,xPos:s,yPos:i,selected:u,isConnectable:x,sourcePosition:I,targetPosition:T,dragging:ee,dragHandle:H,zIndex:B})))};return t.displayName="NodeWrapper",N.memo(t)};const ef=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Qn(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function tf({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ne(),{width:o,height:s,x:i,y:a,transformString:l,userSelectionActive:u}=j(ef,ae),c=ui(),f=N.useRef(null);if(N.useEffect(()=>{var y;n||(y=f.current)==null||y.focus({preventScroll:!0})},[n]),li({nodeRef:f}),u||!o||!s)return null;const d=e?y=>{const p=r.getState().getNodes().filter(v=>v.selected);e(y,p)}:void 0,g=y=>{Object.prototype.hasOwnProperty.call(st,y.key)&&c({x:st[y.key].x,y:st[y.key].y,isShiftPressed:y.shiftKey})};return D.createElement("div",{className:de(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},D.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:o,height:s,top:a,left:i}}))}var nf=N.memo(tf);const rf=e=>e.nodesSelectionActive,fi=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:a,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:f,selectionOnDrag:d,selectionMode:g,onSelectionStart:y,onSelectionEnd:p,multiSelectionKeyCode:v,panActivationKeyCode:m,zoomActivationKeyCode:S,elementsSelectable:C,zoomOnScroll:x,zoomOnPinch:A,panOnScroll:z,panOnScrollSpeed:I,panOnScrollMode:T,zoomOnDoubleClick:R,panOnDrag:L,defaultViewport:H,translateExtent:B,minZoom:E,maxZoom:h,preventScrolling:_,onSelectionContextMenu:b,noWheelClassName:$,noPanClassName:P,disableKeyboardA11y:w})=>{const M=j(rf),k=$t(f),O=$t(m),V=O||L,F=O||z,K=k||d&&V!==!0;return Fu({deleteKeyCode:a,multiSelectionKeyCode:v}),D.createElement(Wu,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:x,zoomOnPinch:A,panOnScroll:F,panOnScrollSpeed:I,panOnScrollMode:T,zoomOnDoubleClick:R,panOnDrag:!k&&V,defaultViewport:H,translateExtent:B,minZoom:E,maxZoom:h,zoomActivationKeyCode:S,preventScrolling:_,noWheelClassName:$,noPanClassName:P},D.createElement(si,{onSelectionStart:y,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:V,isSelecting:!!K,selectionMode:g},e,M&&D.createElement(nf,{onSelectionContextMenu:b,noPanClassName:P,disableKeyboardA11y:w})))};fi.displayName="FlowRenderer";var of=N.memo(fi);function sf(e){return j(N.useCallback(n=>e?Bo(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function af(e){const t={input:wt(e.input||Uo),default:wt(e.default||zn),output:wt(e.output||Go),group:wt(e.group||jn)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,s)=>(o[s]=wt(e[s]||zn),o),n);return{...t,...r}}const cf=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},lf=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),di=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:s,onError:i}=j(lf,ae),a=sf(e.onlyRenderVisibleElements),l=N.useRef(),u=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(f=>{const d=f.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));s(d)});return l.current=c,c},[]);return N.useEffect(()=>()=>{var c;(c=l==null?void 0:l.current)==null||c.disconnect()},[]),D.createElement("div",{className:"react-flow__nodes",style:er},a.map(c=>{var A,z;let f=c.type||"default";e.nodeTypes[f]||(i==null||i("003",Me.error003(f)),f="default");const d=e.nodeTypes[f]||e.nodeTypes.default,g=!!(c.draggable||t&&typeof c.draggable>"u"),y=!!(c.selectable||o&&typeof c.selectable>"u"),p=!!(c.connectable||n&&typeof c.connectable>"u"),v=!!(c.focusable||r&&typeof c.focusable>"u"),m=e.nodeExtent?Wn(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,S=(m==null?void 0:m.x)??0,C=(m==null?void 0:m.y)??0,x=cf({x:S,y:C,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return D.createElement(d,{key:c.id,id:c.id,className:c.className,style:c.style,type:f,data:c.data,sourcePosition:c.sourcePosition||Y.Bottom,targetPosition:c.targetPosition||Y.Top,hidden:c.hidden,xPos:S,yPos:C,xPosOrigin:x.x,yPosOrigin:x.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:g,isSelectable:y,isConnectable:p,isFocusable:v,resizeObserver:u,dragHandle:c.dragHandle,zIndex:((A=c[te])==null?void 0:A.z)??0,isParent:!!((z=c[te])!=null&&z.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel})}))};di.displayName="NodeRenderer";var uf=N.memo(di);const ff=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,df=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,Vr="react-flow__edgeupdater",Fr=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:i,type:a})=>D.createElement("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:i,className:de([Vr,`${Vr}-${a}`]),cx:ff(t,r,e),cy:df(n,r,e),r,stroke:"transparent",fill:"transparent"}),hf=()=>!0;var tt=e=>{const t=({id:n,className:r,type:o,data:s,onClick:i,onEdgeDoubleClick:a,selected:l,animated:u,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:p,style:v,source:m,target:S,sourceX:C,sourceY:x,targetX:A,targetY:z,sourcePosition:I,targetPosition:T,elementsSelectable:R,hidden:L,sourceHandleId:H,targetHandleId:B,onContextMenu:E,onMouseEnter:h,onMouseMove:_,onMouseLeave:b,edgeUpdaterRadius:$,onEdgeUpdate:P,onEdgeUpdateStart:w,onEdgeUpdateEnd:M,markerEnd:k,markerStart:O,rfId:V,ariaLabel:F,isFocusable:K,isUpdatable:Z,pathOptions:U,interactionWidth:q})=>{const Q=N.useRef(null),[J,oe]=N.useState(!1),[he,ye]=N.useState(!1),ee=ne(),G=N.useMemo(()=>`url(#${Dn(O,V)})`,[O,V]),ie=N.useMemo(()=>`url(#${Dn(k,V)})`,[k,V]);if(L)return null;const ce=re=>{var xe;const{edges:le,addSelectedEdges:Be,unselectNodesAndEdges:Le,multiSelectionActive:Ve}=ee.getState(),Se=le.find(ht=>ht.id===n);Se&&(R&&(ee.setState({nodesSelectionActive:!1}),Se.selected&&Ve?(Le({nodes:[],edges:[Se]}),(xe=Q.current)==null||xe.blur()):Be([n])),i&&i(re,Se))},X=yt(n,ee.getState,a),Ie=yt(n,ee.getState,E),ze=yt(n,ee.getState,h),ft=yt(n,ee.getState,_),qe=yt(n,ee.getState,b),He=(re,le)=>{if(re.button!==0)return;const{edges:Be,isValidConnection:Le}=ee.getState(),Ve=le?S:m,Se=(le?B:H)||null,xe=le?"target":"source",ht=Le||hf,un=le,gt=Be.find(Fe=>Fe.id===n);ye(!0),w==null||w(re,gt,xe);const fn=Fe=>{ye(!1),M==null||M(Fe,gt,xe)};Xo({event:re,handleId:Se,nodeId:Ve,onConnect:Fe=>P==null?void 0:P(gt,Fe),isTarget:un,getState:ee.getState,setState:ee.setState,isValidConnection:ht,edgeUpdaterType:xe,onEdgeUpdateEnd:fn})},Ce=re=>He(re,!0),Ge=re=>He(re,!1),Ae=()=>oe(!0),Oe=()=>oe(!1),dt=!R&&!i,Qe=re=>{var le;if(Po.includes(re.key)&&R){const{unselectNodesAndEdges:Be,addSelectedEdges:Le,edges:Ve}=ee.getState();re.key==="Escape"?((le=Q.current)==null||le.blur(),Be({edges:[Ve.find(xe=>xe.id===n)]})):Le([n])}};return D.createElement("g",{className:de(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:l,animated:u,inactive:dt,updating:J}]),onClick:ce,onDoubleClick:X,onContextMenu:Ie,onMouseEnter:ze,onMouseMove:ft,onMouseLeave:qe,onKeyDown:K?Qe:void 0,tabIndex:K?0:void 0,role:K?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":F===null?void 0:F||`Edge from ${m} to ${S}`,"aria-describedby":K?`${jo}-${V}`:void 0,ref:Q},!he&&D.createElement(e,{id:n,source:m,target:S,selected:l,animated:u,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:p,data:s,style:v,sourceX:C,sourceY:x,targetX:A,targetY:z,sourcePosition:I,targetPosition:T,sourceHandleId:H,targetHandleId:B,markerStart:G,markerEnd:ie,pathOptions:U,interactionWidth:q}),Z&&D.createElement(D.Fragment,null,(Z==="source"||Z===!0)&&D.createElement(Fr,{position:I,centerX:C,centerY:x,radius:$,onMouseDown:Ce,onMouseEnter:Ae,onMouseOut:Oe,type:"source"}),(Z==="target"||Z===!0)&&D.createElement(Fr,{position:T,centerX:A,centerY:z,radius:$,onMouseDown:Ge,onMouseEnter:Ae,onMouseOut:Oe,type:"target"})))};return t.displayName="EdgeWrapper",N.memo(t)};function gf(e){const t={default:tt(e.default||en),straight:tt(e.bezier||qn),step:tt(e.step||Un),smoothstep:tt(e.step||ln),simplebezier:tt(e.simplebezier||Zn)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,s)=>(o[s]=tt(e[s]||en),o),n);return{...t,...r}}function Yr(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case Y.Top:return{x:r+s/2,y:o};case Y.Right:return{x:r+s,y:o+i/2};case Y.Bottom:return{x:r+s/2,y:o+i};case Y.Left:return{x:r,y:o+i/2}}}function Xr(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const pf=(e,t,n,r,o,s)=>{const i=Yr(n,e,t),a=Yr(s,r,o);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function mf({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:s,width:i,height:a,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Ct({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:a/l[2]}),f=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),d=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(f*d)>0}function Kr(e){var r,o,s,i,a;const t=((r=e==null?void 0:e[te])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const yf=[{level:0,isMaxLevel:!0,edges:[]}];function xf(e,t,n=!1){let r=-1;const o=e.reduce((i,a)=>{var c,f;const l=fe(a.zIndex);let u=l?a.zIndex:0;if(n){const d=t.get(a.target),g=t.get(a.source),y=a.selected||(d==null?void 0:d.selected)||(g==null?void 0:g.selected),p=Math.max(((c=g==null?void 0:g[te])==null?void 0:c.z)||0,((f=d==null?void 0:d[te])==null?void 0:f.z)||0,1e3);u=(l?a.zIndex:0)+(y?p:0)}return i[u]?i[u].push(a):i[u]=[a],r=u>r?u:r,i},{}),s=Object.entries(o).map(([i,a])=>{const l=+i;return{edges:a,level:l,isMaxLevel:l===r}});return s.length===0?yf:s}function wf(e,t,n){const r=j(N.useCallback(o=>e?o.edges.filter(s=>{const i=t.get(s.source),a=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&mf({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:a.width,targetHeight:a.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return xf(r,t,n)}const bf=({color:e="none",strokeWidth:t=1})=>D.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),vf=({color:e="none",strokeWidth:t=1})=>D.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Wr={[jt.Arrow]:bf,[jt.ArrowClosed]:vf};function Sf(e){const t=ne();return N.useMemo(()=>{var o,s;return Object.prototype.hasOwnProperty.call(Wr,e)?Wr[e]:((s=(o=t.getState()).onError)==null||s.call(o,"009",Me.error009(e)),null)},[e])}const _f=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const l=Sf(t);return l?D.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},D.createElement(l,{color:n,strokeWidth:i})):null},Ef=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const a=Dn(i,t);r.includes(a)||(o.push({id:a,color:i.color||e,...i}),r.push(a))}}),o),[]).sort((o,s)=>o.id.localeCompare(s.id))},hi=({defaultColor:e,rfId:t})=>{const n=j(N.useCallback(Ef({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((s,i)=>s.id!==o[i].id)));return D.createElement("defs",null,n.map(r=>D.createElement(_f,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};hi.displayName="MarkerDefinitions";var Nf=N.memo(hi);const Mf=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),gi=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:s,onEdgeUpdate:i,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:g,onEdgeUpdateStart:y,onEdgeUpdateEnd:p,children:v})=>{const{edgesFocusable:m,edgesUpdatable:S,elementsSelectable:C,width:x,height:A,connectionMode:z,nodeInternals:I,onError:T}=j(Mf,ae),R=wf(t,I,n);return x?D.createElement(D.Fragment,null,R.map(({level:L,edges:H,isMaxLevel:B})=>D.createElement("svg",{key:L,style:{zIndex:L},width:x,height:A,className:"react-flow__edges react-flow__container"},B&&D.createElement(Nf,{defaultColor:e,rfId:r}),D.createElement("g",null,H.map(E=>{const[h,_,b]=Kr(I.get(E.source)),[$,P,w]=Kr(I.get(E.target));if(!b||!w)return null;let M=E.type||"default";o[M]||(T==null||T("011",Me.error011(M)),M="default");const k=o[M]||o.default,O=z===Ue.Strict?P.target:(P.target??[]).concat(P.source??[]),V=Xr(_.source,E.sourceHandle),F=Xr(O,E.targetHandle),K=(V==null?void 0:V.position)||Y.Bottom,Z=(F==null?void 0:F.position)||Y.Top,U=!!(E.focusable||m&&typeof E.focusable>"u"),q=typeof i<"u"&&(E.updatable||S&&typeof E.updatable>"u");if(!V||!F)return T==null||T("008",Me.error008(V,E)),null;const{sourceX:Q,sourceY:J,targetX:oe,targetY:he}=pf(h,V,K,$,F,Z);return D.createElement(k,{key:E.id,id:E.id,className:de([E.className,s]),type:M,data:E.data,selected:!!E.selected,animated:!!E.animated,hidden:!!E.hidden,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,style:E.style,source:E.source,target:E.target,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerEnd:E.markerEnd,markerStart:E.markerStart,sourceX:Q,sourceY:J,targetX:oe,targetY:he,sourcePosition:K,targetPosition:Z,elementsSelectable:C,onEdgeUpdate:i,onContextMenu:a,onMouseEnter:l,onMouseMove:u,onMouseLeave:c,onClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:g,onEdgeUpdateStart:y,onEdgeUpdateEnd:p,rfId:r,ariaLabel:E.ariaLabel,isFocusable:U,isUpdatable:q,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth})})))),v):null};gi.displayName="EdgeRenderer";var Cf=N.memo(gi);const Af=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function $f({children:e}){const t=j(Af);return D.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function kf(e){const t=ri(),n=N.useRef(!1);N.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Tf={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},pi=({nodeId:e,handleType:t,style:n,type:r=Pe.Bezier,CustomComponent:o,connectionStatus:s})=>{var z,I,T;const{fromNode:i,handleId:a,toX:l,toY:u,connectionMode:c}=j(N.useCallback(R=>({fromNode:R.nodeInternals.get(e),handleId:R.connectionHandleId,toX:(R.connectionPosition.x-R.transform[0])/R.transform[2],toY:(R.connectionPosition.y-R.transform[1])/R.transform[2],connectionMode:R.connectionMode}),[e]),ae),f=(z=i==null?void 0:i[te])==null?void 0:z.handleBounds;let d=f==null?void 0:f[t];if(c===Ue.Loose&&(d=d||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!d)return null;const g=a?d.find(R=>R.id===a):d[0],y=g?g.x+g.width/2:(i.width??0)/2,p=g?g.y+g.height/2:i.height??0,v=(((I=i.positionAbsolute)==null?void 0:I.x)??0)+y,m=(((T=i.positionAbsolute)==null?void 0:T.y)??0)+p,S=g==null?void 0:g.position,C=S?Tf[S]:null;if(!S||!C)return null;if(o)return D.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:g,fromX:v,fromY:m,toX:l,toY:u,fromPosition:S,toPosition:C,connectionStatus:s});let x="";const A={sourceX:v,sourceY:m,sourcePosition:S,targetX:l,targetY:u,targetPosition:C};return r===Pe.Bezier?[x]=Ho(A):r===Pe.Step?[x]=Rn({...A,borderRadius:0}):r===Pe.SmoothStep?[x]=Rn(A):r===Pe.SimpleBezier?[x]=zo(A):x=`M${v},${m} ${l},${u}`,D.createElement("path",{d:x,fill:"none",className:"react-flow__connection-path",style:n})};pi.displayName="ConnectionLine";const Pf=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Rf({containerStyle:e,style:t,type:n,component:r}){const{nodeId:o,handleType:s,nodesConnectable:i,width:a,height:l,connectionStatus:u}=j(Pf,ae);return!(o&&s&&a&&i)?null:D.createElement("svg",{style:e,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},D.createElement("g",{className:de(["react-flow__connection",u])},D.createElement(pi,{nodeId:o,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function Zr(e,t){return N.useRef(null),ne(),N.useMemo(()=>t(e),[e])}const mi=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:s,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:g,onSelectionContextMenu:y,onSelectionStart:p,onSelectionEnd:v,connectionLineType:m,connectionLineStyle:S,connectionLineComponent:C,connectionLineContainerStyle:x,selectionKeyCode:A,selectionOnDrag:z,selectionMode:I,multiSelectionKeyCode:T,panActivationKeyCode:R,zoomActivationKeyCode:L,deleteKeyCode:H,onlyRenderVisibleElements:B,elementsSelectable:E,selectNodesOnDrag:h,defaultViewport:_,translateExtent:b,minZoom:$,maxZoom:P,preventScrolling:w,defaultMarkerColor:M,zoomOnScroll:k,zoomOnPinch:O,panOnScroll:V,panOnScrollSpeed:F,panOnScrollMode:K,zoomOnDoubleClick:Z,panOnDrag:U,onPaneClick:q,onPaneMouseEnter:Q,onPaneMouseMove:J,onPaneMouseLeave:oe,onPaneScroll:he,onPaneContextMenu:ye,onEdgeUpdate:ee,onEdgeContextMenu:G,onEdgeMouseEnter:ie,onEdgeMouseMove:ce,onEdgeMouseLeave:X,edgeUpdaterRadius:Ie,onEdgeUpdateStart:ze,onEdgeUpdateEnd:ft,noDragClassName:qe,noWheelClassName:He,noPanClassName:Ce,elevateEdgesOnSelect:Ge,disableKeyboardA11y:Ae,nodeOrigin:Oe,nodeExtent:dt,rfId:Qe})=>{const re=Zr(e,af),le=Zr(t,gf);return kf(s),D.createElement(of,{onPaneClick:q,onPaneMouseEnter:Q,onPaneMouseMove:J,onPaneMouseLeave:oe,onPaneContextMenu:ye,onPaneScroll:he,deleteKeyCode:H,selectionKeyCode:A,selectionOnDrag:z,selectionMode:I,onSelectionStart:p,onSelectionEnd:v,multiSelectionKeyCode:T,panActivationKeyCode:R,zoomActivationKeyCode:L,elementsSelectable:E,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:k,zoomOnPinch:O,zoomOnDoubleClick:Z,panOnScroll:V,panOnScrollSpeed:F,panOnScrollMode:K,panOnDrag:U,defaultViewport:_,translateExtent:b,minZoom:$,maxZoom:P,onSelectionContextMenu:y,preventScrolling:w,noDragClassName:qe,noWheelClassName:He,noPanClassName:Ce,disableKeyboardA11y:Ae},D.createElement($f,null,D.createElement(Cf,{edgeTypes:le,onEdgeClick:a,onEdgeDoubleClick:u,onEdgeUpdate:ee,onlyRenderVisibleElements:B,onEdgeContextMenu:G,onEdgeMouseEnter:ie,onEdgeMouseMove:ce,onEdgeMouseLeave:X,onEdgeUpdateStart:ze,onEdgeUpdateEnd:ft,edgeUpdaterRadius:Ie,defaultMarkerColor:M,noPanClassName:Ce,elevateEdgesOnSelect:!!Ge,disableKeyboardA11y:Ae,rfId:Qe},D.createElement(Rf,{style:S,type:m,component:C,containerStyle:x})),D.createElement("div",{className:"react-flow__edgelabel-renderer"}),D.createElement(uf,{nodeTypes:re,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:g,selectNodesOnDrag:h,onlyRenderVisibleElements:B,noPanClassName:Ce,noDragClassName:qe,disableKeyboardA11y:Ae,nodeOrigin:Oe,nodeExtent:dt,rfId:Qe})))};mi.displayName="GraphView";var Df=N.memo(mi);const On=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],$e={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:On,nodeExtent:On,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ue.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:au,isValidConnection:void 0},If=()=>vs((e,t)=>({...$e,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:s}=t();e({nodeInternals:wn(n,r,o,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",s=typeof r<"u",i=o?wn(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?r:[],hasDefaultNodes:o,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:l,nodeOrigin:u}=t(),c=l==null?void 0:l.querySelector(".react-flow__viewport");if(!c)return;const f=window.getComputedStyle(c),{m22:d}=new window.DOMMatrixReadOnly(f.transform),g=n.reduce((p,v)=>{const m=o.get(v.id);if(m){const S=Kn(v.nodeElement);!!(S.width&&S.height&&(m.width!==S.width||m.height!==S.height||v.forceUpdate))&&(o.set(m.id,{...m,[te]:{...m[te],handleBounds:{source:Lr(".source",v.nodeElement,d,u),target:Lr(".target",v.nodeElement,d,u)}},...S}),p.push({id:m.id,type:"dimensions",dimensions:S}))}return p},[]);ti(o,u);const y=i||s&&!i&&ni(t,{initial:!0,...a});e({nodeInternals:new Map(o),fitViewOnInitDone:y}),(g==null?void 0:g.length)>0&&(r==null||r(g))},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:s}=t(),i=n.map(a=>{const l={id:a.id,type:"position",dragging:o};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});s(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:s,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(s){const u=ii(n,a()),c=wn(u,o,i,l);e({nodeInternals:c})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,a=null;r?i=n.map(l=>Te(l,!0)):(i=nt(s(),n),a=nt(o,[])),Lt({changedNodes:i,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:s}=t();let i,a=null;r?i=n.map(l=>Te(l,!0)):(i=nt(o,n),a=nt(s(),[])),Lt({changedNodes:a,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:s}=t(),i=n||s(),a=r||o,l=i.map(c=>(c.selected=!1,Te(c.id,!1))),u=a.map(c=>Te(c.id,!1));Lt({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(a=>a.selected).map(a=>Te(a.id,!1)),i=n.filter(a=>a.selected).map(a=>Te(a.id,!1));Lt({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=Wn(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:s,d3Zoom:i,d3Selection:a,translateExtent:l}=t();if(!i||!a||!n.x&&!n.y)return!1;const u=Re.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),c=[[0,0],[o,s]],f=i==null?void 0:i.constrain()(u,c,l);return i.transform(a,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>e({connectionNodeId:$e.connectionNodeId,connectionHandleId:$e.connectionHandleId,connectionHandleType:$e.connectionHandleType,connectionStatus:$e.connectionStatus,connectionStartHandle:$e.connectionStartHandle,connectionEndHandle:$e.connectionEndHandle}),reset:()=>e({...$e})}),Object.is),yi=({children:e})=>{const t=N.useRef(null);return t.current||(t.current=If()),D.createElement(eu,{value:t.current},e)};yi.displayName="ReactFlowProvider";const xi=({children:e})=>N.useContext(cn)?D.createElement(D.Fragment,null,e):D.createElement(yi,null,e);xi.displayName="ReactFlowWrapper";const zf={input:Uo,default:zn,output:Go,group:jn},Hf={default:en,straight:qn,step:Un,smoothstep:ln,simplebezier:Zn},Of=[0,0],Bf=[15,15],Lf={x:0,y:0,zoom:1},Vf={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Ff=N.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s=zf,edgeTypes:i=Hf,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:f,onMoveEnd:d,onConnect:g,onConnectStart:y,onConnectEnd:p,onClickConnectStart:v,onClickConnectEnd:m,onNodeMouseEnter:S,onNodeMouseMove:C,onNodeMouseLeave:x,onNodeContextMenu:A,onNodeDoubleClick:z,onNodeDragStart:I,onNodeDrag:T,onNodeDragStop:R,onNodesDelete:L,onEdgesDelete:H,onSelectionChange:B,onSelectionDragStart:E,onSelectionDrag:h,onSelectionDragStop:_,onSelectionContextMenu:b,onSelectionStart:$,onSelectionEnd:P,connectionMode:w=Ue.Strict,connectionLineType:M=Pe.Bezier,connectionLineStyle:k,connectionLineComponent:O,connectionLineContainerStyle:V,deleteKeyCode:F="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:Z=!1,selectionMode:U=At.Full,panActivationKeyCode:q="Space",multiSelectionKeyCode:Q=Jt()?"Meta":"Control",zoomActivationKeyCode:J=Jt()?"Meta":"Control",snapToGrid:oe=!1,snapGrid:he=Bf,onlyRenderVisibleElements:ye=!1,selectNodesOnDrag:ee=!0,nodesDraggable:G,nodesConnectable:ie,nodesFocusable:ce,nodeOrigin:X=Of,edgesFocusable:Ie,edgesUpdatable:ze,elementsSelectable:ft,defaultViewport:qe=Lf,minZoom:He=.5,maxZoom:Ce=2,translateExtent:Ge=On,preventScrolling:Ae=!0,nodeExtent:Oe,defaultMarkerColor:dt="#b1b1b7",zoomOnScroll:Qe=!0,zoomOnPinch:re=!0,panOnScroll:le=!1,panOnScrollSpeed:Be=.5,panOnScrollMode:Le=Ke.Free,zoomOnDoubleClick:Ve=!0,panOnDrag:Se=!0,onPaneClick:xe,onPaneMouseEnter:ht,onPaneMouseMove:un,onPaneMouseLeave:gt,onPaneScroll:fn,onPaneContextMenu:tr,children:Fe,onEdgeUpdate:bi,onEdgeContextMenu:vi,onEdgeDoubleClick:Si,onEdgeMouseEnter:_i,onEdgeMouseMove:Ei,onEdgeMouseLeave:Ni,onEdgeUpdateStart:Mi,onEdgeUpdateEnd:Ci,edgeUpdaterRadius:Ai=10,onNodesChange:$i,onEdgesChange:ki,noDragClassName:Ti="nodrag",noWheelClassName:Pi="nowheel",noPanClassName:nr="nopan",fitView:Ri=!1,fitViewOptions:Di,connectOnClick:Ii=!0,attributionPosition:zi,proOptions:Hi,defaultEdgeOptions:Oi,elevateNodesOnSelect:Bi=!0,elevateEdgesOnSelect:Li=!1,disableKeyboardA11y:rr=!1,autoPanOnConnect:Vi=!0,autoPanOnNodeDrag:Fi=!0,connectionRadius:Yi=20,isValidConnection:Xi,onError:Ki,style:Wi,id:or,nodeDragThreshold:Zi,...Ui},qi)=>{const dn=or||"1";return D.createElement("div",{...Ui,style:{...Wi,...Vf},ref:qi,className:de(["react-flow",o]),"data-testid":"rf__wrapper",id:or},D.createElement(xi,null,D.createElement(Df,{onInit:u,onMove:c,onMoveStart:f,onMoveEnd:d,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:S,onNodeMouseMove:C,onNodeMouseLeave:x,onNodeContextMenu:A,onNodeDoubleClick:z,nodeTypes:s,edgeTypes:i,connectionLineType:M,connectionLineStyle:k,connectionLineComponent:O,connectionLineContainerStyle:V,selectionKeyCode:K,selectionOnDrag:Z,selectionMode:U,deleteKeyCode:F,multiSelectionKeyCode:Q,panActivationKeyCode:q,zoomActivationKeyCode:J,onlyRenderVisibleElements:ye,selectNodesOnDrag:ee,defaultViewport:qe,translateExtent:Ge,minZoom:He,maxZoom:Ce,preventScrolling:Ae,zoomOnScroll:Qe,zoomOnPinch:re,zoomOnDoubleClick:Ve,panOnScroll:le,panOnScrollSpeed:Be,panOnScrollMode:Le,panOnDrag:Se,onPaneClick:xe,onPaneMouseEnter:ht,onPaneMouseMove:un,onPaneMouseLeave:gt,onPaneScroll:fn,onPaneContextMenu:tr,onSelectionContextMenu:b,onSelectionStart:$,onSelectionEnd:P,onEdgeUpdate:bi,onEdgeContextMenu:vi,onEdgeDoubleClick:Si,onEdgeMouseEnter:_i,onEdgeMouseMove:Ei,onEdgeMouseLeave:Ni,onEdgeUpdateStart:Mi,onEdgeUpdateEnd:Ci,edgeUpdaterRadius:Ai,defaultMarkerColor:dt,noDragClassName:Ti,noWheelClassName:Pi,noPanClassName:nr,elevateEdgesOnSelect:Li,rfId:dn,disableKeyboardA11y:rr,nodeOrigin:X,nodeExtent:Oe}),D.createElement(ku,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:y,onConnectEnd:p,onClickConnectStart:v,onClickConnectEnd:m,nodesDraggable:G,nodesConnectable:ie,nodesFocusable:ce,edgesFocusable:Ie,edgesUpdatable:ze,elementsSelectable:ft,elevateNodesOnSelect:Bi,minZoom:He,maxZoom:Ce,nodeExtent:Oe,onNodesChange:$i,onEdgesChange:ki,snapToGrid:oe,snapGrid:he,connectionMode:w,translateExtent:Ge,connectOnClick:Ii,defaultEdgeOptions:Oi,fitView:Ri,fitViewOptions:Di,onNodesDelete:L,onEdgesDelete:H,onNodeDragStart:I,onNodeDrag:T,onNodeDragStop:R,onSelectionDrag:h,onSelectionDragStart:E,onSelectionDragStop:_,noPanClassName:nr,nodeOrigin:X,rfId:dn,autoPanOnConnect:Vi,autoPanOnNodeDrag:Fi,onError:Ki,connectionRadius:Yi,isValidConnection:Xi,nodeDragThreshold:Zi}),D.createElement(Au,{onSelectionChange:B}),Fe,D.createElement(ru,{proOptions:Hi,position:zi}),D.createElement(Iu,{rfId:dn,disableKeyboardA11y:rr})))});Ff.displayName="ReactFlow";function wi(e){return t=>{const[n,r]=N.useState(t),o=N.useCallback(s=>r(i=>e(s,i)),[]);return[n,r,o]}}const Zf=wi(ii),Uf=wi(qu);export{tn as H,nu as P,Ff as R,ne as a,ae as b,de as c,Wf as d,Qn as e,ri as f,it as g,Y as h,Re as i,Zf as j,Uf as k,xu as l,yi as m,ii as n,qu as o,we as p,ge as s,j as u,jl as z};
