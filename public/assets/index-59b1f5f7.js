import{r as p,R as i}from"./index-76fb7be0.js";import{c as J,u as P,g as me,a as he,s as ue,z as fe,P as ge,b as Q,i as pe,p as we,d as Me,e as ve}from"./style-d32ca51a.js";const U=({id:e,x:o,y:n,width:w,height:M,style:v,color:E,strokeColor:$,strokeWidth:x,className:N,borderRadius:d,shapeRendering:k,onClick:a,selected:t})=>{const{background:l,backgroundColor:m}=v||{},S=E||l||m;return i.createElement("rect",{className:J(["react-flow__minimap-node",{selected:t},N]),x:o,y:n,rx:d,ry:d,width:w,height:M,fill:S,stroke:$,strokeWidth:x,shapeRendering:k,onClick:a?y=>a(y,e):void 0})};U.displayName="MiniMapNode";var Ee=p.memo(U);const $e=e=>e.nodeOrigin,xe=e=>e.getNodes().filter(o=>!o.hidden&&o.width&&o.height),O=e=>e instanceof Function?e:()=>e;function Ne({nodeStrokeColor:e="transparent",nodeColor:o="#e2e2e2",nodeClassName:n="",nodeBorderRadius:w=5,nodeStrokeWidth:M=2,nodeComponent:v=Ee,onClick:E}){const $=P(xe,Q),x=P($e),N=O(o),d=O(e),k=O(n),a=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return i.createElement(i.Fragment,null,$.map(t=>{const{x:l,y:m}=me(t,x).positionAbsolute;return i.createElement(v,{key:t.id,x:l,y:m,width:t.width,height:t.height,style:t.style,selected:t.selected,className:k(t),color:N(t),borderRadius:w,strokeColor:d(t),strokeWidth:M,shapeRendering:a,onClick:E,id:t.id})}))}var ke=p.memo(Ne);const Re=200,Ce=150,Se=e=>{const o=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:o.length>0?Me(ve(o,e.nodeOrigin),n):n,rfId:e.rfId}},ye="react-flow__minimap-desc";function V({style:e,className:o,nodeStrokeColor:n="transparent",nodeColor:w="#e2e2e2",nodeClassName:M="",nodeBorderRadius:v=5,nodeStrokeWidth:E=2,nodeComponent:$,maskColor:x="rgb(240, 240, 240, 0.6)",maskStrokeColor:N="none",maskStrokeWidth:d=1,position:k="bottom-right",onClick:a,onNodeClick:t,pannable:l=!1,zoomable:m=!1,ariaLabel:S="React Flow mini map",inversePan:y=!1,zoomStep:T=10,offsetScale:ee=5}){const B=he(),W=p.useRef(null),{boundingRect:h,viewBB:R,rfId:te}=P(Se,Q),b=(e==null?void 0:e.width)??Re,z=(e==null?void 0:e.height)??Ce,oe=h.width/b,ne=h.height/z,_=Math.max(oe,ne),Y=_*b,Z=_*z,s=ee*_,D=h.x-(Y-h.width)/2-s,K=h.y-(Z-h.height)/2-s,A=Y+s*2,L=Z+s*2,X=`${ye}-${te}`,j=p.useRef(0);j.current=_,p.useEffect(()=>{if(W.current){const c=ue(W.current),u=r=>{const{transform:f,d3Selection:C,d3Zoom:g}=B.getState();if(r.sourceEvent.type!=="wheel"||!C||!g)return;const H=-r.sourceEvent.deltaY*(r.sourceEvent.deltaMode===1?.05:r.sourceEvent.deltaMode?1:.002)*T,I=f[2]*Math.pow(2,H);g.scaleTo(C,I)},F=r=>{const{transform:f,d3Selection:C,d3Zoom:g,translateExtent:H,width:I,height:ae}=B.getState();if(r.sourceEvent.type!=="mousemove"||!C||!g)return;const q=j.current*Math.max(1,f[2])*(y?-1:1),G={x:f[0]-r.sourceEvent.movementX*q,y:f[1]-r.sourceEvent.movementY*q},ce=[[0,0],[I,ae]],de=pe.translate(G.x,G.y).scale(f[2]),le=g.constrain()(de,ce,H);g.transform(C,le)},re=fe().on("zoom",l?F:null).on("zoom.wheel",m?u:null);return c.call(re),()=>{c.on("zoom",null)}}},[l,m,y,T]);const se=a?c=>{const u=we(c);a(c,{x:u[0],y:u[1]})}:void 0,ie=t?(c,u)=>{const F=B.getState().nodeInternals.get(u);t(c,F)}:void 0;return i.createElement(ge,{position:k,style:e,className:J(["react-flow__minimap",o]),"data-testid":"rf__minimap"},i.createElement("svg",{width:b,height:z,viewBox:`${D} ${K} ${A} ${L}`,role:"img","aria-labelledby":X,ref:W,onClick:se},S&&i.createElement("title",{id:X},S),i.createElement(ke,{onClick:ie,nodeColor:w,nodeStrokeColor:n,nodeBorderRadius:v,nodeClassName:M,nodeStrokeWidth:E,nodeComponent:$}),i.createElement("path",{className:"react-flow__minimap-mask",d:`M${D-s},${K-s}h${A+s*2}v${L+s*2}h${-A-s*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fill:x,fillRule:"evenodd",stroke:N,strokeWidth:d,pointerEvents:"none"})))}V.displayName="MiniMap";var We=p.memo(V);export{We as M};
