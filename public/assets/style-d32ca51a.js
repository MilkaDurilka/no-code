import{r as N,R as z}from"./index-76fb7be0.js";import{g as Si}from"./_commonjsHelpers-de833af9.js";import{i as Ht,c as Ln,a as Vn,b as vi}from"./string-5ef85f87.js";import"./index-f3b9022e.js";var Fn=180/Math.PI,an={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Eo(t,e,n,o,r,s){var i,a,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*n+e*o)&&(n-=t*l,o-=e*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),t*o<e*n&&(t=-t,e=-e,l=-l,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*Fn,skewX:Math.atan(l)*Fn,scaleX:i,scaleY:a}}var Ee;function _i(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?an:Eo(e.a,e.b,e.c,e.d,e.e,e.f)}function Ei(t){return t==null||(Ee||(Ee=document.createElementNS("http://www.w3.org/2000/svg","g")),Ee.setAttribute("transform",t),!(t=Ee.transform.baseVal.consolidate()))?an:(t=t.matrix,Eo(t.a,t.b,t.c,t.d,t.e,t.f))}function bo(t,e,n,o){function r(u){return u.length?u.pop()+" ":""}function s(u,c,f,d,g,y){if(u!==f||c!==d){var p=g.push("translate(",null,e,null,n);y.push({i:p-4,x:Ht(u,f)},{i:p-2,x:Ht(c,d)})}else(f||d)&&g.push("translate("+f+e+d+n)}function i(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(r(f)+"rotate(",null,o)-2,x:Ht(u,c)})):c&&f.push(r(f)+"rotate("+c+o)}function a(u,c,f,d){u!==c?d.push({i:f.push(r(f)+"skewX(",null,o)-2,x:Ht(u,c)}):c&&f.push(r(f)+"skewX("+c+o)}function l(u,c,f,d,g,y){if(u!==f||c!==d){var p=g.push(r(g)+"scale(",null,",",null,")");y.push({i:p-4,x:Ht(u,f)},{i:p-2,x:Ht(c,d)})}else(f!==1||d!==1)&&g.push(r(g)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,d),i(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(g){for(var y=-1,p=d.length,v;++y<p;)f[(v=d[y]).i]=v.x(g);return f.join("")}}}var bi=bo(_i,"px, ","px)","deg)"),Ni=bo(Ei,", ",")",")"),Mi=1e-12;function Yn(t){return((t=Math.exp(t))+1/t)/2}function Ci(t){return((t=Math.exp(t))-1/t)/2}function Ai(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ti=function t(e,n,o){function r(s,i){var a=s[0],l=s[1],u=s[2],c=i[0],f=i[1],d=i[2],g=c-a,y=f-l,p=g*g+y*y,v,m;if(p<Mi)m=Math.log(d/u)/e,v=function(R){return[a+R*g,l+R*y,u*Math.exp(e*R*m)]};else{var _=Math.sqrt(p),C=(d*d-u*u+o*p)/(2*u*n*_),w=(d*d-u*u-o*p)/(2*d*n*_),A=Math.log(Math.sqrt(C*C+1)-C),I=Math.log(Math.sqrt(w*w+1)-w);m=(I-A)/e,v=function(R){var P=R*m,D=Yn(A),L=u/(n*_)*(D*Ai(e*P+A)-Ci(A));return[a+L*g,l+L*y,u*D/Yn(e*P+A)]}}return v.duration=m*1e3*e/Math.SQRT2,v}return r.rho=function(s){var i=Math.max(.001,+s),a=i*i,l=a*a;return t(i,a,l)},r}(Math.SQRT2,2,4);function ft(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,o;n<t.length;n++)(o=ft(t[n]))!==""&&(e+=(e&&" ")+o);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var No={exports:{}},Mo={},Co={exports:{}},Ao={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ee=N;function ki(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pi=typeof Object.is=="function"?Object.is:ki,$i=ee.useState,Di=ee.useEffect,zi=ee.useLayoutEffect,Ri=ee.useDebugValue;function Ii(t,e){var n=e(),o=$i({inst:{value:n,getSnapshot:e}}),r=o[0].inst,s=o[1];return zi(function(){r.value=n,r.getSnapshot=e,Je(r)&&s({inst:r})},[t,n,e]),Di(function(){return Je(r)&&s({inst:r}),t(function(){Je(r)&&s({inst:r})})},[t]),Ri(n),n}function Je(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pi(t,n)}catch{return!0}}function Bi(t,e){return e()}var Oi=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Bi:Ii;Ao.useSyncExternalStore=ee.useSyncExternalStore!==void 0?ee.useSyncExternalStore:Oi;Co.exports=Ao;var Hi=Co.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fe=N,Li=Hi;function Vi(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fi=typeof Object.is=="function"?Object.is:Vi,Yi=Li.useSyncExternalStore,Xi=Fe.useRef,Ki=Fe.useEffect,Wi=Fe.useMemo,Zi=Fe.useDebugValue;Mo.useSyncExternalStoreWithSelector=function(t,e,n,o,r){var s=Xi(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=Wi(function(){function l(g){if(!u){if(u=!0,c=g,g=o(g),r!==void 0&&i.hasValue){var y=i.value;if(r(y,g))return f=y}return f=g}if(y=f,Fi(c,g))return y;var p=o(g);return r!==void 0&&r(y,p)?y:(c=g,f=p)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,n,o,r]);var a=Yi(t,s[0],s[1]);return Ki(function(){i.hasValue=!0,i.value=a},[a]),Zi(a),a};No.exports=Mo;var Ui=No.exports;const Gi=Si(Ui),Xn=t=>{let e;const n=new Set,o=(c,f)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const g=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(y=>y(e,g))}},r=()=>e,l={setState:o,getState:r,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{n.clear()}},u=e=t(o,r,l);return l},qi=t=>t?Xn(t):Xn,{useDebugValue:Qi}=z,{useSyncExternalStoreWithSelector:Ji}=Gi,ji=t=>t;function To(t,e=ji,n){const o=Ji(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Qi(o),o}const Kn=(t,e)=>{const n=qi(t),o=(r,s=e)=>To(n,r,s);return Object.assign(o,n),o},ts=(t,e)=>t?Kn(t,e):Kn;function st(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[o,r]of t)if(!Object.is(r,e.get(o)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const o of t)if(!e.has(o))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(e,n[o])||!Object.is(t[n[o]],e[n[o]]))return!1;return!0}var es={value:()=>{}};function Ye(){for(var t=0,e=arguments.length,n={},o;t<e;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new ke(n)}function ke(t){this._=t}function ns(t,e){return t.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}ke.prototype=Ye.prototype={constructor:ke,on:function(t,e){var n=this._,o=ns(t+"",n),r,s=-1,i=o.length;if(arguments.length<2){for(;++s<i;)if((r=(t=o[s]).type)&&(r=os(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<i;)if(r=(t=o[s]).type)n[r]=Wn(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Wn(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ke(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,s;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],o=0,r=s.length;o<r;++o)s[o].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],r=0,s=o.length;r<s;++r)o[r].value.apply(e,n)}};function os(t,e){for(var n=0,o=t.length,r;n<o;++n)if((r=t[n]).name===e)return r.value}function Wn(t,e,n){for(var o=0,r=t.length;o<r;++o)if(t[o].name===e){t[o]=es,t=t.slice(0,o).concat(t.slice(o+1));break}return n!=null&&t.push({name:e,value:n}),t}var cn="http://www.w3.org/1999/xhtml";const Zn={svg:"http://www.w3.org/2000/svg",xhtml:cn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xe(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Zn.hasOwnProperty(e)?{space:Zn[e],local:t}:t}function rs(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===cn&&e.documentElement.namespaceURI===cn?e.createElement(t):e.createElementNS(n,t)}}function is(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ko(t){var e=Xe(t);return(e.local?is:rs)(e)}function ss(){}function vn(t){return t==null?ss:function(){return this.querySelector(t)}}function as(t){typeof t!="function"&&(t=vn(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var s=e[r],i=s.length,a=o[r]=new Array(i),l,u,c=0;c<i;++c)(l=s[c])&&(u=t.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new lt(o,this._parents)}function cs(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ls(){return[]}function Po(t){return t==null?ls:function(){return this.querySelectorAll(t)}}function us(t){return function(){return cs(t.apply(this,arguments))}}function fs(t){typeof t=="function"?t=us(t):t=Po(t);for(var e=this._groups,n=e.length,o=[],r=[],s=0;s<n;++s)for(var i=e[s],a=i.length,l,u=0;u<a;++u)(l=i[u])&&(o.push(t.call(l,l.__data__,u,i)),r.push(l));return new lt(o,r)}function $o(t){return function(){return this.matches(t)}}function Do(t){return function(e){return e.matches(t)}}var ds=Array.prototype.find;function hs(t){return function(){return ds.call(this.children,t)}}function gs(){return this.firstElementChild}function ps(t){return this.select(t==null?gs:hs(typeof t=="function"?t:Do(t)))}var ms=Array.prototype.filter;function ys(){return Array.from(this.children)}function ws(t){return function(){return ms.call(this.children,t)}}function xs(t){return this.selectAll(t==null?ys:ws(typeof t=="function"?t:Do(t)))}function Ss(t){typeof t!="function"&&(t=$o(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var s=e[r],i=s.length,a=o[r]=[],l,u=0;u<i;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new lt(o,this._parents)}function zo(t){return new Array(t.length)}function vs(){return new lt(this._enter||this._groups.map(zo),this._parents)}function ze(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ze.prototype={constructor:ze,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function _s(t){return function(){return t}}function Es(t,e,n,o,r,s){for(var i=0,a,l=e.length,u=s.length;i<u;++i)(a=e[i])?(a.__data__=s[i],o[i]=a):n[i]=new ze(t,s[i]);for(;i<l;++i)(a=e[i])&&(r[i]=a)}function bs(t,e,n,o,r,s,i){var a,l,u=new Map,c=e.length,f=s.length,d=new Array(c),g;for(a=0;a<c;++a)(l=e[a])&&(d[a]=g=i.call(l,l.__data__,a,e)+"",u.has(g)?r[a]=l:u.set(g,l));for(a=0;a<f;++a)g=i.call(t,s[a],a,s)+"",(l=u.get(g))?(o[a]=l,l.__data__=s[a],u.delete(g)):n[a]=new ze(t,s[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(d[a])===l&&(r[a]=l)}function Ns(t){return t.__data__}function Ms(t,e){if(!arguments.length)return Array.from(this,Ns);var n=e?bs:Es,o=this._parents,r=this._groups;typeof t!="function"&&(t=_s(t));for(var s=r.length,i=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=o[u],f=r[u],d=f.length,g=Cs(t.call(c,c&&c.__data__,u,o)),y=g.length,p=a[u]=new Array(y),v=i[u]=new Array(y),m=l[u]=new Array(d);n(c,f,p,v,m,g,e);for(var _=0,C=0,w,A;_<y;++_)if(w=p[_]){for(_>=C&&(C=_+1);!(A=v[C])&&++C<y;);w._next=A||null}}return i=new lt(i,o),i._enter=a,i._exit=l,i}function Cs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function As(){return new lt(this._exit||this._groups.map(zo),this._parents)}function Ts(t,e,n){var o=this.enter(),r=this,s=this.exit();return typeof t=="function"?(o=t(o),o&&(o=o.selection())):o=o.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),o&&r?o.merge(r).order():r}function ks(t){for(var e=t.selection?t.selection():t,n=this._groups,o=e._groups,r=n.length,s=o.length,i=Math.min(r,s),a=new Array(r),l=0;l<i;++l)for(var u=n[l],c=o[l],f=u.length,d=a[l]=new Array(f),g,y=0;y<f;++y)(g=u[y]||c[y])&&(d[y]=g);for(;l<r;++l)a[l]=n[l];return new lt(a,this._parents)}function Ps(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var o=t[e],r=o.length-1,s=o[r],i;--r>=0;)(i=o[r])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function $s(t){t||(t=Ds);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s){for(var i=n[s],a=i.length,l=r[s]=new Array(a),u,c=0;c<a;++c)(u=i[c])&&(l[c]=u);l.sort(e)}return new lt(r,this._parents).order()}function Ds(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Rs(){return Array.from(this)}function Is(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,s=o.length;r<s;++r){var i=o[r];if(i)return i}return null}function Bs(){let t=0;for(const e of this)++t;return t}function Os(){return!this.node()}function Hs(t){for(var e=this._groups,n=0,o=e.length;n<o;++n)for(var r=e[n],s=0,i=r.length,a;s<i;++s)(a=r[s])&&t.call(a,a.__data__,s,r);return this}function Ls(t){return function(){this.removeAttribute(t)}}function Vs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fs(t,e){return function(){this.setAttribute(t,e)}}function Ys(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Xs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ks(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ws(t,e){var n=Xe(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((e==null?n.local?Vs:Ls:typeof e=="function"?n.local?Ks:Xs:n.local?Ys:Fs)(n,e))}function Ro(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Zs(t){return function(){this.style.removeProperty(t)}}function Us(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Gs(t,e,n){return function(){var o=e.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function qs(t,e,n){return arguments.length>1?this.each((e==null?Zs:typeof e=="function"?Gs:Us)(t,e,n??"")):ne(this.node(),t)}function ne(t,e){return t.style.getPropertyValue(e)||Ro(t).getComputedStyle(t,null).getPropertyValue(e)}function Qs(t){return function(){delete this[t]}}function Js(t,e){return function(){this[t]=e}}function js(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ta(t,e){return arguments.length>1?this.each((e==null?Qs:typeof e=="function"?js:Js)(t,e)):this.node()[t]}function Io(t){return t.trim().split(/^|\s+/)}function _n(t){return t.classList||new Bo(t)}function Bo(t){this._node=t,this._names=Io(t.getAttribute("class")||"")}Bo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Oo(t,e){for(var n=_n(t),o=-1,r=e.length;++o<r;)n.add(e[o])}function Ho(t,e){for(var n=_n(t),o=-1,r=e.length;++o<r;)n.remove(e[o])}function ea(t){return function(){Oo(this,t)}}function na(t){return function(){Ho(this,t)}}function oa(t,e){return function(){(e.apply(this,arguments)?Oo:Ho)(this,t)}}function ra(t,e){var n=Io(t+"");if(arguments.length<2){for(var o=_n(this.node()),r=-1,s=n.length;++r<s;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?oa:e?ea:na)(n,e))}function ia(){this.textContent=""}function sa(t){return function(){this.textContent=t}}function aa(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ca(t){return arguments.length?this.each(t==null?ia:(typeof t=="function"?aa:sa)(t)):this.node().textContent}function la(){this.innerHTML=""}function ua(t){return function(){this.innerHTML=t}}function fa(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function da(t){return arguments.length?this.each(t==null?la:(typeof t=="function"?fa:ua)(t)):this.node().innerHTML}function ha(){this.nextSibling&&this.parentNode.appendChild(this)}function ga(){return this.each(ha)}function pa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ma(){return this.each(pa)}function ya(t){var e=typeof t=="function"?t:ko(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function wa(){return null}function xa(t,e){var n=typeof t=="function"?t:ko(t),o=e==null?wa:typeof e=="function"?e:vn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Sa(){var t=this.parentNode;t&&t.removeChild(this)}function va(){return this.each(Sa)}function _a(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ea(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ba(t){return this.select(t?Ea:_a)}function Na(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ma(t){return function(e){t.call(this,e,this.__data__)}}function Ca(t){return t.trim().split(/^|\s+/).map(function(e){var n="",o=e.indexOf(".");return o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),{type:e,name:n}})}function Aa(t){return function(){var e=this.__on;if(e){for(var n=0,o=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++o]=s;++o?e.length=o:delete this.__on}}}function Ta(t,e,n){return function(){var o=this.__on,r,s=Ma(e);if(o){for(var i=0,a=o.length;i<a;++i)if((r=o[i]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},o?o.push(r):this.__on=[r]}}function ka(t,e,n){var o=Ca(t+""),r,s=o.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<s;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value}return}for(a=e?Ta:Aa,r=0;r<s;++r)this.each(a(o[r],e,n));return this}function Lo(t,e,n){var o=Ro(t),r=o.CustomEvent;typeof r=="function"?r=new r(e,n):(r=o.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Pa(t,e){return function(){return Lo(this,t,e)}}function $a(t,e){return function(){return Lo(this,t,e.apply(this,arguments))}}function Da(t,e){return this.each((typeof e=="function"?$a:Pa)(t,e))}function*za(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,s=o.length,i;r<s;++r)(i=o[r])&&(yield i)}var Vo=[null];function lt(t,e){this._groups=t,this._parents=e}function ve(){return new lt([[document.documentElement]],Vo)}function Ra(){return this}lt.prototype=ve.prototype={constructor:lt,select:as,selectAll:fs,selectChild:ps,selectChildren:xs,filter:Ss,data:Ms,enter:vs,exit:As,join:Ts,merge:ks,selection:Ra,order:Ps,sort:$s,call:zs,nodes:Rs,node:Is,size:Bs,empty:Os,each:Hs,attr:Ws,style:qs,property:ta,classed:ra,text:ca,html:da,raise:ga,lower:ma,append:ya,insert:xa,remove:va,clone:ba,datum:Na,on:ka,dispatch:Da,[Symbol.iterator]:za};function ht(t){return typeof t=="string"?new lt([[document.querySelector(t)]],[document.documentElement]):new lt([[t]],Vo)}function Ia(t){let e;for(;e=t.sourceEvent;)t=e;return t}function yt(t,e){if(t=Ia(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ba={passive:!1},me={capture:!0,passive:!1};function je(t){t.stopImmediatePropagation()}function Jt(t){t.preventDefault(),t.stopImmediatePropagation()}function Fo(t){var e=t.document.documentElement,n=ht(t).on("dragstart.drag",Jt,me);"onselectstart"in e?n.on("selectstart.drag",Jt,me):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Yo(t,e){var n=t.document.documentElement,o=ht(t).on("dragstart.drag",null);e&&(o.on("click.drag",Jt,me),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const be=t=>()=>t;function ln(t,{sourceEvent:e,subject:n,target:o,identifier:r,active:s,x:i,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}ln.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Oa(t){return!t.ctrlKey&&!t.button}function Ha(){return this.parentNode}function La(t,e){return e??{x:t.x,y:t.y}}function Va(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fa(){var t=Oa,e=Ha,n=La,o=Va,r={},s=Ye("start","drag","end"),i=0,a,l,u,c,f=0;function d(w){w.on("mousedown.drag",g).filter(o).on("touchstart.drag",v).on("touchmove.drag",m,Ba).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(w,A){if(!(c||!t.call(this,w,A))){var I=C(this,e.call(this,w,A),w,A,"mouse");I&&(ht(w.view).on("mousemove.drag",y,me).on("mouseup.drag",p,me),Fo(w.view),je(w),u=!1,a=w.clientX,l=w.clientY,I("start",w))}}function y(w){if(Jt(w),!u){var A=w.clientX-a,I=w.clientY-l;u=A*A+I*I>f}r.mouse("drag",w)}function p(w){ht(w.view).on("mousemove.drag mouseup.drag",null),Yo(w.view,u),Jt(w),r.mouse("end",w)}function v(w,A){if(t.call(this,w,A)){var I=w.changedTouches,R=e.call(this,w,A),P=I.length,D,L;for(D=0;D<P;++D)(L=C(this,R,w,A,I[D].identifier,I[D]))&&(je(w),L("start",w,I[D]))}}function m(w){var A=w.changedTouches,I=A.length,R,P;for(R=0;R<I;++R)(P=r[A[R].identifier])&&(Jt(w),P("drag",w,A[R]))}function _(w){var A=w.changedTouches,I=A.length,R,P;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),R=0;R<I;++R)(P=r[A[R].identifier])&&(je(w),P("end",w,A[R]))}function C(w,A,I,R,P,D){var L=s.copy(),B=yt(D||I,A),H,b,h;if((h=n.call(w,new ln("beforestart",{sourceEvent:I,target:d,identifier:P,active:i,x:B[0],y:B[1],dx:0,dy:0,dispatch:L}),R))!=null)return H=h.x-B[0]||0,b=h.y-B[1]||0,function E(S,T,$){var x=B,M;switch(S){case"start":r[P]=E,M=i++;break;case"end":delete r[P],--i;case"drag":B=yt($||T,A),M=i;break}L.call(S,w,new ln(S,{sourceEvent:T,subject:h,target:d,identifier:P,active:M,x:B[0]+H,y:B[1]+b,dx:B[0]-x[0],dy:B[1]-x[1],dispatch:L}),R)}}return d.filter=function(w){return arguments.length?(t=typeof w=="function"?w:be(!!w),d):t},d.container=function(w){return arguments.length?(e=typeof w=="function"?w:be(w),d):e},d.subject=function(w){return arguments.length?(n=typeof w=="function"?w:be(w),d):n},d.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:be(!!w),d):o},d.on=function(){var w=s.on.apply(s,arguments);return w===s?d:w},d.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,d):Math.sqrt(f)},d}var oe=0,ge=0,le=0,Xo=1e3,Re,pe,Ie=0,Ft=0,Ke=0,ye=typeof performance=="object"&&performance.now?performance:Date,Ko=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function En(){return Ft||(Ko(Ya),Ft=ye.now()+Ke)}function Ya(){Ft=0}function Be(){this._call=this._time=this._next=null}Be.prototype=Wo.prototype={constructor:Be,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?En():+n)+(e==null?0:+e),!this._next&&pe!==this&&(pe?pe._next=this:Re=this,pe=this),this._call=t,this._time=n,un()},stop:function(){this._call&&(this._call=null,this._time=1/0,un())}};function Wo(t,e,n){var o=new Be;return o.restart(t,e,n),o}function Xa(){En(),++oe;for(var t=Re,e;t;)(e=Ft-t._time)>=0&&t._call.call(void 0,e),t=t._next;--oe}function Un(){Ft=(Ie=ye.now())+Ke,oe=ge=0;try{Xa()}finally{oe=0,Wa(),Ft=0}}function Ka(){var t=ye.now(),e=t-Ie;e>Xo&&(Ke-=e,Ie=t)}function Wa(){for(var t,e=Re,n,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Re=n);pe=t,un(o)}function un(t){if(!oe){ge&&(ge=clearTimeout(ge));var e=t-Ft;e>24?(t<1/0&&(ge=setTimeout(Un,t-ye.now()-Ke)),le&&(le=clearInterval(le))):(le||(Ie=ye.now(),le=setInterval(Ka,Xo)),oe=1,Ko(Un))}}function Gn(t,e,n){var o=new Be;return e=e==null?0:+e,o.restart(r=>{o.stop(),t(r+e)},e,n),o}var Za=Ye("start","end","cancel","interrupt"),Ua=[],Zo=0,qn=1,fn=2,Pe=3,Qn=4,dn=5,$e=6;function We(t,e,n,o,r,s){var i=t.__transition;if(!i)t.__transition={};else if(n in i)return;Ga(t,n,{name:e,index:o,group:r,on:Za,tween:Ua,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Zo})}function bn(t,e){var n=gt(t,e);if(n.state>Zo)throw new Error("too late; already scheduled");return n}function wt(t,e){var n=gt(t,e);if(n.state>Pe)throw new Error("too late; already running");return n}function gt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ga(t,e,n){var o=t.__transition,r;o[e]=n,n.timer=Wo(s,0,n.time);function s(u){n.state=qn,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var c,f,d,g;if(n.state!==qn)return l();for(c in o)if(g=o[c],g.name===n.name){if(g.state===Pe)return Gn(i);g.state===Qn?(g.state=$e,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete o[c]):+c<e&&(g.state=$e,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete o[c])}if(Gn(function(){n.state===Pe&&(n.state=Qn,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=fn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===fn){for(n.state=Pe,r=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(g=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++f]=g);r.length=f+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=dn,1),f=-1,d=r.length;++f<d;)r[f].call(t,c);n.state===dn&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=$e,n.timer.stop(),delete o[e];for(var u in o)return;delete t.__transition}}function De(t,e){var n=t.__transition,o,r,s=!0,i;if(n){e=e==null?null:e+"";for(i in n){if((o=n[i]).name!==e){s=!1;continue}r=o.state>fn&&o.state<dn,o.state=$e,o.timer.stop(),o.on.call(r?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete n[i]}s&&delete t.__transition}}function qa(t){return this.each(function(){De(this,t)})}function Qa(t,e){var n,o;return function(){var r=wt(this,t),s=r.tween;if(s!==n){o=n=s;for(var i=0,a=o.length;i<a;++i)if(o[i].name===e){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function Ja(t,e,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=wt(this,t),i=s.tween;if(i!==o){r=(o=i).slice();for(var a={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=a;break}l===u&&r.push(a)}s.tween=r}}function ja(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o=gt(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===t)return i.value;return null}return this.each((e==null?Qa:Ja)(n,t,e))}function Nn(t,e,n){var o=t._id;return t.each(function(){var r=wt(this,o);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return gt(r,o).value[e]}}function Uo(t,e){var n;return(typeof e=="number"?Ht:e instanceof Ln?Vn:(n=Ln(e))?(e=n,Vn):vi)(t,e)}function tc(t){return function(){this.removeAttribute(t)}}function ec(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nc(t,e,n){var o,r=n+"",s;return function(){var i=this.getAttribute(t);return i===r?null:i===o?s:s=e(o=i,n)}}function oc(t,e,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(t.space,t.local);return i===r?null:i===o?s:s=e(o=i,n)}}function rc(t,e,n){var o,r,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=a+"",i===l?null:i===o&&l===r?s:(r=l,s=e(o=i,a)))}}function ic(t,e,n){var o,r,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=a+"",i===l?null:i===o&&l===r?s:(r=l,s=e(o=i,a)))}}function sc(t,e){var n=Xe(t),o=n==="transform"?Ni:Uo;return this.attrTween(t,typeof e=="function"?(n.local?ic:rc)(n,o,Nn(this,"attr."+t,e)):e==null?(n.local?ec:tc)(n):(n.local?oc:nc)(n,o,e))}function ac(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function cc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function lc(t,e){var n,o;function r(){var s=e.apply(this,arguments);return s!==o&&(n=(o=s)&&cc(t,s)),n}return r._value=e,r}function uc(t,e){var n,o;function r(){var s=e.apply(this,arguments);return s!==o&&(n=(o=s)&&ac(t,s)),n}return r._value=e,r}function fc(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var o=Xe(t);return this.tween(n,(o.local?lc:uc)(o,e))}function dc(t,e){return function(){bn(this,t).delay=+e.apply(this,arguments)}}function hc(t,e){return e=+e,function(){bn(this,t).delay=e}}function gc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?dc:hc)(e,t)):gt(this.node(),e).delay}function pc(t,e){return function(){wt(this,t).duration=+e.apply(this,arguments)}}function mc(t,e){return e=+e,function(){wt(this,t).duration=e}}function yc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?pc:mc)(e,t)):gt(this.node(),e).duration}function wc(t,e){if(typeof e!="function")throw new Error;return function(){wt(this,t).ease=e}}function xc(t){var e=this._id;return arguments.length?this.each(wc(e,t)):gt(this.node(),e).ease}function Sc(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;wt(this,t).ease=n}}function vc(t){if(typeof t!="function")throw new Error;return this.each(Sc(this._id,t))}function _c(t){typeof t!="function"&&(t=$o(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var s=e[r],i=s.length,a=o[r]=[],l,u=0;u<i;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&a.push(l);return new _t(o,this._parents,this._name,this._id)}function Ec(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,o=e.length,r=n.length,s=Math.min(o,r),i=new Array(o),a=0;a<s;++a)for(var l=e[a],u=n[a],c=l.length,f=i[a]=new Array(c),d,g=0;g<c;++g)(d=l[g]||u[g])&&(f[g]=d);for(;a<o;++a)i[a]=e[a];return new _t(i,this._parents,this._name,this._id)}function bc(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Nc(t,e,n){var o,r,s=bc(e)?bn:wt;return function(){var i=s(this,t),a=i.on;a!==o&&(r=(o=a).copy()).on(e,n),i.on=r}}function Mc(t,e){var n=this._id;return arguments.length<2?gt(this.node(),n).on.on(t):this.each(Nc(n,t,e))}function Cc(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ac(){return this.on("end.remove",Cc(this._id))}function Tc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=vn(t));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var a=o[i],l=a.length,u=s[i]=new Array(l),c,f,d=0;d<l;++d)(c=a[d])&&(f=t.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),u[d]=f,We(u[d],e,n,d,u,gt(c,n)));return new _t(s,this._parents,e,n)}function kc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Po(t));for(var o=this._groups,r=o.length,s=[],i=[],a=0;a<r;++a)for(var l=o[a],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var d=t.call(c,c.__data__,f,l),g,y=gt(c,n),p=0,v=d.length;p<v;++p)(g=d[p])&&We(g,e,n,p,d,y);s.push(d),i.push(c)}return new _t(s,i,e,n)}var Pc=ve.prototype.constructor;function $c(){return new Pc(this._groups,this._parents)}function Dc(t,e){var n,o,r;return function(){var s=ne(this,t),i=(this.style.removeProperty(t),ne(this,t));return s===i?null:s===n&&i===o?r:r=e(n=s,o=i)}}function Go(t){return function(){this.style.removeProperty(t)}}function zc(t,e,n){var o,r=n+"",s;return function(){var i=ne(this,t);return i===r?null:i===o?s:s=e(o=i,n)}}function Rc(t,e,n){var o,r,s;return function(){var i=ne(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),ne(this,t))),i===l?null:i===o&&l===r?s:(r=l,s=e(o=i,a))}}function Ic(t,e){var n,o,r,s="style."+e,i="end."+s,a;return function(){var l=wt(this,t),u=l.on,c=l.value[s]==null?a||(a=Go(e)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(i,r=c),l.on=o}}function Bc(t,e,n){var o=(t+="")=="transform"?bi:Uo;return e==null?this.styleTween(t,Dc(t,o)).on("end.style."+t,Go(t)):typeof e=="function"?this.styleTween(t,Rc(t,o,Nn(this,"style."+t,e))).each(Ic(this._id,t)):this.styleTween(t,zc(t,o,e),n).on("end.style."+t,null)}function Oc(t,e,n){return function(o){this.style.setProperty(t,e.call(this,o),n)}}function Hc(t,e,n){var o,r;function s(){var i=e.apply(this,arguments);return i!==r&&(o=(r=i)&&Oc(t,i,n)),o}return s._value=e,s}function Lc(t,e,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(e==null)return this.tween(o,null);if(typeof e!="function")throw new Error;return this.tween(o,Hc(t,e,n??""))}function Vc(t){return function(){this.textContent=t}}function Fc(t){return function(){var e=t(this);this.textContent=e??""}}function Yc(t){return this.tween("text",typeof t=="function"?Fc(Nn(this,"text",t)):Vc(t==null?"":t+""))}function Xc(t){return function(e){this.textContent=t.call(this,e)}}function Kc(t){var e,n;function o(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Xc(r)),e}return o._value=t,o}function Wc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Kc(t))}function Zc(){for(var t=this._name,e=this._id,n=qo(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,l,u=0;u<a;++u)if(l=i[u]){var c=gt(l,e);We(l,t,n,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new _t(o,this._parents,t,n)}function Uc(){var t,e,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var a={value:i},l={value:function(){--r===0&&s()}};n.each(function(){var u=wt(this,o),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),r===0&&s()})}var Gc=0;function _t(t,e,n,o){this._groups=t,this._parents=e,this._name=n,this._id=o}function qo(){return++Gc}var St=ve.prototype;_t.prototype={constructor:_t,select:Tc,selectAll:kc,selectChild:St.selectChild,selectChildren:St.selectChildren,filter:_c,merge:Ec,selection:$c,transition:Zc,call:St.call,nodes:St.nodes,node:St.node,size:St.size,empty:St.empty,each:St.each,on:Mc,attr:sc,attrTween:fc,style:Bc,styleTween:Lc,text:Yc,textTween:Wc,remove:Ac,tween:ja,delay:gc,duration:yc,ease:xc,easeVarying:vc,end:Uc,[Symbol.iterator]:St[Symbol.iterator]};function qc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Qc={time:null,delay:0,duration:250,ease:qc};function Jc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function jc(t){var e,n;t instanceof _t?(e=t._id,t=t._name):(e=qo(),(n=Qc).time=En(),t=t==null?null:t+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,l,u=0;u<a;++u)(l=i[u])&&We(l,t,e,u,i,n||Jc(l,e));return new _t(o,this._parents,t,e)}ve.prototype.interrupt=qa;ve.prototype.transition=jc;const Ne=t=>()=>t;function tl(t,{sourceEvent:e,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function vt(t,e,n){this.k=t,this.x=e,this.y=n}vt.prototype={constructor:vt,scale:function(t){return t===1?this:new vt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new vt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Tt=new vt(1,0,0);vt.prototype;function tn(t){t.stopImmediatePropagation()}function ue(t){t.preventDefault(),t.stopImmediatePropagation()}function el(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function nl(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Jn(){return this.__zoom||Tt}function ol(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function rl(){return navigator.maxTouchPoints||"ontouchstart"in this}function il(t,e,n){var o=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],i=t.invertY(e[1][1])-n[1][1];return t.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function sl(){var t=el,e=nl,n=il,o=ol,r=rl,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ti,u=Ye("start","zoom","end"),c,f,d,g=500,y=150,p=0,v=10;function m(h){h.property("__zoom",Jn).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",L).filter(r).on("touchstart.zoom",B).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",b).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(h,E,S,T){var $=h.selection?h.selection():h;$.property("__zoom",Jn),h!==$?A(h,E,S,T):$.interrupt().each(function(){I(this,arguments).event(T).start().zoom(null,typeof E=="function"?E.apply(this,arguments):E).end()})},m.scaleBy=function(h,E,S,T){m.scaleTo(h,function(){var $=this.__zoom.k,x=typeof E=="function"?E.apply(this,arguments):E;return $*x},S,T)},m.scaleTo=function(h,E,S,T){m.transform(h,function(){var $=e.apply(this,arguments),x=this.__zoom,M=S==null?w($):typeof S=="function"?S.apply(this,arguments):S,k=x.invert(M),O=typeof E=="function"?E.apply(this,arguments):E;return n(C(_(x,O),M,k),$,i)},S,T)},m.translateBy=function(h,E,S,T){m.transform(h,function(){return n(this.__zoom.translate(typeof E=="function"?E.apply(this,arguments):E,typeof S=="function"?S.apply(this,arguments):S),e.apply(this,arguments),i)},null,T)},m.translateTo=function(h,E,S,T,$){m.transform(h,function(){var x=e.apply(this,arguments),M=this.__zoom,k=T==null?w(x):typeof T=="function"?T.apply(this,arguments):T;return n(Tt.translate(k[0],k[1]).scale(M.k).translate(typeof E=="function"?-E.apply(this,arguments):-E,typeof S=="function"?-S.apply(this,arguments):-S),x,i)},T,$)};function _(h,E){return E=Math.max(s[0],Math.min(s[1],E)),E===h.k?h:new vt(E,h.x,h.y)}function C(h,E,S){var T=E[0]-S[0]*h.k,$=E[1]-S[1]*h.k;return T===h.x&&$===h.y?h:new vt(h.k,T,$)}function w(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function A(h,E,S,T){h.on("start.zoom",function(){I(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(T).end()}).tween("zoom",function(){var $=this,x=arguments,M=I($,x).event(T),k=e.apply($,x),O=S==null?w(k):typeof S=="function"?S.apply($,x):S,V=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),F=$.__zoom,K=typeof E=="function"?E.apply($,x):E,Z=l(F.invert(O).concat(V/F.k),K.invert(O).concat(V/K.k));return function(U){if(U===1)U=K;else{var G=Z(U),Q=V/G[2];U=new vt(Q,O[0]-G[0]*Q,O[1]-G[1]*Q)}M.zoom(null,U)}})}function I(h,E,S){return!S&&h.__zooming||new R(h,E)}function R(h,E){this.that=h,this.args=E,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,E),this.taps=0}R.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,E){return this.mouse&&h!=="mouse"&&(this.mouse[1]=E.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=E.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=E.invert(this.touch1[0])),this.that.__zoom=E,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var E=ht(this.that).datum();u.call(h,this.that,new tl(h,{sourceEvent:this.sourceEvent,target:m,type:h,transform:this.that.__zoom,dispatch:u}),E)}};function P(h,...E){if(!t.apply(this,arguments))return;var S=I(this,E).event(h),T=this.__zoom,$=Math.max(s[0],Math.min(s[1],T.k*Math.pow(2,o.apply(this,arguments)))),x=yt(h);if(S.wheel)(S.mouse[0][0]!==x[0]||S.mouse[0][1]!==x[1])&&(S.mouse[1]=T.invert(S.mouse[0]=x)),clearTimeout(S.wheel);else{if(T.k===$)return;S.mouse=[x,T.invert(x)],De(this),S.start()}ue(h),S.wheel=setTimeout(M,y),S.zoom("mouse",n(C(_(T,$),S.mouse[0],S.mouse[1]),S.extent,i));function M(){S.wheel=null,S.end()}}function D(h,...E){if(d||!t.apply(this,arguments))return;var S=h.currentTarget,T=I(this,E,!0).event(h),$=ht(h.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",V,!0),x=yt(h,S),M=h.clientX,k=h.clientY;Fo(h.view),tn(h),T.mouse=[x,this.__zoom.invert(x)],De(this),T.start();function O(F){if(ue(F),!T.moved){var K=F.clientX-M,Z=F.clientY-k;T.moved=K*K+Z*Z>p}T.event(F).zoom("mouse",n(C(T.that.__zoom,T.mouse[0]=yt(F,S),T.mouse[1]),T.extent,i))}function V(F){$.on("mousemove.zoom mouseup.zoom",null),Yo(F.view,T.moved),ue(F),T.event(F).end()}}function L(h,...E){if(t.apply(this,arguments)){var S=this.__zoom,T=yt(h.changedTouches?h.changedTouches[0]:h,this),$=S.invert(T),x=S.k*(h.shiftKey?.5:2),M=n(C(_(S,x),T,$),e.apply(this,E),i);ue(h),a>0?ht(this).transition().duration(a).call(A,M,T,h):ht(this).call(m.transform,M,T,h)}}function B(h,...E){if(t.apply(this,arguments)){var S=h.touches,T=S.length,$=I(this,E,h.changedTouches.length===T).event(h),x,M,k,O;for(tn(h),M=0;M<T;++M)k=S[M],O=yt(k,this),O=[O,this.__zoom.invert(O),k.identifier],$.touch0?!$.touch1&&$.touch0[2]!==O[2]&&($.touch1=O,$.taps=0):($.touch0=O,x=!0,$.taps=1+!!c);c&&(c=clearTimeout(c)),x&&($.taps<2&&(f=O[0],c=setTimeout(function(){c=null},g)),De(this),$.start())}}function H(h,...E){if(this.__zooming){var S=I(this,E).event(h),T=h.changedTouches,$=T.length,x,M,k,O;for(ue(h),x=0;x<$;++x)M=T[x],k=yt(M,this),S.touch0&&S.touch0[2]===M.identifier?S.touch0[0]=k:S.touch1&&S.touch1[2]===M.identifier&&(S.touch1[0]=k);if(M=S.that.__zoom,S.touch1){var V=S.touch0[0],F=S.touch0[1],K=S.touch1[0],Z=S.touch1[1],U=(U=K[0]-V[0])*U+(U=K[1]-V[1])*U,G=(G=Z[0]-F[0])*G+(G=Z[1]-F[1])*G;M=_(M,Math.sqrt(U/G)),k=[(V[0]+K[0])/2,(V[1]+K[1])/2],O=[(F[0]+Z[0])/2,(F[1]+Z[1])/2]}else if(S.touch0)k=S.touch0[0],O=S.touch0[1];else return;S.zoom("touch",n(C(M,k,O),S.extent,i))}}function b(h,...E){if(this.__zooming){var S=I(this,E).event(h),T=h.changedTouches,$=T.length,x,M;for(tn(h),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),x=0;x<$;++x)M=T[x],S.touch0&&S.touch0[2]===M.identifier?delete S.touch0:S.touch1&&S.touch1[2]===M.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(M=yt(M,this),Math.hypot(f[0]-M[0],f[1]-M[1])<v)){var k=ht(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return m.wheelDelta=function(h){return arguments.length?(o=typeof h=="function"?h:Ne(+h),m):o},m.filter=function(h){return arguments.length?(t=typeof h=="function"?h:Ne(!!h),m):t},m.touchable=function(h){return arguments.length?(r=typeof h=="function"?h:Ne(!!h),m):r},m.extent=function(h){return arguments.length?(e=typeof h=="function"?h:Ne([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),m):e},m.scaleExtent=function(h){return arguments.length?(s[0]=+h[0],s[1]=+h[1],m):[s[0],s[1]]},m.translateExtent=function(h){return arguments.length?(i[0][0]=+h[0][0],i[1][0]=+h[1][0],i[0][1]=+h[0][1],i[1][1]=+h[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(h){return arguments.length?(n=h,m):n},m.duration=function(h){return arguments.length?(a=+h,m):a},m.interpolate=function(h){return arguments.length?(l=h,m):l},m.on=function(){var h=u.on.apply(u,arguments);return h===u?m:h},m.clickDistance=function(h){return arguments.length?(p=(h=+h)*h,m):Math.sqrt(p)},m.tapDistance=function(h){return arguments.length?(v=+h,m):v},m}const Ze=N.createContext(null),al=Ze.Provider,Et={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Qo=Et.error001();function j(t,e){const n=N.useContext(Ze);if(n===null)throw new Error(Qo);return To(n,t,e)}const nt=()=>{const t=N.useContext(Ze);if(t===null)throw new Error(Qo);return N.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},cl=t=>t.userSelectionActive?"none":"all";function ll({position:t,children:e,className:n,style:o,...r}){const s=j(cl),i=`${t}`.split("-");return z.createElement("div",{className:ft(["react-flow__panel",n,...i]),style:{...o,pointerEvents:s},...r},e)}function ul({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:z.createElement(ll,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},z.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const fl=({x:t,y:e,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c})=>{const f=N.useRef(null),[d,g]=N.useState({x:0,y:0,width:0,height:0}),y=ft(["react-flow__edge-textwrapper",u]);return N.useEffect(()=>{if(f.current){const p=f.current.getBBox();g({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),typeof n>"u"||!n?null:z.createElement("g",{transform:`translate(${t-d.width/2} ${e-d.height/2})`,className:y,visibility:d.width?"visible":"hidden",...c},r&&z.createElement("rect",{width:d.width+2*i[0],x:-i[0],y:-i[1],height:d.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),z.createElement("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:f,style:o},n),l)};var dl=N.memo(fl);const Mn=t=>({width:t.offsetWidth,height:t.offsetHeight}),re=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Cn=(t={x:0,y:0},e)=>({x:re(t.x,e[0][0],e[1][0]),y:re(t.y,e[0][1],e[1][1])}),jn=(t,e,n)=>t<e?re(Math.abs(t-e),1,50)/50:t>n?-re(Math.abs(t-n),1,50)/50:0,Jo=(t,e)=>{const n=jn(t.x,35,e.width-35)*20,o=jn(t.y,35,e.height-35)*20;return[n,o]},jo=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},tr=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),we=({x:t,y:e,width:n,height:o})=>({x:t,y:e,x2:t+n,y2:e+o}),er=({x:t,y:e,x2:n,y2:o})=>({x:t,y:e,width:n-t,height:o-e}),to=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),ju=(t,e)=>er(tr(we(t),we(e))),hn=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),o=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*o)},hl=t=>ut(t.width)&&ut(t.height)&&ut(t.x)&&ut(t.y),ut=t=>!isNaN(t)&&isFinite(t),et=Symbol.for("internals"),nr=["Enter"," ","Escape"],gl=(t,e)=>{},pl=t=>"nativeEvent"in t;function gn(t){var r,s;const e=pl(t)?t.nativeEvent:t,n=((s=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:s[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const or=t=>"clientX"in t,kt=(t,e)=>{var s,i;const n=or(t),o=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,r=n?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:o-((e==null?void 0:e.left)??0),y:r-((e==null?void 0:e.top)??0)}},Oe=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},_e=({id:t,path:e,labelX:n,labelY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:d,interactionWidth:g=20})=>z.createElement(z.Fragment,null,z.createElement("path",{id:t,style:c,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:d}),g&&z.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),r&&ut(n)&&ut(o)?z.createElement(dl,{x:n,y:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u}):null);_e.displayName="BaseEdge";function fe(t,e,n){return n===void 0?n:o=>{const r=e().edges.find(s=>s.id===t);r&&n(o,{...r})}}function rr({sourceX:t,sourceY:e,targetX:n,targetY:o}){const r=Math.abs(n-t)/2,s=n<t?n+r:n-r,i=Math.abs(o-e)/2,a=o<e?o+i:o-i;return[s,a,r,i]}function ir({sourceX:t,sourceY:e,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:a}){const l=t*.125+r*.375+i*.375+n*.125,u=e*.125+s*.375+a*.375+o*.125,c=Math.abs(l-t),f=Math.abs(u-e);return[l,u,c,f]}var Yt;(function(t){t.Strict="strict",t.Loose="loose"})(Yt||(Yt={}));var Vt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Vt||(Vt={}));var xe;(function(t){t.Partial="partial",t.Full="full"})(xe||(xe={}));var At;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(At||(At={}));var He;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(He||(He={}));var Y;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Y||(Y={}));function eo({pos:t,x1:e,y1:n,x2:o,y2:r}){return t===Y.Left||t===Y.Right?[.5*(e+o),n]:[e,.5*(n+r)]}function sr({sourceX:t,sourceY:e,sourcePosition:n=Y.Bottom,targetX:o,targetY:r,targetPosition:s=Y.Top}){const[i,a]=eo({pos:n,x1:t,y1:e,x2:o,y2:r}),[l,u]=eo({pos:s,x1:o,y1:r,x2:t,y2:e}),[c,f,d,g]=ir({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${t},${e} C${i},${a} ${l},${u} ${o},${r}`,c,f,d,g]}const An=N.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,sourcePosition:r=Y.Bottom,targetPosition:s=Y.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:g,markerStart:y,interactionWidth:p})=>{const[v,m,_]=sr({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:o,targetPosition:s});return z.createElement(_e,{path:v,labelX:m,labelY:_,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:g,markerStart:y,interactionWidth:p})});An.displayName="SimpleBezierEdge";const no={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},ml=({source:t,sourcePosition:e=Y.Bottom,target:n})=>e===Y.Left||e===Y.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},oo=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function yl({source:t,sourcePosition:e=Y.Bottom,target:n,targetPosition:o=Y.Top,center:r,offset:s}){const i=no[e],a=no[o],l={x:t.x+i.x*s,y:t.y+i.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},c=ml({source:l,sourcePosition:e,target:u}),f=c.x!==0?"x":"y",d=c[f];let g=[],y,p;const v={x:0,y:0},m={x:0,y:0},[_,C,w,A]=rr({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(i[f]*a[f]===-1){y=r.x||_,p=r.y||C;const R=[{x:y,y:l.y},{x:y,y:u.y}],P=[{x:l.x,y:p},{x:u.x,y:p}];i[f]===d?g=f==="x"?R:P:g=f==="x"?P:R}else{const R=[{x:l.x,y:u.y}],P=[{x:u.x,y:l.y}];if(f==="x"?g=i.x===d?P:R:g=i.y===d?R:P,e===o){const b=Math.abs(t[f]-n[f]);if(b<=s){const h=Math.min(s-1,s-b);i[f]===d?v[f]=(l[f]>t[f]?-1:1)*h:m[f]=(u[f]>n[f]?-1:1)*h}}if(e!==o){const b=f==="x"?"y":"x",h=i[f]===a[b],E=l[b]>u[b],S=l[b]<u[b];(i[f]===1&&(!h&&E||h&&S)||i[f]!==1&&(!h&&S||h&&E))&&(g=f==="x"?R:P)}const D={x:l.x+v.x,y:l.y+v.y},L={x:u.x+m.x,y:u.y+m.y},B=Math.max(Math.abs(D.x-g[0].x),Math.abs(L.x-g[0].x)),H=Math.max(Math.abs(D.y-g[0].y),Math.abs(L.y-g[0].y));B>=H?(y=(D.x+L.x)/2,p=g[0].y):(y=g[0].x,p=(D.y+L.y)/2)}return[[t,{x:l.x+v.x,y:l.y+v.y},...g,{x:u.x+m.x,y:u.y+m.y},n],y,p,w,A]}function wl(t,e,n,o){const r=Math.min(oo(t,e)/2,oo(e,n)/2,o),{x:s,y:i}=e;if(t.x===s&&s===n.x||t.y===i&&i===n.y)return`L${s} ${i}`;if(t.y===i){const u=t.x<n.x?-1:1,c=t.y<n.y?1:-1;return`L ${s+r*u},${i}Q ${s},${i} ${s},${i+r*c}`}const a=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${s},${i+r*l}Q ${s},${i} ${s+r*a},${i}`}function pn({sourceX:t,sourceY:e,sourcePosition:n=Y.Bottom,targetX:o,targetY:r,targetPosition:s=Y.Top,borderRadius:i=5,centerX:a,centerY:l,offset:u=20}){const[c,f,d,g,y]=yl({source:{x:t,y:e},sourcePosition:n,target:{x:o,y:r},targetPosition:s,center:{x:a,y:l},offset:u});return[c.reduce((v,m,_)=>{let C="";return _>0&&_<c.length-1?C=wl(c[_-1],m,c[_+1],i):C=`${_===0?"M":"L"}${m.x} ${m.y}`,v+=C,v},""),f,d,g,y]}const Ue=N.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:f=Y.Bottom,targetPosition:d=Y.Top,markerEnd:g,markerStart:y,pathOptions:p,interactionWidth:v})=>{const[m,_,C]=pn({sourceX:t,sourceY:e,sourcePosition:f,targetX:n,targetY:o,targetPosition:d,borderRadius:p==null?void 0:p.borderRadius,offset:p==null?void 0:p.offset});return z.createElement(_e,{path:m,labelX:_,labelY:C,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:g,markerStart:y,interactionWidth:v})});Ue.displayName="SmoothStepEdge";const Tn=N.memo(t=>{var e;return z.createElement(Ue,{...t,pathOptions:N.useMemo(()=>{var n;return{borderRadius:0,offset:(n=t.pathOptions)==null?void 0:n.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});Tn.displayName="StepEdge";function xl({sourceX:t,sourceY:e,targetX:n,targetY:o}){const[r,s,i,a]=rr({sourceX:t,sourceY:e,targetX:n,targetY:o});return[`M ${t},${e}L ${n},${o}`,r,s,i,a]}const kn=N.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:d,interactionWidth:g})=>{const[y,p,v]=xl({sourceX:t,sourceY:e,targetX:n,targetY:o});return z.createElement(_e,{path:y,labelX:p,labelY:v,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:d,interactionWidth:g})});kn.displayName="StraightEdge";function Me(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ro({pos:t,x1:e,y1:n,x2:o,y2:r,c:s}){switch(t){case Y.Left:return[e-Me(e-o,s),n];case Y.Right:return[e+Me(o-e,s),n];case Y.Top:return[e,n-Me(n-r,s)];case Y.Bottom:return[e,n+Me(r-n,s)]}}function ar({sourceX:t,sourceY:e,sourcePosition:n=Y.Bottom,targetX:o,targetY:r,targetPosition:s=Y.Top,curvature:i=.25}){const[a,l]=ro({pos:n,x1:t,y1:e,x2:o,y2:r,c:i}),[u,c]=ro({pos:s,x1:o,y1:r,x2:t,y2:e,c:i}),[f,d,g,y]=ir({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${e} C${a},${l} ${u},${c} ${o},${r}`,f,d,g,y]}const Le=N.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,sourcePosition:r=Y.Bottom,targetPosition:s=Y.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:g,markerStart:y,pathOptions:p,interactionWidth:v})=>{const[m,_,C]=ar({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:o,targetPosition:s,curvature:p==null?void 0:p.curvature});return z.createElement(_e,{path:m,labelX:_,labelY:C,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:g,markerStart:y,interactionWidth:v})});Le.displayName="BezierEdge";const Pn=N.createContext(null),Sl=Pn.Provider;Pn.Consumer;const vl=()=>N.useContext(Pn),_l=t=>"id"in t&&"source"in t&&"target"in t,El=({source:t,sourceHandle:e,target:n,targetHandle:o})=>`reactflow__edge-${t}${e||""}-${n}${o||""}`,mn=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(o=>`${o}=${t[o]}`).join("&")}`,bl=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Nl=(t,e)=>{if(!t.source||!t.target)return e;let n;return _l(t)?n={...t}:n={...t,id:El(t)},bl(n,e)?e:e.concat(n)},yn=({x:t,y:e},[n,o,r],s,[i,a])=>{const l={x:(t-n)/r,y:(e-o)/r};return s?{x:i*Math.round(l.x/i),y:a*Math.round(l.y/a)}:l},cr=({x:t,y:e},[n,o,r])=>({x:t*r+n,y:e*r+o}),jt=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],o=(t.height??0)*e[1],r={x:t.position.x-n,y:t.position.y-o};return{...r,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-o}:r}},$n=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,r)=>{const{x:s,y:i}=jt(r,e).positionAbsolute;return tr(o,we({x:s,y:i,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return er(n)},lr=(t,e,[n,o,r]=[0,0,1],s=!1,i=!1,a=[0,0])=>{const l={x:(e.x-n)/r,y:(e.y-o)/r,width:e.width/r,height:e.height/r},u=[];return t.forEach(c=>{const{width:f,height:d,selectable:g=!0,hidden:y=!1}=c;if(i&&!g||y)return!1;const{positionAbsolute:p}=jt(c,a),v={x:p.x,y:p.y,width:f||0,height:d||0},m=hn(l,v),_=typeof f>"u"||typeof d>"u"||f===null||d===null,C=s&&m>0,w=(f||0)*(d||0);(_||C||m>=w||c.dragging)&&u.push(c)}),u},ur=(t,e)=>{const n=t.map(o=>o.id);return e.filter(o=>n.includes(o.source)||n.includes(o.target))},fr=(t,e,n,o,r,s=.1)=>{const i=e/(t.width*(1+s)),a=n/(t.height*(1+s)),l=Math.min(i,a),u=re(l,o,r),c=t.x+t.width/2,f=t.y+t.height/2,d=e/2-c*u,g=n/2-f*u;return{x:d,y:g,zoom:u}},Lt=(t,e=0)=>t.transition().duration(e);function io(t,e,n,o){return(e[n]||[]).reduce((r,s)=>{var i,a;return`${t.id}-${s.id}-${n}`!==o&&r.push({id:s.id||null,type:n,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((a=t.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),r},[])}function Ml(t,e,n,o,r,s){const{x:i,y:a}=kt(t),u=e.elementsFromPoint(i,a).find(y=>y.classList.contains("react-flow__handle"));if(u){const y=u.getAttribute("data-nodeid");if(y){const p=Dn(void 0,u),v=u.getAttribute("data-handleid"),m=s({nodeId:y,id:v,type:p});if(m){const _=r.find(C=>C.nodeId===y&&C.type===p&&C.id===v);return{handle:{id:v,type:p,nodeId:y,x:(_==null?void 0:_.x)||n.x,y:(_==null?void 0:_.y)||n.y},validHandleResult:m}}}}let c=[],f=1/0;if(r.forEach(y=>{const p=Math.sqrt((y.x-n.x)**2+(y.y-n.y)**2);if(p<=o){const v=s(y);p<=f&&(p<f?c=[{handle:y,validHandleResult:v}]:p===f&&c.push({handle:y,validHandleResult:v}),f=p)}}),!c.length)return{handle:null,validHandleResult:dr()};if(c.length===1)return c[0];const d=c.some(({validHandleResult:y})=>y.isValid),g=c.some(({handle:y})=>y.type==="target");return c.find(({handle:y,validHandleResult:p})=>g?y.type==="target":d?p.isValid:!0)||c[0]}const Cl={source:null,target:null,sourceHandle:null,targetHandle:null},dr=()=>({handleDomNode:null,isValid:!1,connection:Cl,endHandle:null});function hr(t,e,n,o,r,s,i){const a=r==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...dr(),handleDomNode:l};if(l){const c=Dn(void 0,l),f=l.getAttribute("data-nodeid"),d=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),y=l.classList.contains("connectableend"),p={source:a?f:n,sourceHandle:a?d:o,target:a?n:f,targetHandle:a?o:d};u.connection=p,g&&y&&(e===Yt.Strict?a&&c==="source"||!a&&c==="target":f!==n||d!==o)&&(u.endHandle={nodeId:f,handleId:d,type:c},u.isValid=s(p))}return u}function Al({nodes:t,nodeId:e,handleId:n,handleType:o}){return t.reduce((r,s)=>{if(s[et]){const{handleBounds:i}=s[et];let a=[],l=[];i&&(a=io(s,i,"source",`${e}-${n}-${o}`),l=io(s,i,"target",`${e}-${n}-${o}`)),r.push(...a,...l)}return r},[])}function Dn(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function en(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Tl(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function gr({event:t,handleId:e,nodeId:n,onConnect:o,isTarget:r,getState:s,setState:i,isValidConnection:a,edgeUpdaterType:l,onEdgeUpdateEnd:u}){const c=jo(t.target),{connectionMode:f,domNode:d,autoPanOnConnect:g,connectionRadius:y,onConnectStart:p,panBy:v,getNodes:m,cancelConnection:_}=s();let C=0,w;const{x:A,y:I}=kt(t),R=c==null?void 0:c.elementFromPoint(A,I),P=Dn(l,R),D=d==null?void 0:d.getBoundingClientRect();if(!D||!P)return;let L,B=kt(t,D),H=!1,b=null,h=!1,E=null;const S=Al({nodes:m(),nodeId:n,handleId:e,handleType:P}),T=()=>{if(!g)return;const[M,k]=Jo(B,D);v({x:M,y:k}),C=requestAnimationFrame(T)};i({connectionPosition:B,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:P,connectionStartHandle:{nodeId:n,handleId:e,type:P},connectionEndHandle:null}),p==null||p(t,{nodeId:n,handleId:e,handleType:P});function $(M){const{transform:k}=s();B=kt(M,D);const{handle:O,validHandleResult:V}=Ml(M,c,yn(B,k,!1,[1,1]),y,S,F=>hr(F,f,n,e,r?"target":"source",a,c));if(w=O,H||(T(),H=!0),E=V.handleDomNode,b=V.connection,h=V.isValid,i({connectionPosition:w&&h?cr({x:w.x,y:w.y},k):B,connectionStatus:Tl(!!w,h),connectionEndHandle:V.endHandle}),!w&&!h&&!E)return en(L);b.source!==b.target&&E&&(en(L),L=E,E.classList.add("connecting","react-flow__handle-connecting"),E.classList.toggle("valid",h),E.classList.toggle("react-flow__handle-valid",h))}function x(M){var k,O;(w||E)&&b&&h&&(o==null||o(b)),(O=(k=s()).onConnectEnd)==null||O.call(k,M),l&&(u==null||u(M)),en(L),_(),cancelAnimationFrame(C),H=!1,h=!1,b=null,E=null,c.removeEventListener("mousemove",$),c.removeEventListener("mouseup",x),c.removeEventListener("touchmove",$),c.removeEventListener("touchend",x)}c.addEventListener("mousemove",$),c.addEventListener("mouseup",x),c.addEventListener("touchmove",$),c.addEventListener("touchend",x)}const so=()=>!0,kl=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),Pl=(t,e,n)=>o=>{const{connectionStartHandle:r,connectionEndHandle:s,connectionClickStartHandle:i}=o;return{connecting:(r==null?void 0:r.nodeId)===t&&(r==null?void 0:r.handleId)===e&&(r==null?void 0:r.type)===n||(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===n}},pr=N.forwardRef(({type:t="source",position:e=Y.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:i,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:f,...d},g)=>{var D,L;const y=i||null,p=t==="target",v=nt(),m=vl(),{connectOnClick:_,noPanClassName:C}=j(kl,st),{connecting:w,clickConnecting:A}=j(Pl(m,y,t),st);m||(L=(D=v.getState()).onError)==null||L.call(D,"010",Et.error010());const I=B=>{const{defaultEdgeOptions:H,onConnect:b,hasDefaultEdges:h}=v.getState(),E={...H,...B};if(h){const{edges:S,setEdges:T}=v.getState();T(Nl(E,S))}b==null||b(E),a==null||a(E)},R=B=>{if(!m)return;const H=or(B);r&&(H&&B.button===0||!H)&&gr({event:B,handleId:y,nodeId:m,onConnect:I,isTarget:p,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||so}),H?c==null||c(B):f==null||f(B)},P=B=>{const{onClickConnectStart:H,onClickConnectEnd:b,connectionClickStartHandle:h,connectionMode:E,isValidConnection:S}=v.getState();if(!m||!h&&!r)return;if(!h){H==null||H(B,{nodeId:m,handleId:y,handleType:t}),v.setState({connectionClickStartHandle:{nodeId:m,type:t,handleId:y}});return}const T=jo(B.target),$=n||S||so,{connection:x,isValid:M}=hr({nodeId:m,id:y,type:t},E,h.nodeId,h.handleId||null,h.type,$,T);M&&I(x),b==null||b(B),v.setState({connectionClickStartHandle:null})};return z.createElement("div",{"data-handleid":y,"data-nodeid":m,"data-handlepos":e,"data-id":`${m}-${y}-${t}`,className:ft(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",C,u,{source:!p,target:p,connectable:o,connectablestart:r,connectableend:s,connecting:A,connectionindicator:o&&(r&&!w||s&&w)}]),onMouseDown:R,onTouchStart:R,onClick:_?P:void 0,ref:g,...d},l)});pr.displayName="Handle";var Ve=N.memo(pr);const mr=({data:t,isConnectable:e,targetPosition:n=Y.Top,sourcePosition:o=Y.Bottom})=>z.createElement(z.Fragment,null,z.createElement(Ve,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,z.createElement(Ve,{type:"source",position:o,isConnectable:e}));mr.displayName="DefaultNode";var wn=N.memo(mr);const yr=({data:t,isConnectable:e,sourcePosition:n=Y.Bottom})=>z.createElement(z.Fragment,null,t==null?void 0:t.label,z.createElement(Ve,{type:"source",position:n,isConnectable:e}));yr.displayName="InputNode";var wr=N.memo(yr);const xr=({data:t,isConnectable:e,targetPosition:n=Y.Top})=>z.createElement(z.Fragment,null,z.createElement(Ve,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label);xr.displayName="OutputNode";var Sr=N.memo(xr);const zn=()=>null;zn.displayName="GroupNode";const $l=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected)}),Ce=t=>t.id;function Dl(t,e){return st(t.selectedNodes.map(Ce),e.selectedNodes.map(Ce))&&st(t.selectedEdges.map(Ce),e.selectedEdges.map(Ce))}const vr=N.memo(({onSelectionChange:t})=>{const e=nt(),{selectedNodes:n,selectedEdges:o}=j($l,Dl);return N.useEffect(()=>{const r={nodes:n,edges:o};t==null||t(r),e.getState().onSelectionChange.forEach(s=>s(r))},[n,o,t]),null});vr.displayName="SelectionListener";const zl=t=>!!t.onSelectionChange;function Rl({onSelectionChange:t}){const e=j(zl);return t||e?z.createElement(vr,{onSelectionChange:t}):null}const Il=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Zt(t,e){N.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function W(t,e,n){N.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const Bl=({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:s,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:f,edgesFocusable:d,edgesUpdatable:g,elevateNodesOnSelect:y,minZoom:p,maxZoom:v,nodeExtent:m,onNodesChange:_,onEdgesChange:C,elementsSelectable:w,connectionMode:A,snapGrid:I,snapToGrid:R,translateExtent:P,connectOnClick:D,defaultEdgeOptions:L,fitView:B,fitViewOptions:H,onNodesDelete:b,onEdgesDelete:h,onNodeDrag:E,onNodeDragStart:S,onNodeDragStop:T,onSelectionDrag:$,onSelectionDragStart:x,onSelectionDragStop:M,noPanClassName:k,nodeOrigin:O,rfId:V,autoPanOnConnect:F,autoPanOnNodeDrag:K,onError:Z,connectionRadius:U,isValidConnection:G,nodeDragThreshold:Q})=>{const{setNodes:J,setEdges:rt,setDefaultNodesAndEdges:dt,setMinZoom:pt,setMaxZoom:tt,setTranslateExtent:q,setNodeExtent:it,reset:at}=j(Il,st),X=nt();return N.useEffect(()=>{const Pt=o==null?void 0:o.map($t=>({...$t,...L}));return dt(n,Pt),()=>{at()}},[]),W("defaultEdgeOptions",L,X.setState),W("connectionMode",A,X.setState),W("onConnect",r,X.setState),W("onConnectStart",s,X.setState),W("onConnectEnd",i,X.setState),W("onClickConnectStart",a,X.setState),W("onClickConnectEnd",l,X.setState),W("nodesDraggable",u,X.setState),W("nodesConnectable",c,X.setState),W("nodesFocusable",f,X.setState),W("edgesFocusable",d,X.setState),W("edgesUpdatable",g,X.setState),W("elementsSelectable",w,X.setState),W("elevateNodesOnSelect",y,X.setState),W("snapToGrid",R,X.setState),W("snapGrid",I,X.setState),W("onNodesChange",_,X.setState),W("onEdgesChange",C,X.setState),W("connectOnClick",D,X.setState),W("fitViewOnInit",B,X.setState),W("fitViewOnInitOptions",H,X.setState),W("onNodesDelete",b,X.setState),W("onEdgesDelete",h,X.setState),W("onNodeDrag",E,X.setState),W("onNodeDragStart",S,X.setState),W("onNodeDragStop",T,X.setState),W("onSelectionDrag",$,X.setState),W("onSelectionDragStart",x,X.setState),W("onSelectionDragStop",M,X.setState),W("noPanClassName",k,X.setState),W("nodeOrigin",O,X.setState),W("rfId",V,X.setState),W("autoPanOnConnect",F,X.setState),W("autoPanOnNodeDrag",K,X.setState),W("onError",Z,X.setState),W("connectionRadius",U,X.setState),W("isValidConnection",G,X.setState),W("nodeDragThreshold",Q,X.setState),Zt(t,J),Zt(e,rt),Zt(p,pt),Zt(v,tt),Zt(P,q),Zt(m,it),null},ao={display:"none"},Ol={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},_r="react-flow__node-desc",Er="react-flow__edge-desc",Hl="react-flow__aria-live",Ll=t=>t.ariaLiveMessage;function Vl({rfId:t}){const e=j(Ll);return z.createElement("div",{id:`${Hl}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Ol},e)}function Fl({rfId:t,disableKeyboardA11y:e}){return z.createElement(z.Fragment,null,z.createElement("div",{id:`${_r}-${t}`,style:ao},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),z.createElement("div",{id:`${Er}-${t}`,style:ao},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&z.createElement(Vl,{rfId:t}))}var Se=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,o]=N.useState(!1),r=N.useRef(!1),s=N.useRef(new Set([])),[i,a]=N.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(f=>typeof f=="string").map(f=>f.split("+")),c=u.reduce((f,d)=>f.concat(...d),[]);return[u,c]}return[[],[]]},[t]);return N.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const c=g=>{if(r.current=g.ctrlKey||g.metaKey||g.shiftKey,(!r.current||r.current&&!e.actInsideInputWithModifier)&&gn(g))return!1;const p=lo(g.code,a);s.current.add(g[p]),co(i,s.current,!1)&&(g.preventDefault(),o(!0))},f=g=>{if((!r.current||r.current&&!e.actInsideInputWithModifier)&&gn(g))return!1;const p=lo(g.code,a);co(i,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(g[p]),g.key==="Meta"&&s.current.clear(),r.current=!1},d=()=>{s.current.clear(),o(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",d),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",d)}}},[t,o]),n};function co(t,e,n){return t.filter(o=>n||o.length===e.size).some(o=>o.every(r=>e.has(r)))}function lo(t,e){return e.includes(t)?"code":"key"}function br(t,e,n,o){var i,a;if(!t.parentNode)return n;const r=e.get(t.parentNode),s=jt(r,o);return br(r,e,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((i=r[et])==null?void 0:i.z)??0)>(n.z??0)?((a=r[et])==null?void 0:a.z)??0:n.z??0},o)}function Nr(t,e,n){t.forEach(o=>{var r;if(o.parentNode&&!t.has(o.parentNode))throw new Error(`Parent node ${o.parentNode} not found`);if(o.parentNode||n!=null&&n[o.id]){const{x:s,y:i,z:a}=br(o,t,{...o.position,z:((r=o[et])==null?void 0:r.z)??0},e);o.positionAbsolute={x:s,y:i},o[et].z=a,n!=null&&n[o.id]&&(o[et].isParent=!0)}})}function nn(t,e,n,o){const r=new Map,s={},i=o?1e3:0;return t.forEach(a=>{var f;const l=(ut(a.zIndex)?a.zIndex:0)+(a.selected?i:0),u=e.get(a.id),c={width:u==null?void 0:u.width,height:u==null?void 0:u.height,...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(c.parentNode=a.parentNode,s[a.parentNode]=!0),Object.defineProperty(c,et,{enumerable:!1,value:{handleBounds:(f=u==null?void 0:u[et])==null?void 0:f.handleBounds,z:l}}),r.set(a.id,c)}),Nr(r,n,s),r}function Mr(t,e={}){const{getNodes:n,width:o,height:r,minZoom:s,maxZoom:i,d3Zoom:a,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:f}=t(),d=e.initial&&!u&&c;if(a&&l&&(d||!e.initial)){const y=n().filter(v=>{var _;const m=e.includeHiddenNodes?v.width&&v.height:!v.hidden;return(_=e.nodes)!=null&&_.length?m&&e.nodes.some(C=>C.id===v.id):m}),p=y.every(v=>v.width&&v.height);if(y.length>0&&p){const v=$n(y,f),{x:m,y:_,zoom:C}=fr(v,o,r,e.minZoom??s,e.maxZoom??i,e.padding??.1),w=Tt.translate(m,_).scale(C);return typeof e.duration=="number"&&e.duration>0?a.transform(Lt(l,e.duration),w):a.transform(l,w),!0}}return!1}function Yl(t,e){return t.forEach(n=>{const o=e.get(n.id);o&&e.set(o.id,{...o,[et]:o[et],selected:n.selected})}),new Map(e)}function Xl(t,e){return e.map(n=>{const o=t.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function Ae({changedNodes:t,changedEdges:e,get:n,set:o}){const{nodeInternals:r,edges:s,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:u}=n();t!=null&&t.length&&(l&&o({nodeInternals:Yl(t,r)}),i==null||i(t)),e!=null&&e.length&&(u&&o({edges:Xl(e,s)}),a==null||a(e))}const Ut=()=>{},Kl={zoomIn:Ut,zoomOut:Ut,zoomTo:Ut,getZoom:()=>1,setViewport:Ut,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ut,fitBounds:Ut,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},Wl=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Zl=()=>{const t=nt(),{d3Zoom:e,d3Selection:n}=j(Wl,st);return N.useMemo(()=>n&&e?{zoomIn:r=>e.scaleBy(Lt(n,r==null?void 0:r.duration),1.2),zoomOut:r=>e.scaleBy(Lt(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,s)=>e.scaleTo(Lt(n,s==null?void 0:s.duration),r),getZoom:()=>t.getState().transform[2],setViewport:(r,s)=>{const[i,a,l]=t.getState().transform,u=Tt.translate(r.x??i,r.y??a).scale(r.zoom??l);e.transform(Lt(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[r,s,i]=t.getState().transform;return{x:r,y:s,zoom:i}},fitView:r=>Mr(t.getState,r),setCenter:(r,s,i)=>{const{width:a,height:l,maxZoom:u}=t.getState(),c=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=a/2-r*c,d=l/2-s*c,g=Tt.translate(f,d).scale(c);e.transform(Lt(n,i==null?void 0:i.duration),g)},fitBounds:(r,s)=>{const{width:i,height:a,minZoom:l,maxZoom:u}=t.getState(),{x:c,y:f,zoom:d}=fr(r,i,a,l,u,(s==null?void 0:s.padding)??.1),g=Tt.translate(c,f).scale(d);e.transform(Lt(n,s==null?void 0:s.duration),g)},project:r=>{const{transform:s,snapToGrid:i,snapGrid:a}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),yn(r,s,i,a)},screenToFlowPosition:r=>{const{transform:s,snapToGrid:i,snapGrid:a,domNode:l}=t.getState();if(!l)return r;const{x:u,y:c}=l.getBoundingClientRect(),f={x:r.x-u,y:r.y-c};return yn(f,s,i,a)},flowToScreenPosition:r=>{const{transform:s,domNode:i}=t.getState();if(!i)return r;const{x:a,y:l}=i.getBoundingClientRect(),u=cr(r,s);return{x:u.x+a,y:u.y+l}},viewportInitialized:!0}:Kl,[e,n])};function Cr(){const t=Zl(),e=nt(),n=N.useCallback(()=>e.getState().getNodes().map(p=>({...p})),[]),o=N.useCallback(p=>e.getState().nodeInternals.get(p),[]),r=N.useCallback(()=>{const{edges:p=[]}=e.getState();return p.map(v=>({...v}))},[]),s=N.useCallback(p=>{const{edges:v=[]}=e.getState();return v.find(m=>m.id===p)},[]),i=N.useCallback(p=>{const{getNodes:v,setNodes:m,hasDefaultNodes:_,onNodesChange:C}=e.getState(),w=v(),A=typeof p=="function"?p(w):p;if(_)m(A);else if(C){const I=A.length===0?w.map(R=>({type:"remove",id:R.id})):A.map(R=>({item:R,type:"reset"}));C(I)}},[]),a=N.useCallback(p=>{const{edges:v=[],setEdges:m,hasDefaultEdges:_,onEdgesChange:C}=e.getState(),w=typeof p=="function"?p(v):p;if(_)m(w);else if(C){const A=w.length===0?v.map(I=>({type:"remove",id:I.id})):w.map(I=>({item:I,type:"reset"}));C(A)}},[]),l=N.useCallback(p=>{const v=Array.isArray(p)?p:[p],{getNodes:m,setNodes:_,hasDefaultNodes:C,onNodesChange:w}=e.getState();if(C){const I=[...m(),...v];_(I)}else if(w){const A=v.map(I=>({item:I,type:"add"}));w(A)}},[]),u=N.useCallback(p=>{const v=Array.isArray(p)?p:[p],{edges:m=[],setEdges:_,hasDefaultEdges:C,onEdgesChange:w}=e.getState();if(C)_([...m,...v]);else if(w){const A=v.map(I=>({item:I,type:"add"}));w(A)}},[]),c=N.useCallback(()=>{const{getNodes:p,edges:v=[],transform:m}=e.getState(),[_,C,w]=m;return{nodes:p().map(A=>({...A})),edges:v.map(A=>({...A})),viewport:{x:_,y:C,zoom:w}}},[]),f=N.useCallback(({nodes:p,edges:v})=>{const{nodeInternals:m,getNodes:_,edges:C,hasDefaultNodes:w,hasDefaultEdges:A,onNodesDelete:I,onEdgesDelete:R,onNodesChange:P,onEdgesChange:D}=e.getState(),L=(p||[]).map(E=>E.id),B=(v||[]).map(E=>E.id),H=_().reduce((E,S)=>{const T=!L.includes(S.id)&&S.parentNode&&E.find(x=>x.id===S.parentNode);return(typeof S.deletable=="boolean"?S.deletable:!0)&&(L.includes(S.id)||T)&&E.push(S),E},[]),b=C.filter(E=>typeof E.deletable=="boolean"?E.deletable:!0),h=b.filter(E=>B.includes(E.id));if(H||h){const E=ur(H,b),S=[...h,...E],T=S.reduce(($,x)=>($.includes(x.id)||$.push(x.id),$),[]);if((A||w)&&(A&&e.setState({edges:C.filter($=>!T.includes($.id))}),w&&(H.forEach($=>{m.delete($.id)}),e.setState({nodeInternals:new Map(m)}))),T.length>0&&(R==null||R(S),D&&D(T.map($=>({id:$,type:"remove"})))),H.length>0&&(I==null||I(H),P)){const $=H.map(x=>({id:x.id,type:"remove"}));P($)}}},[]),d=N.useCallback(p=>{const v=hl(p),m=v?null:e.getState().nodeInternals.get(p.id);return!v&&!m?[null,null,v]:[v?p:to(m),m,v]},[]),g=N.useCallback((p,v=!0,m)=>{const[_,C,w]=d(p);return _?(m||e.getState().getNodes()).filter(A=>{if(!w&&(A.id===C.id||!A.positionAbsolute))return!1;const I=to(A),R=hn(I,_);return v&&R>0||R>=_.width*_.height}):[]},[]),y=N.useCallback((p,v,m=!0)=>{const[_]=d(p);if(!_)return!1;const C=hn(_,v);return m&&C>0||C>=_.width*_.height},[]);return N.useMemo(()=>({...t,getNodes:n,getNode:o,getEdges:r,getEdge:s,setNodes:i,setEdges:a,addNodes:l,addEdges:u,toObject:c,deleteElements:f,getIntersectingNodes:g,isNodeIntersecting:y}),[t,n,o,r,s,i,a,l,u,c,f,g,y])}const Ul={actInsideInputWithModifier:!1};var Gl=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=nt(),{deleteElements:o}=Cr(),r=Se(t,Ul),s=Se(e);N.useEffect(()=>{if(r){const{edges:i,getNodes:a}=n.getState(),l=a().filter(c=>c.selected),u=i.filter(c=>c.selected);o({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),N.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function ql(t){const e=nt();N.useEffect(()=>{let n;const o=()=>{var s,i;if(!t.current)return;const r=Mn(t.current);(r.height===0||r.width===0)&&((i=(s=e.getState()).onError)==null||i.call(s,"004",Et.error004())),e.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),t.current&&(n=new ResizeObserver(()=>o()),n.observe(t.current)),()=>{window.removeEventListener("resize",o),n&&t.current&&n.unobserve(t.current)}},[])}const Rn={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ql=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Te=t=>({x:t.x,y:t.y,zoom:t.k}),Gt=(t,e)=>t.target.closest(`.${e}`),uo=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),fo=t=>{const e=t.ctrlKey&&Oe()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},Jl=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),jl=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Vt.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:f=!0,defaultViewport:d,translateExtent:g,minZoom:y,maxZoom:p,zoomActivationKeyCode:v,preventScrolling:m=!0,children:_,noWheelClassName:C,noPanClassName:w})=>{const A=N.useRef(),I=nt(),R=N.useRef(!1),P=N.useRef(!1),D=N.useRef(null),L=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:B,d3Selection:H,d3ZoomHandler:b,userSelectionActive:h}=j(Jl,st),E=Se(v),S=N.useRef(0),T=N.useRef(!1),$=N.useRef();return ql(D),N.useEffect(()=>{if(D.current){const x=D.current.getBoundingClientRect(),M=sl().scaleExtent([y,p]).translateExtent(g),k=ht(D.current).call(M),O=Tt.translate(d.x,d.y).scale(re(d.zoom,y,p)),V=[[0,0],[x.width,x.height]],F=M.constrain()(O,V,g);M.transform(k,F),M.wheelDelta(fo),I.setState({d3Zoom:M,d3Selection:k,d3ZoomHandler:k.on("wheel.zoom"),transform:[F.x,F.y,F.k],domNode:D.current.closest(".react-flow")})}},[]),N.useEffect(()=>{H&&B&&(i&&!E&&!h?H.on("wheel.zoom",x=>{if(Gt(x,C))return!1;x.preventDefault(),x.stopImmediatePropagation();const M=H.property("__zoom").k||1,k=Oe();if(x.ctrlKey&&s&&k){const Q=yt(x),J=fo(x),rt=M*Math.pow(2,J);B.scaleTo(H,rt,Q,x);return}const O=x.deltaMode===1?20:1;let V=l===Vt.Vertical?0:x.deltaX*O,F=l===Vt.Horizontal?0:x.deltaY*O;!k&&x.shiftKey&&l!==Vt.Vertical&&(V=x.deltaY*O,F=0),B.translateBy(H,-(V/M)*a,-(F/M)*a,{internal:!0});const K=Te(H.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:U,onViewportChangeEnd:G}=I.getState();clearTimeout($.current),T.current||(T.current=!0,e==null||e(x,K),Z==null||Z(K)),T.current&&(t==null||t(x,K),U==null||U(K),$.current=setTimeout(()=>{n==null||n(x,K),G==null||G(K),T.current=!1},150))},{passive:!1}):typeof b<"u"&&H.on("wheel.zoom",function(x,M){if(!m||Gt(x,C))return null;x.preventDefault(),b.call(this,x,M)},{passive:!1}))},[h,i,l,H,B,b,E,s,m,C,e,t,n]),N.useEffect(()=>{B&&B.on("start",x=>{var O,V;if(!x.sourceEvent||x.sourceEvent.internal)return null;S.current=(O=x.sourceEvent)==null?void 0:O.button;const{onViewportChangeStart:M}=I.getState(),k=Te(x.transform);R.current=!0,L.current=k,((V=x.sourceEvent)==null?void 0:V.type)==="mousedown"&&I.setState({paneDragging:!0}),M==null||M(k),e==null||e(x.sourceEvent,k)})},[B,e]),N.useEffect(()=>{B&&(h&&!R.current?B.on("zoom",null):h||B.on("zoom",x=>{var k;const{onViewportChange:M}=I.getState();if(I.setState({transform:[x.transform.x,x.transform.y,x.transform.k]}),P.current=!!(o&&uo(f,S.current??0)),(t||M)&&!((k=x.sourceEvent)!=null&&k.internal)){const O=Te(x.transform);M==null||M(O),t==null||t(x.sourceEvent,O)}}))},[h,B,t,f,o]),N.useEffect(()=>{B&&B.on("end",x=>{if(!x.sourceEvent||x.sourceEvent.internal)return null;const{onViewportChangeEnd:M}=I.getState();if(R.current=!1,I.setState({paneDragging:!1}),o&&uo(f,S.current??0)&&!P.current&&o(x.sourceEvent),P.current=!1,(n||M)&&Ql(L.current,x.transform)){const k=Te(x.transform);L.current=k,clearTimeout(A.current),A.current=setTimeout(()=>{M==null||M(k),n==null||n(x.sourceEvent,k)},i?150:0)}})},[B,i,f,n,o]),N.useEffect(()=>{B&&B.filter(x=>{const M=E||r,k=s&&x.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&x.button===1&&x.type==="mousedown"&&(Gt(x,"react-flow__node")||Gt(x,"react-flow__edge")))return!0;if(!f&&!M&&!i&&!u&&!s||h||!u&&x.type==="dblclick"||Gt(x,C)&&x.type==="wheel"||Gt(x,w)&&(x.type!=="wheel"||i&&x.type==="wheel"&&!E)||!s&&x.ctrlKey&&x.type==="wheel"||!M&&!i&&!k&&x.type==="wheel"||!f&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(f)&&!f.includes(x.button)&&(x.type==="mousedown"||x.type==="touchstart"))return!1;const O=Array.isArray(f)&&f.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||x.type==="wheel")&&O})},[h,B,r,s,i,u,f,c,E]),z.createElement("div",{className:"react-flow__renderer",ref:D,style:Rn},_)},tu=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function eu(){const{userSelectionActive:t,userSelectionRect:e}=j(tu,st);return t&&e?z.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function ho(t,e){const n=t.find(o=>o.id===e.parentNode);if(n){const o=e.position.x+e.width-n.width,r=e.position.y+e.height-n.height;if(o>0||r>0||e.position.x<0||e.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,o>0&&(n.style.width+=o),r>0&&(n.style.height+=r),e.position.x<0){const s=Math.abs(e.position.x);n.position.x=n.position.x-s,n.style.width+=s,e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);n.position.y=n.position.y-s,n.style.height+=s,e.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Ar(t,e){if(t.some(o=>o.type==="reset"))return t.filter(o=>o.type==="reset").map(o=>o.item);const n=t.filter(o=>o.type==="add").map(o=>o.item);return e.reduce((o,r)=>{const s=t.filter(a=>a.id===r.id);if(s.length===0)return o.push(r),o;const i={...r};for(const a of s)if(a)switch(a.type){case"select":{i.selected=a.selected;break}case"position":{typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&ho(o,i);break}case"dimensions":{typeof a.dimensions<"u"&&(i.width=a.dimensions.width,i.height=a.dimensions.height),typeof a.updateStyle<"u"&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&ho(o,i);break}case"remove":return o}return o.push(i),o},n)}function Tr(t,e){return Ar(t,e)}function nu(t,e){return Ar(t,e)}const Ct=(t,e)=>({id:t,type:"select",selected:e});function Qt(t,e){return t.reduce((n,o)=>{const r=e.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(Ct(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(Ct(o.id,!1))),n},[])}const on=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},ou=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),kr=N.memo(({isSelecting:t,selectionMode:e=xe.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:c,children:f})=>{const d=N.useRef(null),g=nt(),y=N.useRef(0),p=N.useRef(0),v=N.useRef(),{userSelectionActive:m,elementsSelectable:_,dragging:C}=j(ou,st),w=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,p.current=0},A=b=>{s==null||s(b),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},I=b=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){b.preventDefault();return}i==null||i(b)},R=a?b=>a(b):void 0,P=b=>{const{resetSelectedElements:h,domNode:E}=g.getState();if(v.current=E==null?void 0:E.getBoundingClientRect(),!_||!t||b.button!==0||b.target!==d.current||!v.current)return;const{x:S,y:T}=kt(b,v.current);h(),g.setState({userSelectionRect:{width:0,height:0,startX:S,startY:T,x:S,y:T}}),o==null||o(b)},D=b=>{const{userSelectionRect:h,nodeInternals:E,edges:S,transform:T,onNodesChange:$,onEdgesChange:x,nodeOrigin:M,getNodes:k}=g.getState();if(!t||!v.current||!h)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const O=kt(b,v.current),V=h.startX??0,F=h.startY??0,K={...h,x:O.x<V?O.x:V,y:O.y<F?O.y:F,width:Math.abs(O.x-V),height:Math.abs(O.y-F)},Z=k(),U=lr(E,K,T,e===xe.Partial,!0,M),G=ur(U,S).map(J=>J.id),Q=U.map(J=>J.id);if(y.current!==Q.length){y.current=Q.length;const J=Qt(Z,Q);J.length&&($==null||$(J))}if(p.current!==G.length){p.current=G.length;const J=Qt(S,G);J.length&&(x==null||x(J))}g.setState({userSelectionRect:K})},L=b=>{if(b.button!==0)return;const{userSelectionRect:h}=g.getState();!m&&h&&b.target===d.current&&(A==null||A(b)),g.setState({nodesSelectionActive:y.current>0}),w(),r==null||r(b)},B=b=>{m&&(g.setState({nodesSelectionActive:y.current>0}),r==null||r(b)),w()},H=_&&(t||m);return z.createElement("div",{className:ft(["react-flow__pane",{dragging:C,selection:t}]),onClick:H?void 0:on(A,d),onContextMenu:on(I,d),onWheel:on(R,d),onMouseEnter:H?void 0:l,onMouseDown:H?P:void 0,onMouseMove:H?D:u,onMouseUp:H?L:void 0,onMouseLeave:H?B:c,ref:d,style:Rn},f,z.createElement(eu,null))});kr.displayName="Pane";function Pr(t,e){if(!t.parentNode)return!1;const n=e.get(t.parentNode);return n?n.selected?!0:Pr(n,e):!1}function go(t,e,n){let o=t;do{if(o!=null&&o.matches(e))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function ru(t,e,n,o){return Array.from(t.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||!Pr(r,t))&&(r.draggable||e&&typeof r.draggable>"u")).map(r=>{var s,i;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=r.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=r.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height,expandParent:r.expandParent}})}function iu(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function $r(t,e,n,o,r=[0,0],s){const i=iu(t,t.extent||o);let a=i;if(t.extent==="parent"&&!t.expandParent)if(t.parentNode&&t.width&&t.height){const c=n.get(t.parentNode),{x:f,y:d}=jt(c,r).positionAbsolute;a=c&&ut(f)&&ut(d)&&ut(c.width)&&ut(c.height)?[[f+t.width*r[0],d+t.height*r[1]],[f+c.width-t.width+t.width*r[0],d+c.height-t.height+t.height*r[1]]]:a}else s==null||s("005",Et.error005()),a=i;else if(t.extent&&t.parentNode&&t.extent!=="parent"){const c=n.get(t.parentNode),{x:f,y:d}=jt(c,r).positionAbsolute;a=[[t.extent[0][0]+f,t.extent[0][1]+d],[t.extent[1][0]+f,t.extent[1][1]+d]]}let l={x:0,y:0};if(t.parentNode){const c=n.get(t.parentNode);l=jt(c,r).positionAbsolute}const u=a&&a!=="parent"?Cn(e,a):e;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function rn({nodeId:t,dragItems:e,nodeInternals:n}){const o=e.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[t?o.find(r=>r.id===t):o[0],o]}const po=(t,e,n,o)=>{const r=e.querySelectorAll(t);if(!r||!r.length)return null;const s=Array.from(r),i=e.getBoundingClientRect(),a={x:i.width*o[0],y:i.height*o[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-a.x)/n,y:(u.top-i.top-a.y)/n,...Mn(l)}})};function de(t,e,n){return n===void 0?n:o=>{const r=e().nodeInternals.get(t);r&&n(o,{...r})}}function xn({id:t,store:e,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:a,onError:l}=e.getState(),u=a.get(t);if(!u){l==null||l("012",Et.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=o==null?void 0:o.current)==null?void 0:c.blur()})):r([t])}function su(){const t=nt();return N.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:r,snapToGrid:s}=t.getState(),i=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-o[0])/o[2],y:(a-o[1])/o[2]};return{xSnapped:s?r[0]*Math.round(l.x/r[0]):l.x,ySnapped:s?r[1]*Math.round(l.y/r[1]):l.y,...l}},[])}function sn(t){return(e,n,o)=>t==null?void 0:t(e,o)}function Dr({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:s,selectNodesOnDrag:i}){const a=nt(),[l,u]=N.useState(!1),c=N.useRef([]),f=N.useRef({x:null,y:null}),d=N.useRef(0),g=N.useRef(null),y=N.useRef({x:0,y:0}),p=N.useRef(null),v=N.useRef(!1),m=N.useRef(!1),_=su();return N.useEffect(()=>{if(t!=null&&t.current){const C=ht(t.current),w=({x:R,y:P})=>{const{nodeInternals:D,onNodeDrag:L,onSelectionDrag:B,updateNodePositions:H,nodeExtent:b,snapGrid:h,snapToGrid:E,nodeOrigin:S,onError:T}=a.getState();f.current={x:R,y:P};let $=!1,x={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&b){const k=$n(c.current,S);x=we(k)}if(c.current=c.current.map(k=>{const O={x:R-k.distance.x,y:P-k.distance.y};E&&(O.x=h[0]*Math.round(O.x/h[0]),O.y=h[1]*Math.round(O.y/h[1]));const V=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];c.current.length>1&&b&&!k.extent&&(V[0][0]=k.positionAbsolute.x-x.x+b[0][0],V[1][0]=k.positionAbsolute.x+(k.width??0)-x.x2+b[1][0],V[0][1]=k.positionAbsolute.y-x.y+b[0][1],V[1][1]=k.positionAbsolute.y+(k.height??0)-x.y2+b[1][1]);const F=$r(k,O,D,V,S,T);return $=$||k.position.x!==F.position.x||k.position.y!==F.position.y,k.position=F.position,k.positionAbsolute=F.positionAbsolute,k}),!$)return;H(c.current,!0,!0),u(!0);const M=r?L:sn(B);if(M&&p.current){const[k,O]=rn({nodeId:r,dragItems:c.current,nodeInternals:D});M(p.current,k,O)}},A=()=>{if(!g.current)return;const[R,P]=Jo(y.current,g.current);if(R!==0||P!==0){const{transform:D,panBy:L}=a.getState();f.current.x=(f.current.x??0)-R/D[2],f.current.y=(f.current.y??0)-P/D[2],L({x:R,y:P})&&w(f.current)}d.current=requestAnimationFrame(A)},I=R=>{var S;const{nodeInternals:P,multiSelectionActive:D,nodesDraggable:L,unselectNodesAndEdges:B,onNodeDragStart:H,onSelectionDragStart:b}=a.getState();m.current=!0;const h=r?H:sn(b);(!i||!s)&&!D&&r&&((S=P.get(r))!=null&&S.selected||B()),r&&s&&i&&xn({id:r,store:a,nodeRef:t});const E=_(R);if(f.current=E,c.current=ru(P,L,E,r),h&&c.current){const[T,$]=rn({nodeId:r,dragItems:c.current,nodeInternals:P});h(R.sourceEvent,T,$)}};if(e)C.on(".drag",null);else{const R=Fa().on("start",P=>{const{domNode:D,nodeDragThreshold:L}=a.getState();L===0&&I(P);const B=_(P);f.current=B,g.current=(D==null?void 0:D.getBoundingClientRect())||null,y.current=kt(P.sourceEvent,g.current)}).on("drag",P=>{var H,b;const D=_(P),{autoPanOnNodeDrag:L,nodeDragThreshold:B}=a.getState();if(!v.current&&m.current&&L&&(v.current=!0,A()),!m.current){const h=D.xSnapped-(((H=f==null?void 0:f.current)==null?void 0:H.x)??0),E=D.ySnapped-(((b=f==null?void 0:f.current)==null?void 0:b.y)??0);Math.sqrt(h*h+E*E)>B&&I(P)}(f.current.x!==D.xSnapped||f.current.y!==D.ySnapped)&&c.current&&m.current&&(p.current=P.sourceEvent,y.current=kt(P.sourceEvent,g.current),w(D))}).on("end",P=>{if(m.current&&(u(!1),v.current=!1,m.current=!1,cancelAnimationFrame(d.current),c.current)){const{updateNodePositions:D,nodeInternals:L,onNodeDragStop:B,onSelectionDragStop:H}=a.getState(),b=r?B:sn(H);if(D(c.current,!1,!1),b){const[h,E]=rn({nodeId:r,dragItems:c.current,nodeInternals:L});b(P.sourceEvent,h,E)}}}).filter(P=>{const D=P.target;return!P.button&&(!n||!go(D,`.${n}`,t))&&(!o||go(D,o,t))});return C.call(R),()=>{C.on(".drag",null)}}}},[t,e,n,o,s,a,r,i,_]),l}function zr(){const t=nt();return N.useCallback(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:s,getNodes:i,snapToGrid:a,snapGrid:l,onError:u,nodesDraggable:c}=t.getState(),f=i().filter(_=>_.selected&&(_.draggable||c&&typeof _.draggable>"u")),d=a?l[0]:5,g=a?l[1]:5,y=n.isShiftPressed?4:1,p=n.x*d*y,v=n.y*g*y,m=f.map(_=>{if(_.positionAbsolute){const C={x:_.positionAbsolute.x+p,y:_.positionAbsolute.y+v};a&&(C.x=l[0]*Math.round(C.x/l[0]),C.y=l[1]*Math.round(C.y/l[1]));const{positionAbsolute:w,position:A}=$r(_,C,o,r,void 0,u);_.position=A,_.positionAbsolute=w}return _});s(m,!0,!1)},[])}const te={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var he=t=>{const e=({id:n,type:o,data:r,xPos:s,yPos:i,xPosOrigin:a,yPosOrigin:l,selected:u,onClick:c,onMouseEnter:f,onMouseMove:d,onMouseLeave:g,onContextMenu:y,onDoubleClick:p,style:v,className:m,isDraggable:_,isSelectable:C,isConnectable:w,isFocusable:A,selectNodesOnDrag:I,sourcePosition:R,targetPosition:P,hidden:D,resizeObserver:L,dragHandle:B,zIndex:H,isParent:b,noDragClassName:h,noPanClassName:E,initialized:S,disableKeyboardA11y:T,ariaLabel:$,rfId:x})=>{const M=nt(),k=N.useRef(null),O=N.useRef(R),V=N.useRef(P),F=N.useRef(o),K=C||_||c||f||d||g,Z=zr(),U=de(n,M.getState,f),G=de(n,M.getState,d),Q=de(n,M.getState,g),J=de(n,M.getState,y),rt=de(n,M.getState,p),dt=q=>{const{nodeDragThreshold:it}=M.getState();if(C&&(!I||!_||it>0)&&xn({id:n,store:M,nodeRef:k}),c){const at=M.getState().nodeInternals.get(n);at&&c(q,{...at})}},pt=q=>{if(!gn(q))if(nr.includes(q.key)&&C){const it=q.key==="Escape";xn({id:n,store:M,unselect:it,nodeRef:k})}else!T&&_&&u&&Object.prototype.hasOwnProperty.call(te,q.key)&&(M.setState({ariaLiveMessage:`Moved selected node ${q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),Z({x:te[q.key].x,y:te[q.key].y,isShiftPressed:q.shiftKey}))};N.useEffect(()=>{if(k.current&&!D){const q=k.current;return L==null||L.observe(q),()=>L==null?void 0:L.unobserve(q)}},[D]),N.useEffect(()=>{const q=F.current!==o,it=O.current!==R,at=V.current!==P;k.current&&(q||it||at)&&(q&&(F.current=o),it&&(O.current=R),at&&(V.current=P),M.getState().updateNodeDimensions([{id:n,nodeElement:k.current,forceUpdate:!0}]))},[n,o,R,P]);const tt=Dr({nodeRef:k,disabled:D||!_,noDragClassName:h,handleSelector:B,nodeId:n,isSelectable:C,selectNodesOnDrag:I});return D?null:z.createElement("div",{className:ft(["react-flow__node",`react-flow__node-${o}`,{[E]:_},m,{selected:u,selectable:C,parent:b,dragging:tt}]),ref:k,style:{zIndex:H,transform:`translate(${a}px,${l}px)`,pointerEvents:K?"all":"none",visibility:S?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:U,onMouseMove:G,onMouseLeave:Q,onContextMenu:J,onClick:dt,onDoubleClick:rt,onKeyDown:A?pt:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":T?void 0:`${_r}-${x}`,"aria-label":$},z.createElement(Sl,{value:n},z.createElement(t,{id:n,data:r,type:o,xPos:s,yPos:i,selected:u,isConnectable:w,sourcePosition:R,targetPosition:P,dragging:tt,dragHandle:B,zIndex:H})))};return e.displayName="NodeWrapper",N.memo(e)};const au=t=>{const e=t.getNodes().filter(n=>n.selected);return{...$n(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function cu({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const o=nt(),{width:r,height:s,x:i,y:a,transformString:l,userSelectionActive:u}=j(au,st),c=zr(),f=N.useRef(null);if(N.useEffect(()=>{var y;n||(y=f.current)==null||y.focus({preventScroll:!0})},[n]),Dr({nodeRef:f}),u||!r||!s)return null;const d=t?y=>{const p=o.getState().getNodes().filter(v=>v.selected);t(y,p)}:void 0,g=y=>{Object.prototype.hasOwnProperty.call(te,y.key)&&c({x:te[y.key].x,y:te[y.key].y,isShiftPressed:y.shiftKey})};return z.createElement("div",{className:ft(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},z.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:r,height:s,top:a,left:i}}))}var lu=N.memo(cu);const uu=t=>t.nodesSelectionActive,Rr=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:a,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:f,selectionOnDrag:d,selectionMode:g,onSelectionStart:y,onSelectionEnd:p,multiSelectionKeyCode:v,panActivationKeyCode:m,zoomActivationKeyCode:_,elementsSelectable:C,zoomOnScroll:w,zoomOnPinch:A,panOnScroll:I,panOnScrollSpeed:R,panOnScrollMode:P,zoomOnDoubleClick:D,panOnDrag:L,defaultViewport:B,translateExtent:H,minZoom:b,maxZoom:h,preventScrolling:E,onSelectionContextMenu:S,noWheelClassName:T,noPanClassName:$,disableKeyboardA11y:x})=>{const M=j(uu),k=Se(f),O=Se(m),V=O||L,F=O||I,K=k||d&&V!==!0;return Gl({deleteKeyCode:a,multiSelectionKeyCode:v}),z.createElement(jl,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:w,zoomOnPinch:A,panOnScroll:F,panOnScrollSpeed:R,panOnScrollMode:P,zoomOnDoubleClick:D,panOnDrag:!k&&V,defaultViewport:B,translateExtent:H,minZoom:b,maxZoom:h,zoomActivationKeyCode:_,preventScrolling:E,noWheelClassName:T,noPanClassName:$},z.createElement(kr,{onSelectionStart:y,onSelectionEnd:p,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:V,isSelecting:!!K,selectionMode:g},t,M&&z.createElement(lu,{onSelectionContextMenu:S,noPanClassName:$,disableKeyboardA11y:x})))};Rr.displayName="FlowRenderer";var fu=N.memo(Rr);function du(t){return j(N.useCallback(n=>t?lr(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function hu(t){const e={input:he(t.input||wr),default:he(t.default||wn),output:he(t.output||Sr),group:he(t.group||zn)},n={},o=Object.keys(t).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,s)=>(r[s]=he(t[s]||wn),r),n);return{...e,...o}}const gu=({x:t,y:e,width:n,height:o,origin:r})=>!n||!o?{x:t,y:e}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:t,y:e}:{x:t-n*r[0],y:e-o*r[1]},pu=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Ir=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:s,onError:i}=j(pu,st),a=du(t.onlyRenderVisibleElements),l=N.useRef(),u=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(f=>{const d=f.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));s(d)});return l.current=c,c},[]);return N.useEffect(()=>()=>{var c;(c=l==null?void 0:l.current)==null||c.disconnect()},[]),z.createElement("div",{className:"react-flow__nodes",style:Rn},a.map(c=>{var A,I;let f=c.type||"default";t.nodeTypes[f]||(i==null||i("003",Et.error003(f)),f="default");const d=t.nodeTypes[f]||t.nodeTypes.default,g=!!(c.draggable||e&&typeof c.draggable>"u"),y=!!(c.selectable||r&&typeof c.selectable>"u"),p=!!(c.connectable||n&&typeof c.connectable>"u"),v=!!(c.focusable||o&&typeof c.focusable>"u"),m=t.nodeExtent?Cn(c.positionAbsolute,t.nodeExtent):c.positionAbsolute,_=(m==null?void 0:m.x)??0,C=(m==null?void 0:m.y)??0,w=gu({x:_,y:C,width:c.width??0,height:c.height??0,origin:t.nodeOrigin});return z.createElement(d,{key:c.id,id:c.id,className:c.className,style:c.style,type:f,data:c.data,sourcePosition:c.sourcePosition||Y.Bottom,targetPosition:c.targetPosition||Y.Top,hidden:c.hidden,xPos:_,yPos:C,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!c.selected,isDraggable:g,isSelectable:y,isConnectable:p,isFocusable:v,resizeObserver:u,dragHandle:c.dragHandle,zIndex:((A=c[et])==null?void 0:A.z)??0,isParent:!!((I=c[et])!=null&&I.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!c.width&&!!c.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:c.ariaLabel})}))};Ir.displayName="NodeRenderer";var mu=N.memo(Ir);const yu=(t,e,n)=>n===Y.Left?t-e:n===Y.Right?t+e:t,wu=(t,e,n)=>n===Y.Top?t-e:n===Y.Bottom?t+e:t,mo="react-flow__edgeupdater",yo=({position:t,centerX:e,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:s,onMouseOut:i,type:a})=>z.createElement("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:i,className:ft([mo,`${mo}-${a}`]),cx:yu(e,o,t),cy:wu(n,o,t),r:o,stroke:"transparent",fill:"transparent"}),xu=()=>!0;var qt=t=>{const e=({id:n,className:o,type:r,data:s,onClick:i,onEdgeDoubleClick:a,selected:l,animated:u,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:p,style:v,source:m,target:_,sourceX:C,sourceY:w,targetX:A,targetY:I,sourcePosition:R,targetPosition:P,elementsSelectable:D,hidden:L,sourceHandleId:B,targetHandleId:H,onContextMenu:b,onMouseEnter:h,onMouseMove:E,onMouseLeave:S,edgeUpdaterRadius:T,onEdgeUpdate:$,onEdgeUpdateStart:x,onEdgeUpdateEnd:M,markerEnd:k,markerStart:O,rfId:V,ariaLabel:F,isFocusable:K,isUpdatable:Z,pathOptions:U,interactionWidth:G})=>{const Q=N.useRef(null),[J,rt]=N.useState(!1),[dt,pt]=N.useState(!1),tt=nt(),q=N.useMemo(()=>`url(#${mn(O,V)})`,[O,V]),it=N.useMemo(()=>`url(#${mn(k,V)})`,[k,V]);if(L)return null;const at=ot=>{var mt;const{edges:ct,addSelectedEdges:Rt,unselectNodesAndEdges:It,multiSelectionActive:Bt}=tt.getState(),xt=ct.find(ae=>ae.id===n);xt&&(D&&(tt.setState({nodesSelectionActive:!1}),xt.selected&&Bt?(It({nodes:[],edges:[xt]}),(mt=Q.current)==null||mt.blur()):Rt([n])),i&&i(ot,xt))},X=fe(n,tt.getState,a),Pt=fe(n,tt.getState,b),$t=fe(n,tt.getState,h),ie=fe(n,tt.getState,E),Xt=fe(n,tt.getState,S),Dt=(ot,ct)=>{if(ot.button!==0)return;const{edges:Rt,isValidConnection:It}=tt.getState(),Bt=ct?_:m,xt=(ct?H:B)||null,mt=ct?"target":"source",ae=It||xu,Ge=ct,ce=Rt.find(Ot=>Ot.id===n);pt(!0),x==null||x(ot,ce,mt);const qe=Ot=>{pt(!1),M==null||M(Ot,ce,mt)};gr({event:ot,handleId:xt,nodeId:Bt,onConnect:Ot=>$==null?void 0:$(ce,Ot),isTarget:Ge,getState:tt.getState,setState:tt.setState,isValidConnection:ae,edgeUpdaterType:mt,onEdgeUpdateEnd:qe})},bt=ot=>Dt(ot,!0),Kt=ot=>Dt(ot,!1),Nt=()=>rt(!0),zt=()=>rt(!1),se=!D&&!i,Wt=ot=>{var ct;if(nr.includes(ot.key)&&D){const{unselectNodesAndEdges:Rt,addSelectedEdges:It,edges:Bt}=tt.getState();ot.key==="Escape"?((ct=Q.current)==null||ct.blur(),Rt({edges:[Bt.find(mt=>mt.id===n)]})):It([n])}};return z.createElement("g",{className:ft(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:l,animated:u,inactive:se,updating:J}]),onClick:at,onDoubleClick:X,onContextMenu:Pt,onMouseEnter:$t,onMouseMove:ie,onMouseLeave:Xt,onKeyDown:K?Wt:void 0,tabIndex:K?0:void 0,role:K?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":F===null?void 0:F||`Edge from ${m} to ${_}`,"aria-describedby":K?`${Er}-${V}`:void 0,ref:Q},!dt&&z.createElement(t,{id:n,source:m,target:_,selected:l,animated:u,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:p,data:s,style:v,sourceX:C,sourceY:w,targetX:A,targetY:I,sourcePosition:R,targetPosition:P,sourceHandleId:B,targetHandleId:H,markerStart:q,markerEnd:it,pathOptions:U,interactionWidth:G}),Z&&z.createElement(z.Fragment,null,(Z==="source"||Z===!0)&&z.createElement(yo,{position:R,centerX:C,centerY:w,radius:T,onMouseDown:bt,onMouseEnter:Nt,onMouseOut:zt,type:"source"}),(Z==="target"||Z===!0)&&z.createElement(yo,{position:P,centerX:A,centerY:I,radius:T,onMouseDown:Kt,onMouseEnter:Nt,onMouseOut:zt,type:"target"})))};return e.displayName="EdgeWrapper",N.memo(e)};function Su(t){const e={default:qt(t.default||Le),straight:qt(t.bezier||kn),step:qt(t.step||Tn),smoothstep:qt(t.step||Ue),simplebezier:qt(t.simplebezier||An)},n={},o=Object.keys(t).filter(r=>!["default","bezier"].includes(r)).reduce((r,s)=>(r[s]=qt(t[s]||Le),r),n);return{...e,...o}}function wo(t,e,n=null){const o=((n==null?void 0:n.x)||0)+e.x,r=((n==null?void 0:n.y)||0)+e.y,s=(n==null?void 0:n.width)||e.width,i=(n==null?void 0:n.height)||e.height;switch(t){case Y.Top:return{x:o+s/2,y:r};case Y.Right:return{x:o+s,y:r+i/2};case Y.Bottom:return{x:o+s/2,y:r+i};case Y.Left:return{x:o,y:r+i/2}}}function xo(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const vu=(t,e,n,o,r,s)=>{const i=wo(n,t,e),a=wo(s,o,r);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function _u({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:s,width:i,height:a,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+r),y2:Math.max(t.y+o,e.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=we({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:a/l[2]}),f=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),d=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(f*d)>0}function So(t){var o,r,s,i,a;const e=((o=t==null?void 0:t[et])==null?void 0:o.handleBounds)||null,n=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((r=t==null?void 0:t.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!n]}const Eu=[{level:0,isMaxLevel:!0,edges:[]}];function bu(t,e,n=!1){let o=-1;const r=t.reduce((i,a)=>{var c,f;const l=ut(a.zIndex);let u=l?a.zIndex:0;if(n){const d=e.get(a.target),g=e.get(a.source),y=a.selected||(d==null?void 0:d.selected)||(g==null?void 0:g.selected),p=Math.max(((c=g==null?void 0:g[et])==null?void 0:c.z)||0,((f=d==null?void 0:d[et])==null?void 0:f.z)||0,1e3);u=(l?a.zIndex:0)+(y?p:0)}return i[u]?i[u].push(a):i[u]=[a],o=u>o?u:o,i},{}),s=Object.entries(r).map(([i,a])=>{const l=+i;return{edges:a,level:l,isMaxLevel:l===o}});return s.length===0?Eu:s}function Nu(t,e,n){const o=j(N.useCallback(r=>t?r.edges.filter(s=>{const i=e.get(s.source),a=e.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&_u({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:a.width,targetHeight:a.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[t,e]));return bu(o,e,n)}const Mu=({color:t="none",strokeWidth:e=1})=>z.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Cu=({color:t="none",strokeWidth:e=1})=>z.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),vo={[He.Arrow]:Mu,[He.ArrowClosed]:Cu};function Au(t){const e=nt();return N.useMemo(()=>{var r,s;return Object.prototype.hasOwnProperty.call(vo,t)?vo[t]:((s=(r=e.getState()).onError)==null||s.call(r,"009",Et.error009(t)),null)},[t])}const Tu=({id:t,type:e,color:n,width:o=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const l=Au(e);return l?z.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},z.createElement(l,{color:n,strokeWidth:i})):null},ku=({defaultColor:t,rfId:e})=>n=>{const o=[];return n.edges.reduce((r,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const a=mn(i,e);o.includes(a)||(r.push({id:a,color:i.color||t,...i}),o.push(a))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))},Br=({defaultColor:t,rfId:e})=>{const n=j(N.useCallback(ku({defaultColor:t,rfId:e}),[t,e]),(o,r)=>!(o.length!==r.length||o.some((s,i)=>s.id!==r[i].id)));return z.createElement("defs",null,n.map(o=>z.createElement(Tu,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};Br.displayName="MarkerDefinitions";var Pu=N.memo(Br);const $u=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),Or=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:s,onEdgeUpdate:i,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:g,onEdgeUpdateStart:y,onEdgeUpdateEnd:p,children:v})=>{const{edgesFocusable:m,edgesUpdatable:_,elementsSelectable:C,width:w,height:A,connectionMode:I,nodeInternals:R,onError:P}=j($u,st),D=Nu(e,R,n);return w?z.createElement(z.Fragment,null,D.map(({level:L,edges:B,isMaxLevel:H})=>z.createElement("svg",{key:L,style:{zIndex:L},width:w,height:A,className:"react-flow__edges react-flow__container"},H&&z.createElement(Pu,{defaultColor:t,rfId:o}),z.createElement("g",null,B.map(b=>{const[h,E,S]=So(R.get(b.source)),[T,$,x]=So(R.get(b.target));if(!S||!x)return null;let M=b.type||"default";r[M]||(P==null||P("011",Et.error011(M)),M="default");const k=r[M]||r.default,O=I===Yt.Strict?$.target:($.target??[]).concat($.source??[]),V=xo(E.source,b.sourceHandle),F=xo(O,b.targetHandle),K=(V==null?void 0:V.position)||Y.Bottom,Z=(F==null?void 0:F.position)||Y.Top,U=!!(b.focusable||m&&typeof b.focusable>"u"),G=typeof i<"u"&&(b.updatable||_&&typeof b.updatable>"u");if(!V||!F)return P==null||P("008",Et.error008(V,b)),null;const{sourceX:Q,sourceY:J,targetX:rt,targetY:dt}=vu(h,V,K,T,F,Z);return z.createElement(k,{key:b.id,id:b.id,className:ft([b.className,s]),type:M,data:b.data,selected:!!b.selected,animated:!!b.animated,hidden:!!b.hidden,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,style:b.style,source:b.source,target:b.target,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerEnd:b.markerEnd,markerStart:b.markerStart,sourceX:Q,sourceY:J,targetX:rt,targetY:dt,sourcePosition:K,targetPosition:Z,elementsSelectable:C,onEdgeUpdate:i,onContextMenu:a,onMouseEnter:l,onMouseMove:u,onMouseLeave:c,onClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:g,onEdgeUpdateStart:y,onEdgeUpdateEnd:p,rfId:o,ariaLabel:b.ariaLabel,isFocusable:U,isUpdatable:G,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth})})))),v):null};Or.displayName="EdgeRenderer";var Du=N.memo(Or);const zu=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Ru({children:t}){const e=j(zu);return z.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function Iu(t){const e=Cr(),n=N.useRef(!1);N.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const Bu={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},Hr=({nodeId:t,handleType:e,style:n,type:o=At.Bezier,CustomComponent:r,connectionStatus:s})=>{var I,R,P;const{fromNode:i,handleId:a,toX:l,toY:u,connectionMode:c}=j(N.useCallback(D=>({fromNode:D.nodeInternals.get(t),handleId:D.connectionHandleId,toX:(D.connectionPosition.x-D.transform[0])/D.transform[2],toY:(D.connectionPosition.y-D.transform[1])/D.transform[2],connectionMode:D.connectionMode}),[t]),st),f=(I=i==null?void 0:i[et])==null?void 0:I.handleBounds;let d=f==null?void 0:f[e];if(c===Yt.Loose&&(d=d||(f==null?void 0:f[e==="source"?"target":"source"])),!i||!d)return null;const g=a?d.find(D=>D.id===a):d[0],y=g?g.x+g.width/2:(i.width??0)/2,p=g?g.y+g.height/2:i.height??0,v=(((R=i.positionAbsolute)==null?void 0:R.x)??0)+y,m=(((P=i.positionAbsolute)==null?void 0:P.y)??0)+p,_=g==null?void 0:g.position,C=_?Bu[_]:null;if(!_||!C)return null;if(r)return z.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:i,fromHandle:g,fromX:v,fromY:m,toX:l,toY:u,fromPosition:_,toPosition:C,connectionStatus:s});let w="";const A={sourceX:v,sourceY:m,sourcePosition:_,targetX:l,targetY:u,targetPosition:C};return o===At.Bezier?[w]=ar(A):o===At.Step?[w]=pn({...A,borderRadius:0}):o===At.SmoothStep?[w]=pn(A):o===At.SimpleBezier?[w]=sr(A):w=`M${v},${m} ${l},${u}`,z.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};Hr.displayName="ConnectionLine";const Ou=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Hu({containerStyle:t,style:e,type:n,component:o}){const{nodeId:r,handleType:s,nodesConnectable:i,width:a,height:l,connectionStatus:u}=j(Ou,st);return!(r&&s&&a&&i)?null:z.createElement("svg",{style:t,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},z.createElement("g",{className:ft(["react-flow__connection",u])},z.createElement(Hr,{nodeId:r,handleType:s,style:e,type:n,CustomComponent:o,connectionStatus:u})))}function _o(t,e){return N.useRef(null),nt(),N.useMemo(()=>e(t),[t])}const Lr=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:s,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:g,onSelectionContextMenu:y,onSelectionStart:p,onSelectionEnd:v,connectionLineType:m,connectionLineStyle:_,connectionLineComponent:C,connectionLineContainerStyle:w,selectionKeyCode:A,selectionOnDrag:I,selectionMode:R,multiSelectionKeyCode:P,panActivationKeyCode:D,zoomActivationKeyCode:L,deleteKeyCode:B,onlyRenderVisibleElements:H,elementsSelectable:b,selectNodesOnDrag:h,defaultViewport:E,translateExtent:S,minZoom:T,maxZoom:$,preventScrolling:x,defaultMarkerColor:M,zoomOnScroll:k,zoomOnPinch:O,panOnScroll:V,panOnScrollSpeed:F,panOnScrollMode:K,zoomOnDoubleClick:Z,panOnDrag:U,onPaneClick:G,onPaneMouseEnter:Q,onPaneMouseMove:J,onPaneMouseLeave:rt,onPaneScroll:dt,onPaneContextMenu:pt,onEdgeUpdate:tt,onEdgeContextMenu:q,onEdgeMouseEnter:it,onEdgeMouseMove:at,onEdgeMouseLeave:X,edgeUpdaterRadius:Pt,onEdgeUpdateStart:$t,onEdgeUpdateEnd:ie,noDragClassName:Xt,noWheelClassName:Dt,noPanClassName:bt,elevateEdgesOnSelect:Kt,disableKeyboardA11y:Nt,nodeOrigin:zt,nodeExtent:se,rfId:Wt})=>{const ot=_o(t,hu),ct=_o(e,Su);return Iu(s),z.createElement(fu,{onPaneClick:G,onPaneMouseEnter:Q,onPaneMouseMove:J,onPaneMouseLeave:rt,onPaneContextMenu:pt,onPaneScroll:dt,deleteKeyCode:B,selectionKeyCode:A,selectionOnDrag:I,selectionMode:R,onSelectionStart:p,onSelectionEnd:v,multiSelectionKeyCode:P,panActivationKeyCode:D,zoomActivationKeyCode:L,elementsSelectable:b,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:k,zoomOnPinch:O,zoomOnDoubleClick:Z,panOnScroll:V,panOnScrollSpeed:F,panOnScrollMode:K,panOnDrag:U,defaultViewport:E,translateExtent:S,minZoom:T,maxZoom:$,onSelectionContextMenu:y,preventScrolling:x,noDragClassName:Xt,noWheelClassName:Dt,noPanClassName:bt,disableKeyboardA11y:Nt},z.createElement(Ru,null,z.createElement(Du,{edgeTypes:ct,onEdgeClick:a,onEdgeDoubleClick:u,onEdgeUpdate:tt,onlyRenderVisibleElements:H,onEdgeContextMenu:q,onEdgeMouseEnter:it,onEdgeMouseMove:at,onEdgeMouseLeave:X,onEdgeUpdateStart:$t,onEdgeUpdateEnd:ie,edgeUpdaterRadius:Pt,defaultMarkerColor:M,noPanClassName:bt,elevateEdgesOnSelect:!!Kt,disableKeyboardA11y:Nt,rfId:Wt},z.createElement(Hu,{style:_,type:m,component:C,containerStyle:w})),z.createElement("div",{className:"react-flow__edgelabel-renderer"}),z.createElement(mu,{nodeTypes:ot,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:g,selectNodesOnDrag:h,onlyRenderVisibleElements:H,noPanClassName:bt,noDragClassName:Xt,disableKeyboardA11y:Nt,nodeOrigin:zt,nodeExtent:se,rfId:Wt})))};Lr.displayName="GraphView";var Lu=N.memo(Lr);const Sn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Mt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Sn,nodeExtent:Sn,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Yt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:gl,isValidConnection:void 0},Vu=()=>ts((t,e)=>({...Mt,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:s}=e();t({nodeInternals:nn(n,o,r,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=e();t({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=typeof n<"u",s=typeof o<"u",i=r?nn(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:s?o:[],hasDefaultNodes:r,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:l,nodeOrigin:u}=e(),c=l==null?void 0:l.querySelector(".react-flow__viewport");if(!c)return;const f=window.getComputedStyle(c),{m22:d}=new window.DOMMatrixReadOnly(f.transform),g=n.reduce((p,v)=>{const m=r.get(v.id);if(m){const _=Mn(v.nodeElement);!!(_.width&&_.height&&(m.width!==_.width||m.height!==_.height||v.forceUpdate))&&(r.set(m.id,{...m,[et]:{...m[et],handleBounds:{source:po(".source",v.nodeElement,d,u),target:po(".target",v.nodeElement,d,u)}},..._}),p.push({id:m.id,type:"dimensions",dimensions:_}))}return p},[]);Nr(r,u);const y=i||s&&!i&&Mr(e,{initial:!0,...a});t({nodeInternals:new Map(r),fitViewOnInitDone:y}),(g==null?void 0:g.length)>0&&(o==null||o(g))},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:s}=e(),i=n.map(a=>{const l={id:a.id,type:"position",dragging:r};return o&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});s(i)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:s,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:l}=e();if(n!=null&&n.length){if(s){const u=Tr(n,a()),c=nn(u,r,i,l);t({nodeInternals:c})}o==null||o(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=e();let i,a=null;o?i=n.map(l=>Ct(l,!0)):(i=Qt(s(),n),a=Qt(r,[])),Ae({changedNodes:i,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=e();let i,a=null;o?i=n.map(l=>Ct(l,!0)):(i=Qt(r,n),a=Qt(s(),[])),Ae({changedNodes:a,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:s}=e(),i=n||s(),a=o||r,l=i.map(c=>(c.selected=!1,Ct(c.id,!1))),u=a.map(c=>Ct(c.id,!1));Ae({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=e();o==null||o.scaleExtent([n,r]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=e();o==null||o.scaleExtent([r,n]),t({maxZoom:n})},setTranslateExtent:n=>{var o;(o=e().d3Zoom)==null||o.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=e(),s=o().filter(a=>a.selected).map(a=>Ct(a.id,!1)),i=n.filter(a=>a.selected).map(a=>Ct(a.id,!1));Ae({changedNodes:s,changedEdges:i,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:o}=e();o.forEach(r=>{r.positionAbsolute=Cn(r.position,n)}),t({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:s,d3Zoom:i,d3Selection:a,translateExtent:l}=e();if(!i||!a||!n.x&&!n.y)return!1;const u=Tt.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),c=[[0,0],[r,s]],f=i==null?void 0:i.constrain()(u,c,l);return i.transform(a,f),o[0]!==f.x||o[1]!==f.y||o[2]!==f.k},cancelConnection:()=>t({connectionNodeId:Mt.connectionNodeId,connectionHandleId:Mt.connectionHandleId,connectionHandleType:Mt.connectionHandleType,connectionStatus:Mt.connectionStatus,connectionStartHandle:Mt.connectionStartHandle,connectionEndHandle:Mt.connectionEndHandle}),reset:()=>t({...Mt})}),Object.is),Vr=({children:t})=>{const e=N.useRef(null);return e.current||(e.current=Vu()),z.createElement(al,{value:e.current},t)};Vr.displayName="ReactFlowProvider";const Fr=({children:t})=>N.useContext(Ze)?z.createElement(z.Fragment,null,t):z.createElement(Vr,null,t);Fr.displayName="ReactFlowWrapper";const Fu={input:wr,default:wn,output:Sr,group:zn},Yu={default:Le,straight:kn,step:Tn,smoothstep:Ue,simplebezier:An},Xu=[0,0],Ku=[15,15],Wu={x:0,y:0,zoom:1},Zu={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Uu=N.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:s=Fu,edgeTypes:i=Yu,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:f,onMoveEnd:d,onConnect:g,onConnectStart:y,onConnectEnd:p,onClickConnectStart:v,onClickConnectEnd:m,onNodeMouseEnter:_,onNodeMouseMove:C,onNodeMouseLeave:w,onNodeContextMenu:A,onNodeDoubleClick:I,onNodeDragStart:R,onNodeDrag:P,onNodeDragStop:D,onNodesDelete:L,onEdgesDelete:B,onSelectionChange:H,onSelectionDragStart:b,onSelectionDrag:h,onSelectionDragStop:E,onSelectionContextMenu:S,onSelectionStart:T,onSelectionEnd:$,connectionMode:x=Yt.Strict,connectionLineType:M=At.Bezier,connectionLineStyle:k,connectionLineComponent:O,connectionLineContainerStyle:V,deleteKeyCode:F="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:Z=!1,selectionMode:U=xe.Full,panActivationKeyCode:G="Space",multiSelectionKeyCode:Q=Oe()?"Meta":"Control",zoomActivationKeyCode:J=Oe()?"Meta":"Control",snapToGrid:rt=!1,snapGrid:dt=Ku,onlyRenderVisibleElements:pt=!1,selectNodesOnDrag:tt=!0,nodesDraggable:q,nodesConnectable:it,nodesFocusable:at,nodeOrigin:X=Xu,edgesFocusable:Pt,edgesUpdatable:$t,elementsSelectable:ie,defaultViewport:Xt=Wu,minZoom:Dt=.5,maxZoom:bt=2,translateExtent:Kt=Sn,preventScrolling:Nt=!0,nodeExtent:zt,defaultMarkerColor:se="#b1b1b7",zoomOnScroll:Wt=!0,zoomOnPinch:ot=!0,panOnScroll:ct=!1,panOnScrollSpeed:Rt=.5,panOnScrollMode:It=Vt.Free,zoomOnDoubleClick:Bt=!0,panOnDrag:xt=!0,onPaneClick:mt,onPaneMouseEnter:ae,onPaneMouseMove:Ge,onPaneMouseLeave:ce,onPaneScroll:qe,onPaneContextMenu:In,children:Ot,onEdgeUpdate:Xr,onEdgeContextMenu:Kr,onEdgeDoubleClick:Wr,onEdgeMouseEnter:Zr,onEdgeMouseMove:Ur,onEdgeMouseLeave:Gr,onEdgeUpdateStart:qr,onEdgeUpdateEnd:Qr,edgeUpdaterRadius:Jr=10,onNodesChange:jr,onEdgesChange:ti,noDragClassName:ei="nodrag",noWheelClassName:ni="nowheel",noPanClassName:Bn="nopan",fitView:oi=!1,fitViewOptions:ri,connectOnClick:ii=!0,attributionPosition:si,proOptions:ai,defaultEdgeOptions:ci,elevateNodesOnSelect:li=!0,elevateEdgesOnSelect:ui=!1,disableKeyboardA11y:On=!1,autoPanOnConnect:fi=!0,autoPanOnNodeDrag:di=!0,connectionRadius:hi=20,isValidConnection:gi,onError:pi,style:mi,id:Hn,nodeDragThreshold:yi,...wi},xi)=>{const Qe=Hn||"1";return z.createElement("div",{...wi,style:{...mi,...Zu},ref:xi,className:ft(["react-flow",r]),"data-testid":"rf__wrapper",id:Hn},z.createElement(Fr,null,z.createElement(Lu,{onInit:u,onMove:c,onMoveStart:f,onMoveEnd:d,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:_,onNodeMouseMove:C,onNodeMouseLeave:w,onNodeContextMenu:A,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:i,connectionLineType:M,connectionLineStyle:k,connectionLineComponent:O,connectionLineContainerStyle:V,selectionKeyCode:K,selectionOnDrag:Z,selectionMode:U,deleteKeyCode:F,multiSelectionKeyCode:Q,panActivationKeyCode:G,zoomActivationKeyCode:J,onlyRenderVisibleElements:pt,selectNodesOnDrag:tt,defaultViewport:Xt,translateExtent:Kt,minZoom:Dt,maxZoom:bt,preventScrolling:Nt,zoomOnScroll:Wt,zoomOnPinch:ot,zoomOnDoubleClick:Bt,panOnScroll:ct,panOnScrollSpeed:Rt,panOnScrollMode:It,panOnDrag:xt,onPaneClick:mt,onPaneMouseEnter:ae,onPaneMouseMove:Ge,onPaneMouseLeave:ce,onPaneScroll:qe,onPaneContextMenu:In,onSelectionContextMenu:S,onSelectionStart:T,onSelectionEnd:$,onEdgeUpdate:Xr,onEdgeContextMenu:Kr,onEdgeDoubleClick:Wr,onEdgeMouseEnter:Zr,onEdgeMouseMove:Ur,onEdgeMouseLeave:Gr,onEdgeUpdateStart:qr,onEdgeUpdateEnd:Qr,edgeUpdaterRadius:Jr,defaultMarkerColor:se,noDragClassName:ei,noWheelClassName:ni,noPanClassName:Bn,elevateEdgesOnSelect:ui,rfId:Qe,disableKeyboardA11y:On,nodeOrigin:X,nodeExtent:zt}),z.createElement(Bl,{nodes:t,edges:e,defaultNodes:n,defaultEdges:o,onConnect:g,onConnectStart:y,onConnectEnd:p,onClickConnectStart:v,onClickConnectEnd:m,nodesDraggable:q,nodesConnectable:it,nodesFocusable:at,edgesFocusable:Pt,edgesUpdatable:$t,elementsSelectable:ie,elevateNodesOnSelect:li,minZoom:Dt,maxZoom:bt,nodeExtent:zt,onNodesChange:jr,onEdgesChange:ti,snapToGrid:rt,snapGrid:dt,connectionMode:x,translateExtent:Kt,connectOnClick:ii,defaultEdgeOptions:ci,fitView:oi,fitViewOptions:ri,onNodesDelete:L,onEdgesDelete:B,onNodeDragStart:R,onNodeDrag:P,onNodeDragStop:D,onSelectionDrag:h,onSelectionDragStart:b,onSelectionDragStop:E,noPanClassName:Bn,nodeOrigin:X,rfId:Qe,autoPanOnConnect:fi,autoPanOnNodeDrag:di,onError:pi,connectionRadius:hi,isValidConnection:gi,nodeDragThreshold:yi}),z.createElement(Rl,{onSelectionChange:H}),Ot,z.createElement(ul,{proOptions:ai,position:si}),z.createElement(Fl,{rfId:Qe,disableKeyboardA11y:On})))});Uu.displayName="ReactFlow";function Yr(t){return e=>{const[n,o]=N.useState(e),r=N.useCallback(s=>o(i=>t(s,i)),[]);return[n,o,r]}}const tf=Yr(Tr),ef=Yr(nu);export{Ve as H,ll as P,Uu as R,nt as a,st as b,ft as c,ju as d,$n as e,Cr as f,jt as g,Y as h,Tt as i,tf as j,ef as k,Nl as l,Vr as m,Tr as n,nu as o,yt as p,ht as s,j as u,sl as z};
