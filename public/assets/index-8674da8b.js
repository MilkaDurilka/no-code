var te=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var u=(e,r,t)=>(te(e,r,"read from private field"),t?t.call(e):r.get(e)),m=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},y=(e,r,t,n)=>(te(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);var W=(e,r,t,n)=>({set _(i){y(e,r,i,t)},get _(){return u(e,r,n)}}),P=(e,r,t)=>(te(e,r,"access private method"),t);import{g as vr}from"./_commonjsHelpers-de833af9.js";var gr="\0",S="\0",ye="",v,G,g,X,F,A,k,_,M,C,R,L,$,D,Y,j,O,H,le,Ae;let yr=(Ae=class{constructor(r){m(this,H);m(this,v,!0);m(this,G,!1);m(this,g,!1);m(this,X,void 0);m(this,F,()=>{});m(this,A,()=>{});m(this,k,{});m(this,_,{});m(this,M,{});m(this,C,{});m(this,R,{});m(this,L,{});m(this,$,{});m(this,D,0);m(this,Y,0);m(this,j,void 0);m(this,O,void 0);r&&(y(this,v,r.hasOwnProperty("directed")?r.directed:!0),y(this,G,r.hasOwnProperty("multigraph")?r.multigraph:!1),y(this,g,r.hasOwnProperty("compound")?r.compound:!1)),u(this,g)&&(y(this,j,{}),y(this,O,{}),u(this,O)[S]={})}isDirected(){return u(this,v)}isMultigraph(){return u(this,G)}isCompound(){return u(this,g)}setGraph(r){return y(this,X,r),this}graph(){return u(this,X)}setDefaultNodeLabel(r){return y(this,F,r),typeof r!="function"&&y(this,F,()=>r),this}nodeCount(){return u(this,D)}nodes(){return Object.keys(u(this,k))}sources(){var r=this;return this.nodes().filter(t=>Object.keys(u(r,_)[t]).length===0)}sinks(){var r=this;return this.nodes().filter(t=>Object.keys(u(r,C)[t]).length===0)}setNodes(r,t){var n=arguments,i=this;return r.forEach(function(a){n.length>1?i.setNode(a,t):i.setNode(a)}),this}setNode(r,t){return u(this,k).hasOwnProperty(r)?(arguments.length>1&&(u(this,k)[r]=t),this):(u(this,k)[r]=arguments.length>1?t:u(this,F).call(this,r),u(this,g)&&(u(this,j)[r]=S,u(this,O)[r]={},u(this,O)[S][r]=!0),u(this,_)[r]={},u(this,M)[r]={},u(this,C)[r]={},u(this,R)[r]={},++W(this,D)._,this)}node(r){return u(this,k)[r]}hasNode(r){return u(this,k).hasOwnProperty(r)}removeNode(r){var t=this;if(u(this,k).hasOwnProperty(r)){var n=i=>t.removeEdge(u(t,L)[i]);delete u(this,k)[r],u(this,g)&&(P(this,H,le).call(this,r),delete u(this,j)[r],this.children(r).forEach(function(i){t.setParent(i)}),delete u(this,O)[r]),Object.keys(u(this,_)[r]).forEach(n),delete u(this,_)[r],delete u(this,M)[r],Object.keys(u(this,C)[r]).forEach(n),delete u(this,C)[r],delete u(this,R)[r],--W(this,D)._}return this}setParent(r,t){if(!u(this,g))throw new Error("Cannot set parent in a non-compound graph");if(t===void 0)t=S;else{t+="";for(var n=t;n!==void 0;n=this.parent(n))if(n===r)throw new Error("Setting "+t+" as parent of "+r+" would create a cycle");this.setNode(t)}return this.setNode(r),P(this,H,le).call(this,r),u(this,j)[r]=t,u(this,O)[t][r]=!0,this}parent(r){if(u(this,g)){var t=u(this,j)[r];if(t!==S)return t}}children(r=S){if(u(this,g)){var t=u(this,O)[r];if(t)return Object.keys(t)}else{if(r===S)return this.nodes();if(this.hasNode(r))return[]}}predecessors(r){var t=u(this,M)[r];if(t)return Object.keys(t)}successors(r){var t=u(this,R)[r];if(t)return Object.keys(t)}neighbors(r){var t=this.predecessors(r);if(t){const i=new Set(t);for(var n of this.successors(r))i.add(n);return Array.from(i.values())}}isLeaf(r){var t;return this.isDirected()?t=this.successors(r):t=this.neighbors(r),t.length===0}filterNodes(r){var t=new this.constructor({directed:u(this,v),multigraph:u(this,G),compound:u(this,g)});t.setGraph(this.graph());var n=this;Object.entries(u(this,k)).forEach(function([o,s]){r(o)&&t.setNode(o,s)}),Object.values(u(this,L)).forEach(function(o){t.hasNode(o.v)&&t.hasNode(o.w)&&t.setEdge(o,n.edge(o))});var i={};function a(o){var s=n.parent(o);return s===void 0||t.hasNode(s)?(i[o]=s,s):s in i?i[s]:a(s)}return u(this,g)&&t.nodes().forEach(o=>t.setParent(o,a(o))),t}setDefaultEdgeLabel(r){return y(this,A,r),typeof r!="function"&&y(this,A,()=>r),this}edgeCount(){return u(this,Y)}edges(){return Object.values(u(this,L))}setPath(r,t){var n=this,i=arguments;return r.reduce(function(a,o){return i.length>1?n.setEdge(a,o,t):n.setEdge(a,o),o}),this}setEdge(){var r,t,n,i,a=!1,o=arguments[0];typeof o=="object"&&o!==null&&"v"in o?(r=o.v,t=o.w,n=o.name,arguments.length===2&&(i=arguments[1],a=!0)):(r=o,t=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),r=""+r,t=""+t,n!==void 0&&(n=""+n);var s=q(u(this,v),r,t,n);if(u(this,$).hasOwnProperty(s))return a&&(u(this,$)[s]=i),this;if(n!==void 0&&!u(this,G))throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(t),u(this,$)[s]=a?i:u(this,A).call(this,r,t,n);var d=kr(u(this,v),r,t,n);return r=d.v,t=d.w,Object.freeze(d),u(this,L)[s]=d,ke(u(this,M)[t],r),ke(u(this,R)[r],t),u(this,_)[t][s]=d,u(this,C)[r][s]=d,W(this,Y)._++,this}edge(r,t,n){var i=arguments.length===1?ne(u(this,v),arguments[0]):q(u(this,v),r,t,n);return u(this,$)[i]}edgeAsObj(){const r=this.edge(...arguments);return typeof r!="object"?{label:r}:r}hasEdge(r,t,n){var i=arguments.length===1?ne(u(this,v),arguments[0]):q(u(this,v),r,t,n);return u(this,$).hasOwnProperty(i)}removeEdge(r,t,n){var i=arguments.length===1?ne(u(this,v),arguments[0]):q(u(this,v),r,t,n),a=u(this,L)[i];return a&&(r=a.v,t=a.w,delete u(this,$)[i],delete u(this,L)[i],Ne(u(this,M)[t],r),Ne(u(this,R)[r],t),delete u(this,_)[t][i],delete u(this,C)[r][i],W(this,Y)._--),this}inEdges(r,t){var n=u(this,_)[r];if(n){var i=Object.values(n);return t?i.filter(a=>a.v===t):i}}outEdges(r,t){var n=u(this,C)[r];if(n){var i=Object.values(n);return t?i.filter(a=>a.w===t):i}}nodeEdges(r,t){var n=this.inEdges(r,t);if(n)return n.concat(this.outEdges(r,t))}},v=new WeakMap,G=new WeakMap,g=new WeakMap,X=new WeakMap,F=new WeakMap,A=new WeakMap,k=new WeakMap,_=new WeakMap,M=new WeakMap,C=new WeakMap,R=new WeakMap,L=new WeakMap,$=new WeakMap,D=new WeakMap,Y=new WeakMap,j=new WeakMap,O=new WeakMap,H=new WeakSet,le=function(r){delete u(this,O)[u(this,j)[r]][r]},Ae);function ke(e,r){e[r]?e[r]++:e[r]=1}function Ne(e,r){--e[r]||delete e[r]}function q(e,r,t,n){var i=""+r,a=""+t;if(!e&&i>a){var o=i;i=a,a=o}return i+ye+a+ye+(n===void 0?gr:n)}function kr(e,r,t,n){var i=""+r,a=""+t;if(!e&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return n&&(s.name=n),s}function ne(e,r){return q(e,r.v,r.w,r.name)}var me=yr,Nr="2.1.13",xr={Graph:me,version:Nr},Or=me,Ir={write:Pr,read:Lr};function Pr(e){var r={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:_r(e),edges:Cr(e)};return e.graph()!==void 0&&(r.value=structuredClone(e.graph())),r}function _r(e){return e.nodes().map(function(r){var t=e.node(r),n=e.parent(r),i={v:r};return t!==void 0&&(i.value=t),n!==void 0&&(i.parent=n),i})}function Cr(e){return e.edges().map(function(r){var t=e.edge(r),n={v:r.v,w:r.w};return r.name!==void 0&&(n.name=r.name),t!==void 0&&(n.value=t),n})}function Lr(e){var r=new Or(e.options).setGraph(e.value);return e.nodes.forEach(function(t){r.setNode(t.v,t.value),t.parent&&r.setParent(t.v,t.parent)}),e.edges.forEach(function(t){r.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),r}var $r=jr;function jr(e){var r={},t=[],n;function i(a){r.hasOwnProperty(a)||(r[a]=!0,n.push(a),e.successors(a).forEach(i),e.predecessors(a).forEach(i))}return e.nodes().forEach(function(a){n=[],i(a),n.length&&t.push(n)}),t}var b,T,Q,he,K,ue,B,Z,De;let Tr=(De=class{constructor(){m(this,Q);m(this,K);m(this,B);m(this,b,[]);m(this,T,{})}size(){return u(this,b).length}keys(){return u(this,b).map(function(r){return r.key})}has(r){return u(this,T).hasOwnProperty(r)}priority(r){var t=u(this,T)[r];if(t!==void 0)return u(this,b)[t].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return u(this,b)[0].key}add(r,t){var n=u(this,T);if(r=String(r),!n.hasOwnProperty(r)){var i=u(this,b),a=i.length;return n[r]=a,i.push({key:r,priority:t}),P(this,K,ue).call(this,a),!0}return!1}removeMin(){P(this,B,Z).call(this,0,u(this,b).length-1);var r=u(this,b).pop();return delete u(this,T)[r.key],P(this,Q,he).call(this,0),r.key}decrease(r,t){var n=u(this,T)[r];if(t>u(this,b)[n].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+u(this,b)[n].priority+" New: "+t);u(this,b)[n].priority=t,P(this,K,ue).call(this,n)}},b=new WeakMap,T=new WeakMap,Q=new WeakSet,he=function(r){var t=u(this,b),n=2*r,i=n+1,a=r;n<t.length&&(a=t[n].priority<t[a].priority?n:a,i<t.length&&(a=t[i].priority<t[a].priority?i:a),a!==r&&(P(this,B,Z).call(this,r,a),P(this,Q,he).call(this,a)))},K=new WeakSet,ue=function(r){for(var t=u(this,b),n=t[r].priority,i;r!==0&&(i=r>>1,!(t[i].priority<n));)P(this,B,Z).call(this,r,i),r=i},B=new WeakSet,Z=function(r,t){var n=u(this,b),i=u(this,T),a=n[r],o=n[t];n[r]=o,n[t]=a,i[o.key]=r,i[a.key]=t},De);var Ye=Tr,Mr=Ye,Be=Sr,Rr=()=>1;function Sr(e,r,t,n){return Gr(e,String(r),t||Rr,n||function(i){return e.outEdges(i)})}function Gr(e,r,t,n){var i={},a=new Mr,o,s,d=function(l){var h=l.v!==o?l.v:l.w,f=i[h],c=t(l),p=s.distance+c;if(c<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+l+" Weight: "+c);p<f.distance&&(f.distance=p,f.predecessor=o,a.decrease(h,p))};for(e.nodes().forEach(function(l){var h=l===r?0:Number.POSITIVE_INFINITY;i[l]={distance:h},a.add(l,h)});a.size()>0&&(o=a.removeMin(),s=i[o],s.distance!==Number.POSITIVE_INFINITY);)n(o).forEach(d);return i}var Vr=Be,Fr=Ar;function Ar(e,r,t){return e.nodes().reduce(function(n,i){return n[i]=Vr(e,i,r,t),n},{})}var ze=Dr;function Dr(e){var r=0,t=[],n={},i=[];function a(o){var s=n[o]={onStack:!0,lowlink:r,index:r++};if(t.push(o),e.successors(o).forEach(function(h){n.hasOwnProperty(h)?n[h].onStack&&(s.lowlink=Math.min(s.lowlink,n[h].index)):(a(h),s.lowlink=Math.min(s.lowlink,n[h].lowlink))}),s.lowlink===s.index){var d=[],l;do l=t.pop(),n[l].onStack=!1,d.push(l);while(o!==l);i.push(d)}}return e.nodes().forEach(function(o){n.hasOwnProperty(o)||a(o)}),i}var Yr=ze,Br=zr;function zr(e){return Yr(e).filter(function(r){return r.length>1||r.length===1&&e.hasEdge(r[0],r[0])})}var Wr=Ur,qr=()=>1;function Ur(e,r,t){return Xr(e,r||qr,t||function(n){return e.outEdges(n)})}function Xr(e,r,t){var n={},i=e.nodes();return i.forEach(function(a){n[a]={},n[a][a]={distance:0},i.forEach(function(o){a!==o&&(n[a][o]={distance:Number.POSITIVE_INFINITY})}),t(a).forEach(function(o){var s=o.v===a?o.w:o.v,d=r(o);n[a][s]={distance:d,predecessor:a}})}),i.forEach(function(a){var o=n[a];i.forEach(function(s){var d=n[s];i.forEach(function(l){var h=d[a],f=o[l],c=d[l],p=h.distance+f.distance;p<c.distance&&(c.distance=p,c.predecessor=f.predecessor)})})}),n}function We(e){var r={},t={},n=[];function i(a){if(t.hasOwnProperty(a))throw new fe;r.hasOwnProperty(a)||(t[a]=!0,r[a]=!0,e.predecessors(a).forEach(i),delete t[a],n.push(a))}if(e.sinks().forEach(i),Object.keys(r).length!==e.nodeCount())throw new fe;return n}class fe extends Error{constructor(){super(...arguments)}}var qe=We;We.CycleException=fe;var xe=qe,Hr=Qr;function Qr(e){try{xe(e)}catch(r){if(r instanceof xe.CycleException)return!1;throw r}return!0}var Ue=Kr;function Kr(e,r,t){Array.isArray(r)||(r=[r]);var n=e.isDirected()?s=>e.successors(s):s=>e.neighbors(s),i=t==="post"?Jr:Zr,a=[],o={};return r.forEach(s=>{if(!e.hasNode(s))throw new Error("Graph does not have node: "+s);i(s,n,o,a)}),a}function Jr(e,r,t,n){for(var i=[[e,!1]];i.length>0;){var a=i.pop();a[1]?n.push(a[0]):t.hasOwnProperty(a[0])||(t[a[0]]=!0,i.push([a[0],!0]),Xe(r(a[0]),o=>i.push([o,!1])))}}function Zr(e,r,t,n){for(var i=[e];i.length>0;){var a=i.pop();t.hasOwnProperty(a)||(t[a]=!0,n.push(a),Xe(r(a),o=>i.push(o)))}}function Xe(e,r){for(var t=e.length;t--;)r(e[t],t,e);return e}var et=Ue,rt=tt;function tt(e,r){return et(e,r,"post")}var nt=Ue,it=at;function at(e,r){return nt(e,r,"pre")}var ot=me,st=Ye,dt=lt;function lt(e,r){var t=new ot,n={},i=new st,a;function o(d){var l=d.v===a?d.w:d.v,h=i.priority(l);if(h!==void 0){var f=r(d);f<h&&(n[l]=a,i.decrease(l,f))}}if(e.nodeCount()===0)return t;e.nodes().forEach(function(d){i.add(d,Number.POSITIVE_INFINITY),t.setNode(d)}),i.decrease(e.nodes()[0],0);for(var s=!1;i.size()>0;){if(a=i.removeMin(),n.hasOwnProperty(a))t.setEdge(a,n[a]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(a).forEach(o)}return t}var ht={components:$r,dijkstra:Be,dijkstraAll:Fr,findCycles:Br,floydWarshall:Wr,isAcyclic:Hr,postorder:rt,preorder:it,prim:dt,tarjan:ze,topsort:qe},Oe=xr,I={Graph:Oe.Graph,json:Ir,alg:ht,version:Oe.version};let ut=class{constructor(){let r={};r._next=r._prev=r,this._sentinel=r}dequeue(){let r=this._sentinel,t=r._prev;if(t!==r)return Ie(t),t}enqueue(r){let t=this._sentinel;r._prev&&r._next&&Ie(r),r._next=t._next,t._next._prev=r,t._next=r,r._prev=t}toString(){let r=[],t=this._sentinel,n=t._prev;for(;n!==t;)r.push(JSON.stringify(n,ft)),n=n._prev;return"["+r.join(", ")+"]"}};function Ie(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function ft(e,r){if(e!=="_next"&&e!=="_prev")return r}var ct=ut;let pt=I.Graph,mt=ct;var wt=bt;let Et=()=>1;function bt(e,r){if(e.nodeCount()<=1)return[];let t=gt(e,r||Et);return vt(t.graph,t.buckets,t.zeroIdx).flatMap(i=>e.outEdges(i.v,i.w))}function vt(e,r,t){let n=[],i=r[r.length-1],a=r[0],o;for(;e.nodeCount();){for(;o=a.dequeue();)ie(e,r,t,o);for(;o=i.dequeue();)ie(e,r,t,o);if(e.nodeCount()){for(let s=r.length-2;s>0;--s)if(o=r[s].dequeue(),o){n=n.concat(ie(e,r,t,o,!0));break}}}return n}function ie(e,r,t,n,i){let a=i?[]:void 0;return e.inEdges(n.v).forEach(o=>{let s=e.edge(o),d=e.node(o.v);i&&a.push({v:o.v,w:o.w}),d.out-=s,ce(r,t,d)}),e.outEdges(n.v).forEach(o=>{let s=e.edge(o),d=o.w,l=e.node(d);l.in-=s,ce(r,t,l)}),e.removeNode(n.v),a}function gt(e,r){let t=new pt,n=0,i=0;e.nodes().forEach(s=>{t.setNode(s,{v:s,in:0,out:0})}),e.edges().forEach(s=>{let d=t.edge(s.v,s.w)||0,l=r(s),h=d+l;t.setEdge(s.v,s.w,h),i=Math.max(i,t.node(s.v).out+=l),n=Math.max(n,t.node(s.w).in+=l)});let a=yt(i+n+3).map(()=>new mt),o=n+1;return t.nodes().forEach(s=>{ce(a,o,t.node(s))}),{graph:t,buckets:a,zeroIdx:o}}function ce(e,r,t){t.out?t.in?e[t.out-t.in+r].enqueue(t):e[e.length-1].enqueue(t):e[0].enqueue(t)}function yt(e){const r=[];for(let t=0;t<e;t++)r.push(t);return r}let He=I.Graph;var E={addBorderNode:Lt,addDummyNode:Qe,asNonCompoundGraph:Nt,buildLayerMatrix:Pt,intersectRect:It,mapValues:St,maxRank:Ke,normalizeRanks:_t,notime:Tt,partition:$t,pick:Rt,predecessorWeights:Ot,range:Ze,removeEmptyRanks:Ct,simplify:kt,successorWeights:xt,time:jt,uniqueId:Je,zipObject:we};function Qe(e,r,t,n){let i;do i=Je(n);while(e.hasNode(i));return t.dummy=r,e.setNode(i,t),i}function kt(e){let r=new He().setGraph(e.graph());return e.nodes().forEach(t=>r.setNode(t,e.node(t))),e.edges().forEach(t=>{let n=r.edge(t.v,t.w)||{weight:0,minlen:1},i=e.edge(t);r.setEdge(t.v,t.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),r}function Nt(e){let r=new He({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(t=>{e.children(t).length||r.setNode(t,e.node(t))}),e.edges().forEach(t=>{r.setEdge(t,e.edge(t))}),r}function xt(e){let r=e.nodes().map(t=>{let n={};return e.outEdges(t).forEach(i=>{n[i.w]=(n[i.w]||0)+e.edge(i).weight}),n});return we(e.nodes(),r)}function Ot(e){let r=e.nodes().map(t=>{let n={};return e.inEdges(t).forEach(i=>{n[i.v]=(n[i.v]||0)+e.edge(i).weight}),n});return we(e.nodes(),r)}function It(e,r){let t=e.x,n=e.y,i=r.x-t,a=r.y-n,o=e.width/2,s=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");let d,l;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),d=s*i/a,l=s):(i<0&&(o=-o),d=o,l=o*a/i),{x:t+d,y:n+l}}function Pt(e){let r=Ze(Ke(e)+1).map(()=>[]);return e.nodes().forEach(t=>{let n=e.node(t),i=n.rank;i!==void 0&&(r[i][n.order]=t)}),r}function _t(e){let r=Math.min(...e.nodes().map(t=>{let n=e.node(t).rank;return n===void 0?Number.MAX_VALUE:n}));e.nodes().forEach(t=>{let n=e.node(t);n.hasOwnProperty("rank")&&(n.rank-=r)})}function Ct(e){let r=Math.min(...e.nodes().map(a=>e.node(a).rank)),t=[];e.nodes().forEach(a=>{let o=e.node(a).rank-r;t[o]||(t[o]=[]),t[o].push(a)});let n=0,i=e.graph().nodeRankFactor;Array.from(t).forEach((a,o)=>{a===void 0&&o%i!==0?--n:a!==void 0&&n&&a.forEach(s=>e.node(s).rank+=n)})}function Lt(e,r,t,n){let i={width:0,height:0};return arguments.length>=4&&(i.rank=t,i.order=n),Qe(e,"border",i,r)}function Ke(e){return Math.max(...e.nodes().map(r=>{let t=e.node(r).rank;return t===void 0?Number.MIN_VALUE:t}))}function $t(e,r){let t={lhs:[],rhs:[]};return e.forEach(n=>{r(n)?t.lhs.push(n):t.rhs.push(n)}),t}function jt(e,r){let t=Date.now();try{return r()}finally{console.log(e+" time: "+(Date.now()-t)+"ms")}}function Tt(e,r){return r()}let Mt=0;function Je(e){var r=++Mt;return toString(e)+r}function Ze(e,r,t=1){r==null&&(r=e,e=0);let n=a=>a<r;t<0&&(n=a=>r<a);const i=[];for(let a=e;n(a);a+=t)i.push(a);return i}function Rt(e,r){const t={};for(const n of r)e[n]!==void 0&&(t[n]=e[n]);return t}function St(e,r){let t=r;return typeof r=="string"&&(t=n=>n[r]),Object.entries(e).reduce((n,[i,a])=>(n[i]=t(a,i),n),{})}function we(e,r){return e.reduce((t,n,i)=>(t[n]=r[i],t),{})}let Gt=wt,Vt=E.uniqueId;var Ft={run:At,undo:Yt};function At(e){(e.graph().acyclicer==="greedy"?Gt(e,t(e)):Dt(e)).forEach(n=>{let i=e.edge(n);e.removeEdge(n),i.forwardName=n.name,i.reversed=!0,e.setEdge(n.w,n.v,i,Vt("rev"))});function t(n){return i=>n.edge(i).weight}}function Dt(e){let r=[],t={},n={};function i(a){n.hasOwnProperty(a)||(n[a]=!0,t[a]=!0,e.outEdges(a).forEach(o=>{t.hasOwnProperty(o.w)?r.push(o):i(o.w)}),delete t[a])}return e.nodes().forEach(i),r}function Yt(e){e.edges().forEach(r=>{let t=e.edge(r);if(t.reversed){e.removeEdge(r);let n=t.forwardName;delete t.reversed,delete t.forwardName,e.setEdge(r.w,r.v,t,n)}})}let Bt=E;var zt={run:Wt,undo:Ut};function Wt(e){e.graph().dummyChains=[],e.edges().forEach(r=>qt(e,r))}function qt(e,r){let t=r.v,n=e.node(t).rank,i=r.w,a=e.node(i).rank,o=r.name,s=e.edge(r),d=s.labelRank;if(a===n+1)return;e.removeEdge(r);let l,h,f;for(f=0,++n;n<a;++f,++n)s.points=[],h={width:0,height:0,edgeLabel:s,edgeObj:r,rank:n},l=Bt.addDummyNode(e,"edge",h,"_d"),n===d&&(h.width=s.width,h.height=s.height,h.dummy="edge-label",h.labelpos=s.labelpos),e.setEdge(t,l,{weight:s.weight},o),f===0&&e.graph().dummyChains.push(l),t=l;e.setEdge(t,i,{weight:s.weight},o)}function Ut(e){e.graph().dummyChains.forEach(r=>{let t=e.node(r),n=t.edgeLabel,i;for(e.setEdge(t.edgeObj,n);t.dummy;)i=e.successors(r)[0],e.removeNode(r),n.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(n.x=t.x,n.y=t.y,n.width=t.width,n.height=t.height),r=i,t=e.node(r)})}var re={longestPath:Xt,slack:Ht};function Xt(e){var r={};function t(n){var i=e.node(n);if(r.hasOwnProperty(n))return i.rank;r[n]=!0;var a=Math.min(...e.outEdges(n).map(o=>o==null?Number.POSITIVE_INFINITY:t(o.w)-e.edge(o).minlen));return a===Number.POSITIVE_INFINITY&&(a=0),i.rank=a}e.sources().forEach(t)}function Ht(e,r){return e.node(r.w).rank-e.node(r.v).rank-e.edge(r).minlen}var Qt=I.Graph,ee=re.slack,er=Kt;function Kt(e){var r=new Qt({directed:!1}),t=e.nodes()[0],n=e.nodeCount();r.setNode(t,{});for(var i,a;Jt(r,e)<n;)i=Zt(r,e),a=r.hasNode(i.v)?ee(e,i):-ee(e,i),en(r,e,a);return r}function Jt(e,r){function t(n){r.nodeEdges(n).forEach(i=>{var a=i.v,o=n===a?i.w:a;!e.hasNode(o)&&!ee(r,i)&&(e.setNode(o,{}),e.setEdge(n,o,{}),t(o))})}return e.nodes().forEach(t),e.nodeCount()}function Zt(e,r){return r.edges().reduce((n,i)=>{let a=Number.POSITIVE_INFINITY;return e.hasNode(i.v)!==e.hasNode(i.w)&&(a=ee(r,i)),a<n[0]?[a,i]:n},[Number.POSITIVE_INFINITY,null])[1]}function en(e,r,t){e.nodes().forEach(n=>r.node(n).rank+=t)}var rn=er,Pe=re.slack,tn=re.longestPath,nn=I.alg.preorder,an=I.alg.postorder,on=E.simplify,sn=V;V.initLowLimValues=be;V.initCutValues=Ee;V.calcCutValue=rr;V.leaveEdge=nr;V.enterEdge=ir;V.exchangeEdges=ar;function V(e){e=on(e),tn(e);var r=rn(e);be(r),Ee(r,e);for(var t,n;t=nr(r);)n=ir(r,e,t),ar(r,e,t,n)}function Ee(e,r){var t=an(e,e.nodes());t=t.slice(0,t.length-1),t.forEach(n=>dn(e,r,n))}function dn(e,r,t){var n=e.node(t),i=n.parent;e.edge(t,i).cutvalue=rr(e,r,t)}function rr(e,r,t){var n=e.node(t),i=n.parent,a=!0,o=r.edge(t,i),s=0;return o||(a=!1,o=r.edge(i,t)),s=o.weight,r.nodeEdges(t).forEach(d=>{var l=d.v===t,h=l?d.w:d.v;if(h!==i){var f=l===a,c=r.edge(d).weight;if(s+=f?c:-c,hn(e,t,h)){var p=e.edge(t,h).cutvalue;s+=f?-p:p}}}),s}function be(e,r){arguments.length<2&&(r=e.nodes()[0]),tr(e,{},1,r)}function tr(e,r,t,n,i){var a=t,o=e.node(n);return r[n]=!0,e.neighbors(n).forEach(s=>{r.hasOwnProperty(s)||(t=tr(e,r,t,s,n))}),o.low=a,o.lim=t++,i?o.parent=i:delete o.parent,t}function nr(e){return e.edges().find(r=>e.edge(r).cutvalue<0)}function ir(e,r,t){var n=t.v,i=t.w;r.hasEdge(n,i)||(n=t.w,i=t.v);var a=e.node(n),o=e.node(i),s=a,d=!1;a.lim>o.lim&&(s=o,d=!0);var l=r.edges().filter(h=>d===_e(e,e.node(h.v),s)&&d!==_e(e,e.node(h.w),s));return l.reduce((h,f)=>Pe(r,f)<Pe(r,h)?f:h)}function ar(e,r,t,n){var i=t.v,a=t.w;e.removeEdge(i,a),e.setEdge(n.v,n.w,{}),be(e),Ee(e,r),ln(e,r)}function ln(e,r){var t=e.nodes().find(i=>!r.node(i).parent),n=nn(e,t);n=n.slice(1),n.forEach(i=>{var a=e.node(i).parent,o=r.edge(i,a),s=!1;o||(o=r.edge(a,i),s=!0),r.node(i).rank=r.node(a).rank+(s?o.minlen:-o.minlen)})}function hn(e,r,t){return e.hasEdge(r,t)}function _e(e,r,t){return t.low<=r.lim&&r.lim<=t.lim}var un=re,or=un.longestPath,fn=er,cn=sn,pn=mn;function mn(e){switch(e.graph().ranker){case"network-simplex":Ce(e);break;case"tight-tree":En(e);break;case"longest-path":wn(e);break;default:Ce(e)}}var wn=or;function En(e){or(e),fn(e)}function Ce(e){cn(e)}var bn=vn;function vn(e){let r=yn(e);e.graph().dummyChains.forEach(t=>{let n=e.node(t),i=n.edgeObj,a=gn(e,r,i.v,i.w),o=a.path,s=a.lca,d=0,l=o[d],h=!0;for(;t!==i.w;){if(n=e.node(t),h){for(;(l=o[d])!==s&&e.node(l).maxRank<n.rank;)d++;l===s&&(h=!1)}if(!h){for(;d<o.length-1&&e.node(l=o[d+1]).minRank<=n.rank;)d++;l=o[d]}e.setParent(t,l),t=e.successors(t)[0]}})}function gn(e,r,t,n){let i=[],a=[],o=Math.min(r[t].low,r[n].low),s=Math.max(r[t].lim,r[n].lim),d,l;d=t;do d=e.parent(d),i.push(d);while(d&&(r[d].low>o||s>r[d].lim));for(l=d,d=n;(d=e.parent(d))!==l;)a.push(d);return{path:i.concat(a.reverse()),lca:l}}function yn(e){let r={},t=0;function n(i){let a=t;e.children(i).forEach(n),r[i]={low:a,lim:t++}}return e.children().forEach(n),r}let pe=E;var kn={run:Nn,cleanup:In};function Nn(e){let r=pe.addDummyNode(e,"root",{},"_root"),t=xn(e),n=Math.max(...Object.values(t))-1,i=2*n+1;e.graph().nestingRoot=r,e.edges().forEach(o=>e.edge(o).minlen*=i);let a=On(e)+1;e.children().forEach(o=>sr(e,r,i,a,n,t,o)),e.graph().nodeRankFactor=i}function sr(e,r,t,n,i,a,o){let s=e.children(o);if(!s.length){o!==r&&e.setEdge(r,o,{weight:0,minlen:t});return}let d=pe.addBorderNode(e,"_bt"),l=pe.addBorderNode(e,"_bb"),h=e.node(o);e.setParent(d,o),h.borderTop=d,e.setParent(l,o),h.borderBottom=l,s.forEach(f=>{sr(e,r,t,n,i,a,f);let c=e.node(f),p=c.borderTop?c.borderTop:f,w=c.borderBottom?c.borderBottom:f,x=c.borderTop?n:2*n,z=p!==w?1:i-a[o]+1;e.setEdge(d,p,{weight:x,minlen:z,nestingEdge:!0}),e.setEdge(w,l,{weight:x,minlen:z,nestingEdge:!0})}),e.parent(o)||e.setEdge(r,d,{weight:0,minlen:i+a[o]})}function xn(e){var r={};function t(n,i){var a=e.children(n);a&&a.length&&a.forEach(o=>t(o,i+1)),r[n]=i}return e.children().forEach(n=>t(n,1)),r}function On(e){return e.edges().reduce((r,t)=>r+e.edge(t).weight,0)}function In(e){var r=e.graph();e.removeNode(r.nestingRoot),delete r.nestingRoot,e.edges().forEach(t=>{var n=e.edge(t);n.nestingEdge&&e.removeEdge(t)})}let Pn=E;var _n=Cn;function Cn(e){function r(t){let n=e.children(t),i=e.node(t);if(n.length&&n.forEach(r),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(let a=i.minRank,o=i.maxRank+1;a<o;++a)Le(e,"borderLeft","_bl",t,i,a),Le(e,"borderRight","_br",t,i,a)}}e.children().forEach(r)}function Le(e,r,t,n,i,a){let o={width:0,height:0,rank:a,borderType:r},s=i[r][a-1],d=Pn.addDummyNode(e,"border",o,t);i[r][a]=d,e.setParent(d,n),s&&e.setEdge(s,d,{weight:1})}var Ln={adjust:$n,undo:jn};function $n(e){let r=e.graph().rankdir.toLowerCase();(r==="lr"||r==="rl")&&dr(e)}function jn(e){let r=e.graph().rankdir.toLowerCase();(r==="bt"||r==="rl")&&Tn(e),(r==="lr"||r==="rl")&&(Mn(e),dr(e))}function dr(e){e.nodes().forEach(r=>$e(e.node(r))),e.edges().forEach(r=>$e(e.edge(r)))}function $e(e){let r=e.width;e.width=e.height,e.height=r}function Tn(e){e.nodes().forEach(r=>ae(e.node(r))),e.edges().forEach(r=>{let t=e.edge(r);t.points.forEach(ae),t.hasOwnProperty("y")&&ae(t)})}function ae(e){e.y=-e.y}function Mn(e){e.nodes().forEach(r=>oe(e.node(r))),e.edges().forEach(r=>{let t=e.edge(r);t.points.forEach(oe),t.hasOwnProperty("x")&&oe(t)})}function oe(e){let r=e.x;e.x=e.y,e.y=r}let Rn=E;var Sn=Gn;function Gn(e){let r={},t=e.nodes().filter(s=>!e.children(s).length),n=Math.max(...t.map(s=>e.node(s).rank)),i=Rn.range(n+1).map(()=>[]);function a(s){if(r[s])return;r[s]=!0;let d=e.node(s);i[d.rank].push(s),e.successors(s).forEach(a)}return t.sort((s,d)=>e.node(s).rank-e.node(d).rank).forEach(a),i}let Vn=E.zipObject;var Fn=An;function An(e,r){let t=0;for(let n=1;n<r.length;++n)t+=Dn(e,r[n-1],r[n]);return t}function Dn(e,r,t){let n=Vn(t,t.map((l,h)=>h)),i=r.flatMap(l=>e.outEdges(l).map(h=>({pos:n[h.w],weight:e.edge(h).weight})).sort((h,f)=>h.pos-f.pos)),a=1;for(;a<t.length;)a<<=1;let o=2*a-1;a-=1;let s=new Array(o).fill(0),d=0;return i.forEach(l=>{let h=l.pos+a;s[h]+=l.weight;let f=0;for(;h>0;)h%2&&(f+=s[h+1]),h=h-1>>1,s[h]+=l.weight;d+=l.weight*f}),d}var Yn=Bn;function Bn(e,r=[]){return r.map(t=>{let n=e.inEdges(t);if(n.length){let i=n.reduce((a,o)=>{let s=e.edge(o),d=e.node(o.v);return{sum:a.sum+s.weight*d.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:t}})}let zn=E;var Wn=qn;function qn(e,r){let t={};e.forEach((i,a)=>{let o=t[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};i.barycenter!==void 0&&(o.barycenter=i.barycenter,o.weight=i.weight)}),r.edges().forEach(i=>{let a=t[i.v],o=t[i.w];a!==void 0&&o!==void 0&&(o.indegree++,a.out.push(t[i.w]))});let n=Object.values(t).filter(i=>!i.indegree);return Un(n)}function Un(e){let r=[];function t(i){return a=>{a.merged||(a.barycenter===void 0||i.barycenter===void 0||a.barycenter>=i.barycenter)&&Xn(i,a)}}function n(i){return a=>{a.in.push(i),--a.indegree===0&&e.push(a)}}for(;e.length;){let i=e.pop();r.push(i),i.in.reverse().forEach(t(i)),i.out.forEach(n(i))}return r.filter(i=>!i.merged).map(i=>zn.pick(i,["vs","i","barycenter","weight"]))}function Xn(e,r){let t=0,n=0;e.weight&&(t+=e.barycenter*e.weight,n+=e.weight),r.weight&&(t+=r.barycenter*r.weight,n+=r.weight),e.vs=r.vs.concat(e.vs),e.barycenter=t/n,e.weight=n,e.i=Math.min(r.i,e.i),r.merged=!0}let Hn=E;var Qn=Kn;function Kn(e,r){let t=Hn.partition(e,h=>h.hasOwnProperty("barycenter")),n=t.lhs,i=t.rhs.sort((h,f)=>f.i-h.i),a=[],o=0,s=0,d=0;n.sort(Jn(!!r)),d=je(a,i,d),n.forEach(h=>{d+=h.vs.length,a.push(h.vs),o+=h.barycenter*h.weight,s+=h.weight,d=je(a,i,d)});let l={vs:a.flat(!0)};return s&&(l.barycenter=o/s,l.weight=s),l}function je(e,r,t){let n;for(;r.length&&(n=r[r.length-1]).i<=t;)r.pop(),e.push(n.vs),t++;return t}function Jn(e){return(r,t)=>r.barycenter<t.barycenter?-1:r.barycenter>t.barycenter?1:e?t.i-r.i:r.i-t.i}let Zn=Yn,ei=Wn,ri=Qn;var ti=lr;function lr(e,r,t,n){let i=e.children(r),a=e.node(r),o=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,d={};o&&(i=i.filter(c=>c!==o&&c!==s));let l=Zn(e,i);l.forEach(c=>{if(e.children(c.v).length){let p=lr(e,c.v,t,n);d[c.v]=p,p.hasOwnProperty("barycenter")&&ii(c,p)}});let h=ei(l,t);ni(h,d);let f=ri(h,n);if(o&&(f.vs=[o,f.vs,s].flat(!0),e.predecessors(o).length)){let c=e.node(e.predecessors(o)[0]),p=e.node(e.predecessors(s)[0]);f.hasOwnProperty("barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+c.order+p.order)/(f.weight+2),f.weight+=2}return f}function ni(e,r){e.forEach(t=>{t.vs=t.vs.flatMap(n=>r[n]?r[n].vs:n)})}function ii(e,r){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+r.barycenter*r.weight)/(e.weight+r.weight),e.weight+=r.weight):(e.barycenter=r.barycenter,e.weight=r.weight)}let ai=I.Graph,oi=E;var si=di;function di(e,r,t){let n=li(e),i=new ai({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(a=>e.node(a));return e.nodes().forEach(a=>{let o=e.node(a),s=e.parent(a);(o.rank===r||o.minRank<=r&&r<=o.maxRank)&&(i.setNode(a),i.setParent(a,s||n),e[t](a).forEach(d=>{let l=d.v===a?d.w:d.v,h=i.edge(l,a),f=h!==void 0?h.weight:0;i.setEdge(l,a,{weight:e.edge(d).weight+f})}),o.hasOwnProperty("minRank")&&i.setNode(a,{borderLeft:o.borderLeft[r],borderRight:o.borderRight[r]}))}),i}function li(e){for(var r;e.hasNode(r=oi.uniqueId("_root")););return r}var hi=ui;function ui(e,r,t){let n={},i;t.forEach(a=>{let o=e.parent(a),s,d;for(;o;){if(s=e.parent(o),s?(d=n[s],n[s]=o):(d=i,i=o),d&&d!==o){r.setEdge(d,o);return}o=s}})}let fi=Sn,ci=Fn,pi=ti,mi=si,wi=hi,Ei=I.Graph,J=E;var bi=vi;function vi(e){let r=J.maxRank(e),t=Te(e,J.range(1,r+1),"inEdges"),n=Te(e,J.range(r-1,-1,-1),"outEdges"),i=fi(e);Me(e,i);let a=Number.POSITIVE_INFINITY,o;for(let s=0,d=0;d<4;++s,++d){gi(s%2?t:n,s%4>=2),i=J.buildLayerMatrix(e);let l=ci(e,i);l<a&&(d=0,o=Object.assign({},i),a=l)}Me(e,o)}function Te(e,r,t){return r.map(function(n){return mi(e,n,t)})}function gi(e,r){let t=new Ei;e.forEach(function(n){let i=n.graph().root,a=pi(n,i,t,r);a.vs.forEach((o,s)=>n.node(o).order=s),wi(n,t,a.vs)})}function Me(e,r){Object.values(r).forEach(t=>t.forEach((n,i)=>e.node(n).order=i))}let yi=I.Graph,U=E;var ki={positionX:Oi,findType1Conflicts:hr,findType2Conflicts:ur,addConflict:ve,hasConflict:fr,verticalAlignment:cr,horizontalCompaction:pr,alignCoordinates:wr,findSmallestWidthAlignment:mr,balance:Er};function hr(e,r){let t={};function n(i,a){let o=0,s=0,d=i.length,l=a[a.length-1];return a.forEach((h,f)=>{let c=Ni(e,h),p=c?e.node(c).order:d;(c||h===l)&&(a.slice(s,f+1).forEach(w=>{e.predecessors(w).forEach(x=>{let z=e.node(x),ge=z.order;(ge<o||p<ge)&&!(z.dummy&&e.node(w).dummy)&&ve(t,x,w)})}),s=f+1,o=p)}),a}return r.reduce(n),t}function ur(e,r){let t={};function n(a,o,s,d,l){let h;U.range(o,s).forEach(f=>{h=a[f],e.node(h).dummy&&e.predecessors(h).forEach(c=>{let p=e.node(c);p.dummy&&(p.order<d||p.order>l)&&ve(t,c,h)})})}function i(a,o){let s=-1,d,l=0;return o.forEach((h,f)=>{if(e.node(h).dummy==="border"){let c=e.predecessors(h);c.length&&(d=e.node(c[0]).order,n(o,l,f,s,d),l=f,s=d)}n(o,l,o.length,d,a.length)}),o}return r.reduce(i),t}function Ni(e,r){if(e.node(r).dummy)return e.predecessors(r).find(t=>e.node(t).dummy)}function ve(e,r,t){if(r>t){let i=r;r=t,t=i}let n=e[r];n||(e[r]=n={}),n[t]=!0}function fr(e,r,t){if(r>t){let n=r;r=t,t=n}return!!e[r]&&e[r].hasOwnProperty(t)}function cr(e,r,t,n){let i={},a={},o={};return r.forEach(s=>{s.forEach((d,l)=>{i[d]=d,a[d]=d,o[d]=l})}),r.forEach(s=>{let d=-1;s.forEach(l=>{let h=n(l);if(h.length){h=h.sort((c,p)=>o[c]-o[p]);let f=(h.length-1)/2;for(let c=Math.floor(f),p=Math.ceil(f);c<=p;++c){let w=h[c];a[l]===l&&d<o[w]&&!fr(t,l,w)&&(a[w]=l,a[l]=i[l]=i[w],d=o[w])}}})}),{root:i,align:a}}function pr(e,r,t,n,i){let a={},o=xi(e,r,t,i),s=i?"borderLeft":"borderRight";function d(f,c){let p=o.nodes(),w=p.pop(),x={};for(;w;)x[w]?f(w):(x[w]=!0,p.push(w),p=p.concat(c(w))),w=p.pop()}function l(f){a[f]=o.inEdges(f).reduce((c,p)=>Math.max(c,a[p.v]+o.edge(p)),0)}function h(f){let c=o.outEdges(f).reduce((w,x)=>Math.min(w,a[x.w]-o.edge(x)),Number.POSITIVE_INFINITY),p=e.node(f);c!==Number.POSITIVE_INFINITY&&p.borderType!==s&&(a[f]=Math.max(a[f],c))}return d(l,o.predecessors.bind(o)),d(h,o.successors.bind(o)),Object.keys(n).forEach(f=>a[f]=a[t[f]]),a}function xi(e,r,t,n){let i=new yi,a=e.graph(),o=Ii(a.nodesep,a.edgesep,n);return r.forEach(s=>{let d;s.forEach(l=>{let h=t[l];if(i.setNode(h),d){var f=t[d],c=i.edge(f,h);i.setEdge(f,h,Math.max(o(e,l,d),c||0))}d=l})}),i}function mr(e,r){return Object.values(r).reduce((t,n)=>{let i=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;Object.entries(n).forEach(([s,d])=>{let l=Pi(e,s)/2;i=Math.max(d+l,i),a=Math.min(d-l,a)});const o=i-a;return o<t[0]&&(t=[o,n]),t},[Number.POSITIVE_INFINITY,null])[1]}function wr(e,r){let t=Object.values(r),n=Math.min(...t),i=Math.max(...t);["u","d"].forEach(a=>{["l","r"].forEach(o=>{let s=a+o,d=e[s];if(d===r)return;let l=Object.values(d),h=n-Math.min(...l);o!=="l"&&(h=i-Math.max(...l)),h&&(e[s]=U.mapValues(d,f=>f+h))})})}function Er(e,r){return U.mapValues(e.ul,(t,n)=>{if(r)return e[r.toLowerCase()][n];{let i=Object.values(e).map(a=>a[n]).sort((a,o)=>a-o);return(i[1]+i[2])/2}})}function Oi(e){let r=U.buildLayerMatrix(e),t=Object.assign(hr(e,r),ur(e,r)),n={},i;["u","d"].forEach(o=>{i=o==="u"?r:Object.values(r).reverse(),["l","r"].forEach(s=>{s==="r"&&(i=i.map(f=>Object.values(f).reverse()));let d=(o==="u"?e.predecessors:e.successors).bind(e),l=cr(e,i,t,d),h=pr(e,i,l.root,l.align,s==="r");s==="r"&&(h=U.mapValues(h,f=>-f)),n[o+s]=h})});let a=mr(e,n);return wr(n,a),Er(n,e.graph().align)}function Ii(e,r,t){return(n,i,a)=>{let o=n.node(i),s=n.node(a),d=0,l;if(d+=o.width/2,o.hasOwnProperty("labelpos"))switch(o.labelpos.toLowerCase()){case"l":l=-o.width/2;break;case"r":l=o.width/2;break}if(l&&(d+=t?l:-l),l=0,d+=(o.dummy?r:e)/2,d+=(s.dummy?r:e)/2,d+=s.width/2,s.hasOwnProperty("labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=s.width/2;break;case"r":l=-s.width/2;break}return l&&(d+=t?l:-l),l=0,d}}function Pi(e,r){return e.node(r).width}let br=E,_i=ki.positionX;var Ci=Li;function Li(e){e=br.asNonCompoundGraph(e),$i(e),Object.entries(_i(e)).forEach(([r,t])=>e.node(r).x=t)}function $i(e){let r=br.buildLayerMatrix(e),t=e.graph().ranksep,n=0;r.forEach(i=>{const a=i.reduce((o,s)=>{const d=e.node(s).height;return o>d?o:d},0);i.forEach(o=>e.node(o).y=n+a/2),n+=a+t})}let Re=Ft,Se=zt,ji=pn,Ti=E.normalizeRanks,Mi=bn,Ri=E.removeEmptyRanks,Ge=kn,Si=_n,Ve=Ln,Gi=bi,Vi=Ci,N=E,Fi=I.Graph;var Ai=Di;function Di(e,r){let t=r&&r.debugTiming?N.time:N.notime;t("layout",()=>{let n=t("  buildLayoutGraph",()=>Ki(e));t("  runLayout",()=>Yi(n,t)),t("  updateInputGraph",()=>Bi(e,n))})}function Yi(e,r){r("    makeSpaceForEdgeLabels",()=>Ji(e)),r("    removeSelfEdges",()=>sa(e)),r("    acyclic",()=>Re.run(e)),r("    nestingGraph.run",()=>Ge.run(e)),r("    rank",()=>ji(N.asNonCompoundGraph(e))),r("    injectEdgeLabelProxies",()=>Zi(e)),r("    removeEmptyRanks",()=>Ri(e)),r("    nestingGraph.cleanup",()=>Ge.cleanup(e)),r("    normalizeRanks",()=>Ti(e)),r("    assignRankMinMax",()=>ea(e)),r("    removeEdgeLabelProxies",()=>ra(e)),r("    normalize.run",()=>Se.run(e)),r("    parentDummyChains",()=>Mi(e)),r("    addBorderSegments",()=>Si(e)),r("    order",()=>Gi(e)),r("    insertSelfEdges",()=>da(e)),r("    adjustCoordinateSystem",()=>Ve.adjust(e)),r("    position",()=>Vi(e)),r("    positionSelfEdges",()=>la(e)),r("    removeBorderNodes",()=>oa(e)),r("    normalize.undo",()=>Se.undo(e)),r("    fixupEdgeLabelCoords",()=>ia(e)),r("    undoCoordinateSystem",()=>Ve.undo(e)),r("    translateGraph",()=>ta(e)),r("    assignNodeIntersects",()=>na(e)),r("    reversePoints",()=>aa(e)),r("    acyclic.undo",()=>Re.undo(e))}function Bi(e,r){e.nodes().forEach(t=>{let n=e.node(t),i=r.node(t);n&&(n.x=i.x,n.y=i.y,n.rank=i.rank,r.children(t).length&&(n.width=i.width,n.height=i.height))}),e.edges().forEach(t=>{let n=e.edge(t),i=r.edge(t);n.points=i.points,i.hasOwnProperty("x")&&(n.x=i.x,n.y=i.y)}),e.graph().width=r.graph().width,e.graph().height=r.graph().height}let zi=["nodesep","edgesep","ranksep","marginx","marginy"],Wi={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},qi=["acyclicer","ranker","rankdir","align"],Ui=["width","height"],Fe={width:0,height:0},Xi=["minlen","weight","width","height","labeloffset"],Hi={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Qi=["labelpos"];function Ki(e){let r=new Fi({multigraph:!0,compound:!0}),t=de(e.graph());return r.setGraph(Object.assign({},Wi,se(t,zi),N.pick(t,qi))),e.nodes().forEach(n=>{let i=de(e.node(n));const a=se(i,Ui);Object.keys(Fe).forEach(o=>{a[o]===void 0&&(a[o]=Fe[o])}),r.setNode(n,a),r.setParent(n,e.parent(n))}),e.edges().forEach(n=>{let i=de(e.edge(n));r.setEdge(n,Object.assign({},Hi,se(i,Xi),N.pick(i,Qi)))}),r}function Ji(e){let r=e.graph();r.ranksep/=2,e.edges().forEach(t=>{let n=e.edge(t);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function Zi(e){e.edges().forEach(r=>{let t=e.edge(r);if(t.width&&t.height){let n=e.node(r.v),a={rank:(e.node(r.w).rank-n.rank)/2+n.rank,e:r};N.addDummyNode(e,"edge-proxy",a,"_ep")}})}function ea(e){let r=0;e.nodes().forEach(t=>{let n=e.node(t);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,r=Math.max(r,n.maxRank))}),e.graph().maxRank=r}function ra(e){e.nodes().forEach(r=>{let t=e.node(r);t.dummy==="edge-proxy"&&(e.edge(t.e).labelRank=t.rank,e.removeNode(r))})}function ta(e){let r=Number.POSITIVE_INFINITY,t=0,n=Number.POSITIVE_INFINITY,i=0,a=e.graph(),o=a.marginx||0,s=a.marginy||0;function d(l){let h=l.x,f=l.y,c=l.width,p=l.height;r=Math.min(r,h-c/2),t=Math.max(t,h+c/2),n=Math.min(n,f-p/2),i=Math.max(i,f+p/2)}e.nodes().forEach(l=>d(e.node(l))),e.edges().forEach(l=>{let h=e.edge(l);h.hasOwnProperty("x")&&d(h)}),r-=o,n-=s,e.nodes().forEach(l=>{let h=e.node(l);h.x-=r,h.y-=n}),e.edges().forEach(l=>{let h=e.edge(l);h.points.forEach(f=>{f.x-=r,f.y-=n}),h.hasOwnProperty("x")&&(h.x-=r),h.hasOwnProperty("y")&&(h.y-=n)}),a.width=t-r+o,a.height=i-n+s}function na(e){e.edges().forEach(r=>{let t=e.edge(r),n=e.node(r.v),i=e.node(r.w),a,o;t.points?(a=t.points[0],o=t.points[t.points.length-1]):(t.points=[],a=i,o=n),t.points.unshift(N.intersectRect(n,a)),t.points.push(N.intersectRect(i,o))})}function ia(e){e.edges().forEach(r=>{let t=e.edge(r);if(t.hasOwnProperty("x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function aa(e){e.edges().forEach(r=>{let t=e.edge(r);t.reversed&&t.points.reverse()})}function oa(e){e.nodes().forEach(r=>{if(e.children(r).length){let t=e.node(r),n=e.node(t.borderTop),i=e.node(t.borderBottom),a=e.node(t.borderLeft[t.borderLeft.length-1]),o=e.node(t.borderRight[t.borderRight.length-1]);t.width=Math.abs(o.x-a.x),t.height=Math.abs(i.y-n.y),t.x=a.x+t.width/2,t.y=n.y+t.height/2}}),e.nodes().forEach(r=>{e.node(r).dummy==="border"&&e.removeNode(r)})}function sa(e){e.edges().forEach(r=>{if(r.v===r.w){var t=e.node(r.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e:r,label:e.edge(r)}),e.removeEdge(r)}})}function da(e){var r=N.buildLayerMatrix(e);r.forEach(t=>{var n=0;t.forEach((i,a)=>{var o=e.node(i);o.order=a+n,(o.selfEdges||[]).forEach(s=>{N.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:o.rank,order:a+ ++n,e:s.e,label:s.label},"_se")}),delete o.selfEdges})})}function la(e){e.nodes().forEach(r=>{var t=e.node(r);if(t.dummy==="selfedge"){var n=e.node(t.e.v),i=n.x+n.width/2,a=n.y,o=t.x-i,s=n.height/2;e.setEdge(t.e,t.label),e.removeNode(r),t.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],t.label.x=t.x,t.label.y=t.y}})}function se(e,r){return N.mapValues(N.pick(e,r),Number)}function de(e){var r={};return e&&Object.entries(e).forEach(([t,n])=>{typeof t=="string"&&(t=t.toLowerCase()),r[t]=n}),r}let ha=E,ua=I.Graph;var fa={debugOrdering:ca};function ca(e){let r=ha.buildLayerMatrix(e),t=new ua({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(n=>{t.setNode(n,{label:n}),t.setParent(n,"layer"+e.node(n).rank)}),e.edges().forEach(n=>t.setEdge(n.v,n.w,{},n.name)),r.forEach((n,i)=>{let a="layer"+i;t.setNode(a,{rank:"same"}),n.reduce((o,s)=>(t.setEdge(o,s,{style:"invis"}),s))}),t}var pa="1.0.4",ma={graphlib:I,layout:Ai,debug:fa,util:{time:E.time,notime:E.notime},version:pa};const ya=vr(ma);export{ya as D,ma as d};
